<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>README.Function.Reasoning</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Some examples showing how the Function.Reasoning module</a>
<a id="165" class="Comment">-- can be used to perform &quot;functional reasoning&quot; similar to what is being</a>
<a id="239" class="Comment">-- described in: https://stackoverflow.com/q/22676703/3168666</a>
<a id="301" class="Comment">------------------------------------------------------------------------</a>

<a id="375" class="Symbol">{-#</a> <a id="379" class="Keyword">OPTIONS</a> <a id="387" class="Pragma">--with-K</a> <a id="396" class="Symbol">#-}</a>

<a id="401" class="Keyword">module</a> <a id="408" href="README.Function.Reasoning.html" class="Module">README.Function.Reasoning</a> <a id="434" class="Keyword">where</a>

<a id="441" class="Comment">-- Function.Reasoning exports a flipped application (_|&gt;_) combinator</a>
<a id="511" class="Comment">-- as well as a type annotation (_∶_) combinator.</a>

<a id="562" class="Keyword">open</a> <a id="567" class="Keyword">import</a> <a id="574" href="Function.Reasoning.html" class="Module">Function.Reasoning</a>

<a id="594" class="Comment">------------------------------------------------------------------------</a>
<a id="667" class="Comment">-- A simple example</a>

<a id="688" class="Keyword">module</a> <a id="695" href="README.Function.Reasoning.html#695" class="Module">_</a> <a id="697" class="Symbol">{</a><a id="698" href="README.Function.Reasoning.html#698" class="Bound">A</a> <a id="700" href="README.Function.Reasoning.html#700" class="Bound">B</a> <a id="702" href="README.Function.Reasoning.html#702" class="Bound">C</a> <a id="704" class="Symbol">:</a> <a id="706" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="709" class="Symbol">}</a> <a id="711" class="Symbol">{</a><a id="712" href="README.Function.Reasoning.html#712" class="Bound">A→B</a> <a id="716" class="Symbol">:</a> <a id="718" href="README.Function.Reasoning.html#698" class="Bound">A</a> <a id="720" class="Symbol">→</a> <a id="722" href="README.Function.Reasoning.html#700" class="Bound">B</a><a id="723" class="Symbol">}</a> <a id="725" class="Symbol">{</a><a id="726" href="README.Function.Reasoning.html#726" class="Bound">B→C</a> <a id="730" class="Symbol">:</a> <a id="732" href="README.Function.Reasoning.html#700" class="Bound">B</a> <a id="734" class="Symbol">→</a> <a id="736" href="README.Function.Reasoning.html#702" class="Bound">C</a><a id="737" class="Symbol">}</a> <a id="739" class="Keyword">where</a>

<a id="746" class="Comment">-- Using the combinators we can, starting from a value, chain various</a>
<a id="816" class="Comment">-- functions whilst tracking the types of the intermediate results.</a>

  <a id="887" href="README.Function.Reasoning.html#887" class="Function">A→C</a> <a id="891" class="Symbol">:</a> <a id="893" href="README.Function.Reasoning.html#698" class="Bound">A</a> <a id="895" class="Symbol">→</a> <a id="897" href="README.Function.Reasoning.html#702" class="Bound">C</a>
  <a id="901" href="README.Function.Reasoning.html#887" class="Function">A→C</a> <a id="905" href="README.Function.Reasoning.html#905" class="Bound">a</a> <a id="907" class="Symbol">=</a>
       <a id="916" href="README.Function.Reasoning.html#905" class="Bound">a</a>    <a id="921" href="Function.Reasoning.html#479" class="Function">∶</a> <a id="923" href="README.Function.Reasoning.html#698" class="Bound">A</a>
    <a id="929" href="Function.Base.html#2127" class="Function Operator">|&gt;</a> <a id="932" href="README.Function.Reasoning.html#712" class="Bound">A→B</a>  <a id="937" href="Function.Reasoning.html#479" class="Function">∶</a> <a id="939" href="README.Function.Reasoning.html#700" class="Bound">B</a>
    <a id="945" href="Function.Base.html#2127" class="Function Operator">|&gt;</a> <a id="948" href="README.Function.Reasoning.html#726" class="Bound">B→C</a>  <a id="953" href="Function.Reasoning.html#479" class="Function">∶</a> <a id="955" href="README.Function.Reasoning.html#702" class="Bound">C</a>

<a id="958" class="Comment">------------------------------------------------------------------------</a>
<a id="1031" class="Comment">-- A more concrete example</a>

<a id="1059" class="Keyword">open</a> <a id="1064" class="Keyword">import</a> <a id="1071" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="1080" class="Keyword">open</a> <a id="1085" class="Keyword">import</a> <a id="1092" href="Data.List.Base.html" class="Module">Data.List.Base</a>
<a id="1107" class="Keyword">open</a> <a id="1112" class="Keyword">import</a> <a id="1119" href="Data.Char.Base.html" class="Module">Data.Char.Base</a>
<a id="1134" class="Keyword">open</a> <a id="1139" class="Keyword">import</a> <a id="1146" href="Data.String.Base.html" class="Module">Data.String.Base</a> <a id="1163" class="Symbol">as</a> <a id="1166" class="Module">String</a> <a id="1173" class="Keyword">using</a> <a id="1179" class="Symbol">(</a><a id="1180" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="1186" class="Symbol">;</a> <a id="1188" href="Data.String.Base.html#1537" class="Primitive">toList</a><a id="1194" class="Symbol">;</a> <a id="1196" href="Data.String.Base.html#1570" class="Primitive">fromList</a><a id="1204" class="Symbol">)</a>
<a id="1206" class="Keyword">open</a> <a id="1211" class="Keyword">import</a> <a id="1218" href="Data.String.Properties.html" class="Module">Data.String.Properties</a> <a id="1241" class="Symbol">as</a> <a id="1244" class="Module">String</a> <a id="1251" class="Keyword">using</a> <a id="1257" class="Symbol">(</a><a id="1258" href="Data.String.Properties.html#4782" class="Function Operator">_==_</a><a id="1262" class="Symbol">)</a>
<a id="1264" class="Keyword">open</a> <a id="1269" class="Keyword">import</a> <a id="1276" href="Function.Base.html" class="Module">Function.Base</a> <a id="1290" class="Keyword">using</a> <a id="1296" class="Symbol">(</a><a id="1297" href="Function.Base.html#1115" class="Function Operator">_∘_</a><a id="1300" class="Symbol">)</a>
<a id="1302" class="Keyword">open</a> <a id="1307" class="Keyword">import</a> <a id="1314" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="1324" class="Keyword">hiding</a> <a id="1331" class="Symbol">(</a><a id="1332" href="Data.Bool.Properties.html#2769" class="Function Operator">_≤?_</a><a id="1336" class="Symbol">)</a>
<a id="1338" class="Keyword">open</a> <a id="1343" class="Keyword">import</a> <a id="1350" href="Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="1368" class="Symbol">as</a> <a id="1371" class="Module">P</a> <a id="1373" class="Keyword">using</a> <a id="1379" class="Symbol">(</a><a id="1380" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="1383" class="Symbol">;</a> <a id="1385" href="Data.Product.Base.html#2000" class="Function Operator">&lt;_,_&gt;</a><a id="1390" class="Symbol">;</a> <a id="1392" href="Data.Product.Base.html#3109" class="Function">uncurry</a><a id="1399" class="Symbol">;</a> <a id="1401" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="1406" class="Symbol">)</a>
<a id="1408" class="Keyword">open</a> <a id="1413" class="Keyword">import</a> <a id="1420" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>

<a id="1443" class="Comment">-- This can give us for instance this decomposition of a function</a>
<a id="1509" class="Comment">-- collecting all of the substrings of the input which happen to be</a>
<a id="1577" class="Comment">-- palindromes:</a>

<a id="subpalindromes"></a><a id="1594" href="README.Function.Reasoning.html#1594" class="Function">subpalindromes</a> <a id="1609" class="Symbol">:</a> <a id="1611" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1618" class="Symbol">→</a> <a id="1620" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1625" href="Agda.Builtin.String.html#335" class="Postulate">String</a>
<a id="1632" href="README.Function.Reasoning.html#1594" class="Function">subpalindromes</a> <a id="1647" href="README.Function.Reasoning.html#1647" class="Bound">str</a> <a id="1651" class="Symbol">=</a> <a id="1653" class="Keyword">let</a> <a id="1657" href="README.Function.Reasoning.html#1657" class="Bound">Chars</a> <a id="1663" class="Symbol">=</a> <a id="1665" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1670" href="Agda.Builtin.Char.html#238" class="Postulate">Char</a> <a id="1675" class="Keyword">in</a>
     <a id="1683" href="README.Function.Reasoning.html#1647" class="Bound">str</a>                                   <a id="1721" href="Function.Reasoning.html#479" class="Function">∶</a> <a id="1723" href="Agda.Builtin.String.html#335" class="Postulate">String</a>
  <a id="1732" class="Comment">-- first generate the substrings</a>
  <a id="1767" href="Function.Base.html#2127" class="Function Operator">|&gt;</a> <a id="1770" href="Data.String.Base.html#1537" class="Primitive">toList</a>                                <a id="1808" href="Function.Reasoning.html#479" class="Function">∶</a> <a id="1810" href="README.Function.Reasoning.html#1657" class="Bound">Chars</a>
  <a id="1818" href="Function.Base.html#2127" class="Function Operator">|&gt;</a> <a id="1821" href="Data.List.Base.html#5556" class="Function">inits</a>                                 <a id="1859" href="Function.Reasoning.html#479" class="Function">∶</a> <a id="1861" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1866" href="README.Function.Reasoning.html#1657" class="Bound">Chars</a>
  <a id="1874" href="Function.Base.html#2127" class="Function Operator">|&gt;</a> <a id="1877" href="Data.List.Base.html#4594" class="Function">concatMap</a> <a id="1887" href="Data.List.Base.html#5657" class="Function">tails</a>                       <a id="1915" href="Function.Reasoning.html#479" class="Function">∶</a> <a id="1917" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1922" href="README.Function.Reasoning.html#1657" class="Bound">Chars</a>
  <a id="1930" class="Comment">-- then only keeps the ones which are not singletons</a>
  <a id="1985" href="Function.Base.html#2127" class="Function Operator">|&gt;</a> <a id="1988" href="Data.List.Base.html#10878" class="Function">filter</a> <a id="1995" class="Symbol">(λ</a> <a id="1998" href="README.Function.Reasoning.html#1998" class="Bound">cs</a> <a id="2001" class="Symbol">→</a> <a id="2003" class="Number">2</a> <a id="2005" href="Data.Nat.Properties.html#6146" class="Function Operator">≤?</a> <a id="2008" href="Data.List.Base.html#5083" class="Function">length</a> <a id="2015" href="README.Function.Reasoning.html#1998" class="Bound">cs</a><a id="2017" class="Symbol">)</a>        <a id="2026" href="Function.Reasoning.html#479" class="Function">∶</a> <a id="2028" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2033" href="README.Function.Reasoning.html#1657" class="Bound">Chars</a>
  <a id="2041" class="Comment">-- only keep the ones that are palindromes</a>
  <a id="2086" href="Function.Base.html#2127" class="Function Operator">|&gt;</a> <a id="2089" href="Data.List.Base.html#1631" class="Function">map</a> <a id="2093" href="Data.Product.Base.html#2000" class="Function Operator">&lt;</a> <a id="2095" href="Data.String.Base.html#1570" class="Primitive">fromList</a> <a id="2104" href="Data.Product.Base.html#2000" class="Function Operator">,</a> <a id="2106" href="Data.String.Base.html#1570" class="Primitive">fromList</a> <a id="2115" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="2117" href="Data.List.Base.html#7419" class="Function">reverse</a> <a id="2125" href="Data.Product.Base.html#2000" class="Function Operator">&gt;</a> <a id="2127" href="Function.Reasoning.html#479" class="Function">∶</a> <a id="2129" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2134" class="Symbol">(</a><a id="2135" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="2142" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2144" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="2150" class="Symbol">)</a>
  <a id="2154" href="Function.Base.html#2127" class="Function Operator">|&gt;</a> <a id="2157" href="Data.List.Base.html#10878" class="Function">filter</a> <a id="2164" class="Symbol">(</a><a id="2165" href="Data.Product.Base.html#3109" class="Function">uncurry</a> <a id="2173" href="Data.String.Properties.html#2717" class="Function Operator">String._≟_</a><a id="2183" class="Symbol">)</a>           <a id="2195" href="Function.Reasoning.html#479" class="Function">∶</a> <a id="2197" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2202" class="Symbol">(</a><a id="2203" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="2210" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2212" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="2218" class="Symbol">)</a>
  <a id="2222" href="Function.Base.html#2127" class="Function Operator">|&gt;</a> <a id="2225" href="Data.List.Base.html#1631" class="Function">map</a> <a id="2229" href="Data.Product.Base.html#636" class="Field">proj₁</a>                             <a id="2263" href="Function.Reasoning.html#479" class="Function">∶</a> <a id="2265" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2270" href="Agda.Builtin.String.html#335" class="Postulate">String</a>

<a id="2278" class="Comment">-- Test cases</a>

<a id="2293" href="README.Function.Reasoning.html#2293" class="Function">_</a> <a id="2295" class="Symbol">:</a> <a id="2297" href="README.Function.Reasoning.html#1594" class="Function">subpalindromes</a> <a id="2312" class="String">&quot;doctoresreverse&quot;</a> <a id="2330" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2332" class="String">&quot;eve&quot;</a> <a id="2338" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2340" class="String">&quot;rever&quot;</a> <a id="2348" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2350" class="String">&quot;srevers&quot;</a> <a id="2360" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2362" class="String">&quot;esreverse&quot;</a> <a id="2374" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2376" class="InductiveConstructor">[]</a>
<a id="2379" class="Symbol">_</a> <a id="2381" class="Symbol">=</a> <a id="2383" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="2389" href="README.Function.Reasoning.html#2389" class="Function">_</a> <a id="2391" class="Symbol">:</a> <a id="2393" href="README.Function.Reasoning.html#1594" class="Function">subpalindromes</a> <a id="2408" class="String">&quot;elle-meme&quot;</a> <a id="2420" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2422" class="String">&quot;ll&quot;</a> <a id="2427" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2429" class="String">&quot;elle&quot;</a> <a id="2436" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2438" class="String">&quot;mem&quot;</a> <a id="2444" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2446" class="String">&quot;eme&quot;</a> <a id="2452" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2454" class="InductiveConstructor">[]</a>
<a id="2457" class="Symbol">_</a> <a id="2459" class="Symbol">=</a> <a id="2461" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre></body></html>