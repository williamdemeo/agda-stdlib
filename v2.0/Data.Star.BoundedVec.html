<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Star.BoundedVec</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Bounded vectors (inefficient implementation)</a>
<a id="154" class="Comment">------------------------------------------------------------------------</a>

<a id="228" class="Comment">-- Vectors of a specified maximum length.</a>

<a id="271" class="Symbol">{-#</a> <a id="275" class="Keyword">OPTIONS</a> <a id="283" class="Pragma">--with-K</a> <a id="292" class="Pragma">--safe</a> <a id="299" class="Symbol">#-}</a>

<a id="304" class="Keyword">module</a> <a id="311" href="Data.Star.BoundedVec.html" class="Module">Data.Star.BoundedVec</a> <a id="332" class="Keyword">where</a>

<a id="339" class="Keyword">import</a> <a id="346" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="362" class="Symbol">as</a> <a id="365" class="Module">Maybe</a>
<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="Data.Star.Nat.html" class="Module">Data.Star.Nat</a>
<a id="397" class="Keyword">open</a> <a id="402" class="Keyword">import</a> <a id="409" href="Data.Star.Decoration.html" class="Module">Data.Star.Decoration</a>
<a id="430" class="Keyword">open</a> <a id="435" class="Keyword">import</a> <a id="442" href="Data.Star.Pointer.html" class="Module">Data.Star.Pointer</a>
<a id="460" class="Keyword">open</a> <a id="465" class="Keyword">import</a> <a id="472" href="Data.Star.List.html" class="Module">Data.Star.List</a> <a id="487" class="Keyword">using</a> <a id="493" class="Symbol">(</a><a id="494" href="Data.Star.List.html#569" class="Function">List</a><a id="498" class="Symbol">)</a>
<a id="500" class="Keyword">open</a> <a id="505" class="Keyword">import</a> <a id="512" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="522" class="Keyword">open</a> <a id="527" class="Keyword">import</a> <a id="534" href="Function.Base.html" class="Module">Function.Base</a> <a id="548" class="Keyword">using</a> <a id="554" class="Symbol">(</a><a id="555" href="Function.Base.html#725" class="Function">const</a><a id="560" class="Symbol">)</a>
<a id="562" class="Keyword">open</a> <a id="567" class="Keyword">import</a> <a id="574" href="Relation.Binary.Core.html" class="Module">Relation.Binary.Core</a> <a id="595" class="Keyword">using</a> <a id="601" class="Symbol">(</a><a id="602" href="Relation.Binary.Core.html#1474" class="Function Operator">_=[_]⇒_</a><a id="609" class="Symbol">)</a>
<a id="611" class="Keyword">open</a> <a id="616" class="Keyword">import</a> <a id="623" href="Relation.Binary.Consequences.html" class="Module">Relation.Binary.Consequences</a>
<a id="652" class="Keyword">open</a> <a id="657" class="Keyword">import</a> <a id="664" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html" class="Module">Relation.Binary.Construct.Closure.ReflexiveTransitive</a>

<a id="719" class="Comment">------------------------------------------------------------------------</a>
<a id="792" class="Comment">-- The type</a>

<a id="805" class="Comment">-- Finite sets decorated with elements (note the use of suc).</a>

<a id="BoundedVec"></a><a id="868" href="Data.Star.BoundedVec.html#868" class="Function">BoundedVec</a> <a id="879" class="Symbol">:</a> <a id="881" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="885" class="Symbol">→</a> <a id="887" href="Data.Star.Nat.html#580" class="Function">ℕ</a> <a id="889" class="Symbol">→</a> <a id="891" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="895" href="Data.Star.BoundedVec.html#868" class="Function">BoundedVec</a> <a id="906" href="Data.Star.BoundedVec.html#906" class="Bound">a</a> <a id="908" href="Data.Star.BoundedVec.html#908" class="Bound">n</a> <a id="910" class="Symbol">=</a> <a id="912" href="Data.Star.Pointer.html#1458" class="Function">Any</a> <a id="916" class="Symbol">(λ</a> <a id="919" href="Data.Star.BoundedVec.html#919" class="Bound">_</a> <a id="921" class="Symbol">→</a> <a id="923" href="Data.Star.BoundedVec.html#906" class="Bound">a</a><a id="924" class="Symbol">)</a> <a id="926" class="Symbol">(λ</a> <a id="929" href="Data.Star.BoundedVec.html#929" class="Bound">_</a> <a id="931" class="Symbol">→</a> <a id="933" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="934" class="Symbol">)</a> <a id="936" class="Symbol">(</a><a id="937" href="Data.Star.Nat.html#654" class="Function">suc</a> <a id="941" href="Data.Star.BoundedVec.html#908" class="Bound">n</a><a id="942" class="Symbol">)</a>

<a id="[]"></a><a id="945" href="Data.Star.BoundedVec.html#945" class="Function">[]</a> <a id="948" class="Symbol">:</a> <a id="950" class="Symbol">∀</a> <a id="952" class="Symbol">{</a><a id="953" href="Data.Star.BoundedVec.html#953" class="Bound">a</a> <a id="955" href="Data.Star.BoundedVec.html#955" class="Bound">n</a><a id="956" class="Symbol">}</a> <a id="958" class="Symbol">→</a> <a id="960" href="Data.Star.BoundedVec.html#868" class="Function">BoundedVec</a> <a id="971" href="Data.Star.BoundedVec.html#953" class="Bound">a</a> <a id="973" href="Data.Star.BoundedVec.html#955" class="Bound">n</a>
<a id="975" href="Data.Star.BoundedVec.html#945" class="Function">[]</a> <a id="978" class="Symbol">=</a> <a id="980" href="Data.Star.Pointer.html#1694" class="Function">this</a> <a id="985" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>

<a id="989" class="Keyword">infixr</a> <a id="996" class="Number">5</a> <a id="998" href="Data.Star.BoundedVec.html#1003" class="Function Operator">_∷_</a>

<a id="_∷_"></a><a id="1003" href="Data.Star.BoundedVec.html#1003" class="Function Operator">_∷_</a> <a id="1007" class="Symbol">:</a> <a id="1009" class="Symbol">∀</a> <a id="1011" class="Symbol">{</a><a id="1012" href="Data.Star.BoundedVec.html#1012" class="Bound">a</a> <a id="1014" href="Data.Star.BoundedVec.html#1014" class="Bound">n</a><a id="1015" class="Symbol">}</a> <a id="1017" class="Symbol">→</a> <a id="1019" href="Data.Star.BoundedVec.html#1012" class="Bound">a</a> <a id="1021" class="Symbol">→</a> <a id="1023" href="Data.Star.BoundedVec.html#868" class="Function">BoundedVec</a> <a id="1034" href="Data.Star.BoundedVec.html#1012" class="Bound">a</a> <a id="1036" href="Data.Star.BoundedVec.html#1014" class="Bound">n</a> <a id="1038" class="Symbol">→</a> <a id="1040" href="Data.Star.BoundedVec.html#868" class="Function">BoundedVec</a> <a id="1051" href="Data.Star.BoundedVec.html#1012" class="Bound">a</a> <a id="1053" class="Symbol">(</a><a id="1054" href="Data.Star.Nat.html#654" class="Function">suc</a> <a id="1058" href="Data.Star.BoundedVec.html#1014" class="Bound">n</a><a id="1059" class="Symbol">)</a>
<a id="1061" href="Data.Star.BoundedVec.html#1003" class="Function Operator">_∷_</a> <a id="1065" class="Symbol">=</a> <a id="1067" href="Data.Star.Pointer.html#1800" class="Function">that</a>

<a id="1073" class="Comment">------------------------------------------------------------------------</a>
<a id="1146" class="Comment">-- Increasing the bound</a>

<a id="1171" class="Comment">-- Note that this operation is linear in the length of the list.</a>

<a id="↑"></a><a id="1237" href="Data.Star.BoundedVec.html#1237" class="Function">↑</a> <a id="1239" class="Symbol">:</a> <a id="1241" class="Symbol">∀</a> <a id="1243" class="Symbol">{</a><a id="1244" href="Data.Star.BoundedVec.html#1244" class="Bound">a</a> <a id="1246" href="Data.Star.BoundedVec.html#1246" class="Bound">n</a><a id="1247" class="Symbol">}</a> <a id="1249" class="Symbol">→</a> <a id="1251" href="Data.Star.BoundedVec.html#868" class="Function">BoundedVec</a> <a id="1262" href="Data.Star.BoundedVec.html#1244" class="Bound">a</a> <a id="1264" href="Data.Star.BoundedVec.html#1246" class="Bound">n</a> <a id="1266" class="Symbol">→</a> <a id="1268" href="Data.Star.BoundedVec.html#868" class="Function">BoundedVec</a> <a id="1279" href="Data.Star.BoundedVec.html#1244" class="Bound">a</a> <a id="1281" class="Symbol">(</a><a id="1282" href="Data.Star.Nat.html#654" class="Function">suc</a> <a id="1286" href="Data.Star.BoundedVec.html#1246" class="Bound">n</a><a id="1287" class="Symbol">)</a>
<a id="1289" href="Data.Star.BoundedVec.html#1237" class="Function">↑</a> <a id="1291" class="Symbol">{</a><a id="1292" href="Data.Star.BoundedVec.html#1292" class="Bound">a</a><a id="1293" class="Symbol">}</a> <a id="1295" class="Symbol">=</a> <a id="1297" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1665" class="Function">gmap</a> <a id="1302" href="Data.Star.BoundedVec.html#1321" class="Function">inc</a> <a id="1306" href="Data.Star.BoundedVec.html#1359" class="Function">lift</a>
  <a id="1313" class="Keyword">where</a>
  <a id="1321" href="Data.Star.BoundedVec.html#1321" class="Function">inc</a> <a id="1325" class="Symbol">=</a> <a id="1327" href="Data.Maybe.Base.html#2049" class="Function">Maybe.map</a> <a id="1337" class="Symbol">(</a><a id="1338" href="Relation.Binary.Consequences.html#7207" class="Function">map-NonEmpty</a> <a id="1351" href="Data.Star.Nat.html#654" class="Function">suc</a><a id="1354" class="Symbol">)</a>

  <a id="1359" href="Data.Star.BoundedVec.html#1359" class="Function">lift</a> <a id="1364" class="Symbol">:</a> <a id="1366" href="Data.Star.Pointer.html#800" class="Datatype">Pointer</a> <a id="1374" class="Symbol">(λ</a> <a id="1377" href="Data.Star.BoundedVec.html#1377" class="Bound">_</a> <a id="1379" class="Symbol">→</a> <a id="1381" href="Data.Star.BoundedVec.html#1292" class="Bound">a</a><a id="1382" class="Symbol">)</a> <a id="1384" class="Symbol">(λ</a> <a id="1387" href="Data.Star.BoundedVec.html#1387" class="Bound">_</a> <a id="1389" class="Symbol">→</a> <a id="1391" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="1392" class="Symbol">)</a> <a id="1394" href="Relation.Binary.Core.html#1474" class="Function Operator">=[</a> <a id="1397" href="Data.Star.BoundedVec.html#1321" class="Function">inc</a> <a id="1401" href="Relation.Binary.Core.html#1474" class="Function Operator">]⇒</a>
         <a id="1413" href="Data.Star.Pointer.html#800" class="Datatype">Pointer</a> <a id="1421" class="Symbol">(λ</a> <a id="1424" href="Data.Star.BoundedVec.html#1424" class="Bound">_</a> <a id="1426" class="Symbol">→</a> <a id="1428" href="Data.Star.BoundedVec.html#1292" class="Bound">a</a><a id="1429" class="Symbol">)</a> <a id="1431" class="Symbol">(λ</a> <a id="1434" href="Data.Star.BoundedVec.html#1434" class="Bound">_</a> <a id="1436" class="Symbol">→</a> <a id="1438" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="1439" class="Symbol">)</a>
  <a id="1443" href="Data.Star.BoundedVec.html#1359" class="Function">lift</a> <a id="1448" class="Symbol">(</a><a id="1449" href="Data.Star.Pointer.html#944" class="InductiveConstructor">step</a> <a id="1454" href="Data.Star.BoundedVec.html#1454" class="Bound">x</a><a id="1455" class="Symbol">)</a> <a id="1457" class="Symbol">=</a> <a id="1459" href="Data.Star.Pointer.html#944" class="InductiveConstructor">step</a> <a id="1464" href="Data.Star.BoundedVec.html#1454" class="Bound">x</a>
  <a id="1468" href="Data.Star.BoundedVec.html#1359" class="Function">lift</a> <a id="1473" class="Symbol">(</a><a id="1474" href="Data.Star.Pointer.html#1107" class="InductiveConstructor">done</a> <a id="1479" class="Symbol">_)</a> <a id="1482" class="Symbol">=</a> <a id="1484" href="Data.Star.Pointer.html#1107" class="InductiveConstructor">done</a> <a id="1489" class="Symbol">_</a>

<a id="1492" class="Comment">------------------------------------------------------------------------</a>
<a id="1565" class="Comment">-- Conversions</a>

<a id="fromList"></a><a id="1581" href="Data.Star.BoundedVec.html#1581" class="Function">fromList</a> <a id="1590" class="Symbol">:</a> <a id="1592" class="Symbol">∀</a> <a id="1594" class="Symbol">{</a><a id="1595" href="Data.Star.BoundedVec.html#1595" class="Bound">a</a><a id="1596" class="Symbol">}</a> <a id="1598" class="Symbol">→</a> <a id="1600" class="Symbol">(</a><a id="1601" href="Data.Star.BoundedVec.html#1601" class="Bound">xs</a> <a id="1604" class="Symbol">:</a> <a id="1606" href="Data.Star.List.html#569" class="Function">List</a> <a id="1611" href="Data.Star.BoundedVec.html#1595" class="Bound">a</a><a id="1612" class="Symbol">)</a> <a id="1614" class="Symbol">→</a> <a id="1616" href="Data.Star.BoundedVec.html#868" class="Function">BoundedVec</a> <a id="1627" href="Data.Star.BoundedVec.html#1595" class="Bound">a</a> <a id="1629" class="Symbol">(</a><a id="1630" href="Data.Star.Nat.html#710" class="Function">length</a> <a id="1637" href="Data.Star.BoundedVec.html#1601" class="Bound">xs</a><a id="1639" class="Symbol">)</a>
<a id="1641" href="Data.Star.BoundedVec.html#1581" class="Function">fromList</a> <a id="1650" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#686" class="InductiveConstructor">ε</a>        <a id="1659" class="Symbol">=</a> <a id="1661" href="Data.Star.BoundedVec.html#945" class="Function">[]</a>
<a id="1664" href="Data.Star.BoundedVec.html#1581" class="Function">fromList</a> <a id="1673" class="Symbol">(</a><a id="1674" href="Data.Star.BoundedVec.html#1674" class="Bound">x</a> <a id="1676" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#713" class="InductiveConstructor Operator">◅</a> <a id="1678" href="Data.Star.BoundedVec.html#1678" class="Bound">xs</a><a id="1680" class="Symbol">)</a> <a id="1682" class="Symbol">=</a> <a id="1684" href="Data.Star.BoundedVec.html#1674" class="Bound">x</a> <a id="1686" href="Data.Star.BoundedVec.html#1003" class="Function Operator">∷</a> <a id="1688" href="Data.Star.BoundedVec.html#1581" class="Function">fromList</a> <a id="1697" href="Data.Star.BoundedVec.html#1678" class="Bound">xs</a>

<a id="toList"></a><a id="1701" href="Data.Star.BoundedVec.html#1701" class="Function">toList</a> <a id="1708" class="Symbol">:</a> <a id="1710" class="Symbol">∀</a> <a id="1712" class="Symbol">{</a><a id="1713" href="Data.Star.BoundedVec.html#1713" class="Bound">a</a> <a id="1715" href="Data.Star.BoundedVec.html#1715" class="Bound">n</a><a id="1716" class="Symbol">}</a> <a id="1718" class="Symbol">→</a> <a id="1720" href="Data.Star.BoundedVec.html#868" class="Function">BoundedVec</a> <a id="1731" href="Data.Star.BoundedVec.html#1713" class="Bound">a</a> <a id="1733" href="Data.Star.BoundedVec.html#1715" class="Bound">n</a> <a id="1735" class="Symbol">→</a> <a id="1737" href="Data.Star.List.html#569" class="Function">List</a> <a id="1742" href="Data.Star.BoundedVec.html#1713" class="Bound">a</a>
<a id="1744" href="Data.Star.BoundedVec.html#1701" class="Function">toList</a> <a id="1751" href="Data.Star.BoundedVec.html#1751" class="Bound">xs</a> <a id="1754" class="Symbol">=</a> <a id="1756" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1665" class="Function">gmap</a> <a id="1761" class="Symbol">(</a><a id="1762" href="Function.Base.html#725" class="Function">const</a> <a id="1768" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a><a id="1770" class="Symbol">)</a> <a id="1772" href="Data.Star.Decoration.html#1429" class="Function">decoration</a> <a id="1783" class="Symbol">(</a><a id="1784" href="Data.Star.Pointer.html#3001" class="Function">init</a> <a id="1789" href="Data.Star.BoundedVec.html#1751" class="Bound">xs</a><a id="1791" class="Symbol">)</a>
</pre></body></html>