<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>README.Data.Container.FreeMonad</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Example showing how the free monad construction on containers can be</a>
<a id="178" class="Comment">-- used</a>
<a id="186" class="Comment">------------------------------------------------------------------------</a>

<a id="260" class="Symbol">{-#</a> <a id="264" class="Keyword">OPTIONS</a> <a id="272" class="Pragma">--cubical-compatible</a> <a id="293" class="Pragma">--sized-types</a> <a id="307" class="Symbol">#-}</a>

<a id="312" class="Keyword">module</a> <a id="319" href="README.Data.Container.FreeMonad.html" class="Module">README.Data.Container.FreeMonad</a> <a id="351" class="Keyword">where</a>

<a id="358" class="Keyword">open</a> <a id="363" class="Keyword">import</a> <a id="370" href="Level.html" class="Module">Level</a> <a id="376" class="Keyword">using</a> <a id="382" class="Symbol">(</a><a id="383" href="Level.html#521" class="Function">0ℓ</a><a id="385" class="Symbol">)</a>
<a id="387" class="Keyword">open</a> <a id="392" class="Keyword">import</a> <a id="399" href="Effect.Monad.html" class="Module">Effect.Monad</a>
<a id="412" class="Keyword">open</a> <a id="417" class="Keyword">import</a> <a id="424" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="435" class="Keyword">open</a> <a id="440" class="Keyword">import</a> <a id="447" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="457" class="Keyword">open</a> <a id="462" class="Keyword">import</a> <a id="469" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="484" class="Keyword">using</a> <a id="490" class="Symbol">(</a><a id="491" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="495" class="Symbol">;</a> <a id="497" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="501" class="Symbol">)</a>
<a id="503" class="Keyword">open</a> <a id="508" class="Keyword">import</a> <a id="515" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="524" class="Keyword">open</a> <a id="529" class="Keyword">import</a> <a id="536" href="Data.Sum.Base.html" class="Module">Data.Sum.Base</a> <a id="550" class="Keyword">using</a> <a id="556" class="Symbol">(</a><a id="557" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a><a id="561" class="Symbol">;</a> <a id="563" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a><a id="567" class="Symbol">)</a>
<a id="569" class="Keyword">open</a> <a id="574" class="Keyword">import</a> <a id="581" href="Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="599" class="Keyword">renaming</a> <a id="608" class="Symbol">(</a><a id="609" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a> <a id="613" class="Symbol">to</a> <a id="616" class="Function Operator">_⟨×⟩_</a><a id="621" class="Symbol">)</a>
<a id="623" class="Keyword">open</a> <a id="628" class="Keyword">import</a> <a id="635" href="Data.Container.html" class="Module">Data.Container</a> <a id="650" class="Keyword">using</a> <a id="656" class="Symbol">(</a><a id="657" href="Data.Container.Core.html#513" class="Record">Container</a><a id="666" class="Symbol">;</a> <a id="668" href="Data.Container.Core.html#577" class="InductiveConstructor Operator">_▷_</a><a id="671" class="Symbol">)</a>
<a id="673" class="Keyword">open</a> <a id="678" class="Keyword">import</a> <a id="685" href="Data.Container.Combinator.html" class="Module">Data.Container.Combinator</a>
<a id="711" class="Keyword">open</a> <a id="716" class="Keyword">import</a> <a id="723" href="Data.Container.FreeMonad.html" class="Module">Data.Container.FreeMonad</a> <a id="748" class="Symbol">as</a> <a id="751" class="Module">FreeMonad</a>
<a id="761" class="Keyword">open</a> <a id="766" class="Keyword">import</a> <a id="773" href="Data.W.html" class="Module">Data.W</a>
<a id="780" class="Keyword">open</a> <a id="785" class="Keyword">import</a> <a id="792" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="830" class="Symbol">as</a> <a id="833" class="Module">P</a>

<a id="836" class="Comment">------------------------------------------------------------------------</a>
<a id="909" class="Comment">-- Defining the signature of an effect and building trees describing</a>
<a id="978" class="Comment">-- computations leveraging that effect.</a>

<a id="1019" class="Comment">-- The signature of state and its (generic) operations.</a>

<a id="State"></a><a id="1076" href="README.Data.Container.FreeMonad.html#1076" class="Function">State</a> <a id="1082" class="Symbol">:</a> <a id="1084" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1088" class="Symbol">→</a> <a id="1090" href="Data.Container.Core.html#513" class="Record">Container</a> <a id="1100" class="Symbol">_</a> <a id="1102" class="Symbol">_</a>
<a id="1104" href="README.Data.Container.FreeMonad.html#1076" class="Function">State</a> <a id="1110" href="README.Data.Container.FreeMonad.html#1110" class="Bound">S</a> <a id="1112" class="Symbol">=</a> <a id="1114" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="1116" href="README.Data.Container.FreeMonad.html#1138" class="Function Operator">⟶</a> <a id="1118" href="README.Data.Container.FreeMonad.html#1110" class="Bound">S</a> <a id="1120" href="Data.Container.Combinator.html#3129" class="Function Operator">⊎</a> <a id="1122" href="README.Data.Container.FreeMonad.html#1110" class="Bound">S</a> <a id="1124" href="README.Data.Container.FreeMonad.html#1138" class="Function Operator">⟶</a> <a id="1126" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="1130" class="Keyword">where</a>
  <a id="1138" href="README.Data.Container.FreeMonad.html#1138" class="Function Operator">_⟶_</a> <a id="1142" class="Symbol">:</a> <a id="1144" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1148" class="Symbol">→</a> <a id="1150" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1154" class="Symbol">→</a> <a id="1156" href="Data.Container.Core.html#513" class="Record">Container</a> <a id="1166" class="Symbol">_</a> <a id="1168" class="Symbol">_</a>
  <a id="1172" href="README.Data.Container.FreeMonad.html#1172" class="Bound">I</a> <a id="1174" href="README.Data.Container.FreeMonad.html#1138" class="Function Operator">⟶</a> <a id="1176" href="README.Data.Container.FreeMonad.html#1176" class="Bound">O</a> <a id="1178" class="Symbol">=</a> <a id="1180" href="README.Data.Container.FreeMonad.html#1172" class="Bound">I</a> <a id="1182" href="Data.Container.Core.html#577" class="InductiveConstructor Operator">▷</a> <a id="1184" class="Symbol">λ</a> <a id="1186" href="README.Data.Container.FreeMonad.html#1186" class="Bound">_</a> <a id="1188" class="Symbol">→</a> <a id="1190" href="README.Data.Container.FreeMonad.html#1176" class="Bound">O</a>

<a id="get"></a><a id="1193" href="README.Data.Container.FreeMonad.html#1193" class="Function">get</a> <a id="1197" class="Symbol">:</a> <a id="1199" class="Symbol">∀</a> <a id="1201" class="Symbol">{</a><a id="1202" href="README.Data.Container.FreeMonad.html#1202" class="Bound">S</a><a id="1203" class="Symbol">}</a> <a id="1205" class="Symbol">→</a> <a id="1207" href="README.Data.Container.FreeMonad.html#1076" class="Function">State</a> <a id="1213" href="README.Data.Container.FreeMonad.html#1202" class="Bound">S</a> <a id="1215" href="Data.Container.FreeMonad.html#2344" class="Datatype Operator">⋆</a> <a id="1217" href="README.Data.Container.FreeMonad.html#1202" class="Bound">S</a>
<a id="1219" href="README.Data.Container.FreeMonad.html#1193" class="Function">get</a> <a id="1223" class="Symbol">=</a> <a id="1225" href="Data.Container.FreeMonad.html#2425" class="InductiveConstructor">impure</a> <a id="1232" class="Symbol">(</a><a id="1233" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1238" class="Symbol">_</a> <a id="1240" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1242" href="Data.Container.FreeMonad.html#2406" class="InductiveConstructor">pure</a><a id="1246" class="Symbol">)</a>

<a id="put"></a><a id="1249" href="README.Data.Container.FreeMonad.html#1249" class="Function">put</a> <a id="1253" class="Symbol">:</a> <a id="1255" class="Symbol">∀</a> <a id="1257" class="Symbol">{</a><a id="1258" href="README.Data.Container.FreeMonad.html#1258" class="Bound">S</a><a id="1259" class="Symbol">}</a> <a id="1261" class="Symbol">→</a> <a id="1263" href="README.Data.Container.FreeMonad.html#1258" class="Bound">S</a> <a id="1265" class="Symbol">→</a> <a id="1267" href="README.Data.Container.FreeMonad.html#1076" class="Function">State</a> <a id="1273" href="README.Data.Container.FreeMonad.html#1258" class="Bound">S</a> <a id="1275" href="Data.Container.FreeMonad.html#2344" class="Datatype Operator">⋆</a> <a id="1277" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="1279" href="README.Data.Container.FreeMonad.html#1249" class="Function">put</a> <a id="1283" href="README.Data.Container.FreeMonad.html#1283" class="Bound">s</a> <a id="1285" class="Symbol">=</a> <a id="1287" href="Data.Container.FreeMonad.html#2425" class="InductiveConstructor">impure</a> <a id="1294" class="Symbol">(</a><a id="1295" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1300" href="README.Data.Container.FreeMonad.html#1283" class="Bound">s</a> <a id="1302" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1304" href="Data.Container.FreeMonad.html#2406" class="InductiveConstructor">pure</a><a id="1308" class="Symbol">)</a>

<a id="1311" class="Comment">-- Using the above we can, for example, write a stateful program that</a>
<a id="1381" class="Comment">-- delivers a boolean.</a>
<a id="prog"></a><a id="1404" href="README.Data.Container.FreeMonad.html#1404" class="Function">prog</a> <a id="1409" class="Symbol">:</a> <a id="1411" href="README.Data.Container.FreeMonad.html#1076" class="Function">State</a> <a id="1417" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1419" href="Data.Container.FreeMonad.html#2344" class="Datatype Operator">⋆</a> <a id="1421" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="1426" href="README.Data.Container.FreeMonad.html#1404" class="Function">prog</a> <a id="1431" class="Symbol">=</a>
  <a id="1435" href="README.Data.Container.FreeMonad.html#1193" class="Function">get</a>         <a id="1447" href="Data.Container.FreeMonad.html#3873" class="Function Operator">&gt;&gt;=</a> <a id="1451" class="Symbol">λ</a> <a id="1453" href="README.Data.Container.FreeMonad.html#1453" class="Bound">n</a> <a id="1455" class="Symbol">→</a>
  <a id="1459" href="README.Data.Container.FreeMonad.html#1249" class="Function">put</a> <a id="1463" class="Symbol">(</a><a id="1464" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1468" href="README.Data.Container.FreeMonad.html#1453" class="Bound">n</a><a id="1469" class="Symbol">)</a> <a id="1471" href="Effect.Monad.html#1011" class="Function Operator">&gt;&gt;</a>
  <a id="1476" href="Data.Container.FreeMonad.html#2406" class="InductiveConstructor">pure</a> <a id="1481" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
  <a id="1488" class="Keyword">where</a>
  <a id="1496" class="Keyword">open</a> <a id="1501" href="Effect.Monad.html#779" class="Module">RawMonad</a> <a id="1510" href="Data.Container.FreeMonad.html#4299" class="Function">monad</a> <a id="1516" class="Keyword">using</a> <a id="1522" class="Symbol">(</a><a id="1523" href="Effect.Monad.html#1011" class="Function Operator">_&gt;&gt;_</a><a id="1527" class="Symbol">)</a>

<a id="runState"></a><a id="1530" href="README.Data.Container.FreeMonad.html#1530" class="Function">runState</a> <a id="1539" class="Symbol">:</a> <a id="1541" class="Symbol">{</a><a id="1542" href="README.Data.Container.FreeMonad.html#1542" class="Bound">S</a> <a id="1544" href="README.Data.Container.FreeMonad.html#1544" class="Bound">X</a> <a id="1546" class="Symbol">:</a> <a id="1548" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="1551" class="Symbol">}</a> <a id="1553" class="Symbol">→</a> <a id="1555" href="README.Data.Container.FreeMonad.html#1076" class="Function">State</a> <a id="1561" href="README.Data.Container.FreeMonad.html#1542" class="Bound">S</a> <a id="1563" href="Data.Container.FreeMonad.html#2344" class="Datatype Operator">⋆</a> <a id="1565" href="README.Data.Container.FreeMonad.html#1544" class="Bound">X</a> <a id="1567" class="Symbol">→</a> <a id="1569" class="Symbol">(</a><a id="1570" href="README.Data.Container.FreeMonad.html#1542" class="Bound">S</a> <a id="1572" class="Symbol">→</a> <a id="1574" href="README.Data.Container.FreeMonad.html#1544" class="Bound">X</a> <a id="1576" href="README.Data.Container.FreeMonad.html#616" class="Function Operator">⟨×⟩</a> <a id="1580" href="README.Data.Container.FreeMonad.html#1542" class="Bound">S</a><a id="1581" class="Symbol">)</a>
<a id="1583" href="README.Data.Container.FreeMonad.html#1530" class="Function">runState</a> <a id="1592" class="Symbol">(</a><a id="1593" href="Data.Container.FreeMonad.html#2406" class="InductiveConstructor">pure</a> <a id="1598" href="README.Data.Container.FreeMonad.html#1598" class="Bound">x</a><a id="1599" class="Symbol">)</a>                <a id="1616" class="Symbol">=</a> <a id="1618" class="Symbol">λ</a> <a id="1620" href="README.Data.Container.FreeMonad.html#1620" class="Bound">s</a> <a id="1622" class="Symbol">→</a> <a id="1624" href="README.Data.Container.FreeMonad.html#1598" class="Bound">x</a> <a id="1626" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1628" href="README.Data.Container.FreeMonad.html#1620" class="Bound">s</a>
<a id="1630" href="README.Data.Container.FreeMonad.html#1530" class="Function">runState</a> <a id="1639" class="Symbol">(</a><a id="1640" href="Data.Container.FreeMonad.html#2425" class="InductiveConstructor">impure</a> <a id="1647" class="Symbol">((</a><a id="1649" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1654" class="Symbol">_)</a> <a id="1657" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1659" href="README.Data.Container.FreeMonad.html#1659" class="Bound">k</a><a id="1660" class="Symbol">))</a> <a id="1663" class="Symbol">=</a> <a id="1665" class="Symbol">λ</a> <a id="1667" href="README.Data.Container.FreeMonad.html#1667" class="Bound">s</a> <a id="1669" class="Symbol">→</a> <a id="1671" href="README.Data.Container.FreeMonad.html#1530" class="Function">runState</a> <a id="1680" class="Symbol">(</a><a id="1681" href="README.Data.Container.FreeMonad.html#1659" class="Bound">k</a> <a id="1683" href="README.Data.Container.FreeMonad.html#1667" class="Bound">s</a><a id="1684" class="Symbol">)</a> <a id="1686" href="README.Data.Container.FreeMonad.html#1667" class="Bound">s</a>
<a id="1688" href="README.Data.Container.FreeMonad.html#1530" class="Function">runState</a> <a id="1697" class="Symbol">(</a><a id="1698" href="Data.Container.FreeMonad.html#2425" class="InductiveConstructor">impure</a> <a id="1705" class="Symbol">((</a><a id="1707" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1712" href="README.Data.Container.FreeMonad.html#1712" class="Bound">s</a><a id="1713" class="Symbol">)</a> <a id="1715" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1717" href="README.Data.Container.FreeMonad.html#1717" class="Bound">k</a><a id="1718" class="Symbol">))</a> <a id="1721" class="Symbol">=</a> <a id="1723" class="Symbol">λ</a> <a id="1725" href="README.Data.Container.FreeMonad.html#1725" class="Bound">_</a> <a id="1727" class="Symbol">→</a> <a id="1729" href="README.Data.Container.FreeMonad.html#1530" class="Function">runState</a> <a id="1738" class="Symbol">(</a><a id="1739" href="README.Data.Container.FreeMonad.html#1717" class="Bound">k</a> <a id="1741" class="Symbol">_)</a> <a id="1744" href="README.Data.Container.FreeMonad.html#1712" class="Bound">s</a>

<a id="test"></a><a id="1747" href="README.Data.Container.FreeMonad.html#1747" class="Function">test</a> <a id="1752" class="Symbol">:</a> <a id="1754" href="README.Data.Container.FreeMonad.html#1530" class="Function">runState</a> <a id="1763" href="README.Data.Container.FreeMonad.html#1404" class="Function">prog</a> <a id="1768" class="Number">0</a> <a id="1770" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1772" class="Symbol">(</a><a id="1773" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="1778" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1780" class="Number">1</a><a id="1781" class="Symbol">)</a>
<a id="1783" href="README.Data.Container.FreeMonad.html#1747" class="Function">test</a> <a id="1788" class="Symbol">=</a> <a id="1790" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">P.refl</a>

<a id="1798" class="Comment">-- It should be noted that @State S ⋆ X@ is not the state monad. If we</a>
<a id="1869" class="Comment">-- could quotient @State S ⋆ X@ by the seven axioms of state (see</a>
<a id="1935" class="Comment">-- Plotkin and Power&#39;s &quot;Notions of Computation Determine Monads&quot;, 2002)</a>
<a id="2007" class="Comment">-- then we would get the state monad.</a>

<a id="2046" class="Comment">------------------------------------------------------------------------</a>
<a id="2119" class="Comment">-- Defining effectful inductive data structures</a>

<a id="2168" class="Comment">-- The definition of `C ⋆ A` is strictly positive in `A`, meaning that we</a>
<a id="2242" class="Comment">-- can use `C ⋆_` when defining (co)inductive datatypes.</a>


<a id="2301" class="Keyword">open</a> <a id="2306" class="Keyword">import</a> <a id="2313" href="Size.html" class="Module">Size</a>
<a id="2318" class="Keyword">open</a> <a id="2323" class="Keyword">import</a> <a id="2330" href="Codata.Sized.Thunk.html" class="Module">Codata.Sized.Thunk</a>
<a id="2349" class="Keyword">open</a> <a id="2354" class="Keyword">import</a> <a id="2361" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a> <a id="2375" class="Keyword">using</a> <a id="2381" class="Symbol">(</a><a id="2382" href="Data.Vec.Base.html#1111" class="Datatype">Vec</a><a id="2385" class="Symbol">;</a> <a id="2387" href="Data.Vec.Base.html#1147" class="InductiveConstructor">[]</a><a id="2389" class="Symbol">;</a> <a id="2391" href="Data.Vec.Base.html#1166" class="InductiveConstructor Operator">_∷_</a><a id="2394" class="Symbol">)</a>


<a id="2398" class="Comment">-- A `Tap C A` is a infinite source of `A`s provided that we can perform</a>
<a id="2471" class="Comment">-- the effectful computations described by `C`.</a>
<a id="2519" class="Comment">-- The first one can be accessed readily but the rest of them is hidden</a>
<a id="2591" class="Comment">-- under layers of `C` computations.</a>

<a id="2629" class="Keyword">module</a> <a id="2636" href="README.Data.Container.FreeMonad.html#2636" class="Module">_</a> <a id="2638" class="Symbol">(</a><a id="2639" href="README.Data.Container.FreeMonad.html#2639" class="Bound">C</a> <a id="2641" class="Symbol">:</a> <a id="2643" href="Data.Container.Core.html#513" class="Record">Container</a> <a id="2653" href="Level.html#521" class="Function">0ℓ</a> <a id="2656" href="Level.html#521" class="Function">0ℓ</a><a id="2658" class="Symbol">)</a> <a id="2660" class="Symbol">(</a><a id="2661" href="README.Data.Container.FreeMonad.html#2661" class="Bound">A</a> <a id="2663" class="Symbol">:</a> <a id="2665" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="2669" href="Level.html#521" class="Function">0ℓ</a><a id="2671" class="Symbol">)</a> <a id="2673" class="Keyword">where</a>

  <a id="2682" class="Keyword">data</a> <a id="2687" href="README.Data.Container.FreeMonad.html#2687" class="Datatype">Tap</a> <a id="2691" class="Symbol">(</a><a id="2692" href="README.Data.Container.FreeMonad.html#2692" class="Bound">i</a> <a id="2694" class="Symbol">:</a> <a id="2696" href="Agda.Builtin.Size.html#213" class="Postulate">Size</a><a id="2700" class="Symbol">)</a> <a id="2702" class="Symbol">:</a> <a id="2704" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="2708" href="Level.html#521" class="Function">0ℓ</a> <a id="2711" class="Keyword">where</a>
    <a id="2721" href="README.Data.Container.FreeMonad.html#2721" class="InductiveConstructor Operator">_∷_</a> <a id="2725" class="Symbol">:</a> <a id="2727" href="README.Data.Container.FreeMonad.html#2661" class="Bound">A</a> <a id="2729" class="Symbol">→</a> <a id="2731" href="Codata.Sized.Thunk.html#482" class="Record">Thunk</a> <a id="2737" class="Symbol">(λ</a> <a id="2740" href="README.Data.Container.FreeMonad.html#2740" class="Bound">i</a> <a id="2742" class="Symbol">→</a> <a id="2744" href="README.Data.Container.FreeMonad.html#2639" class="Bound">C</a> <a id="2746" href="Data.Container.FreeMonad.html#2344" class="Datatype Operator">⋆</a> <a id="2748" href="README.Data.Container.FreeMonad.html#2687" class="Datatype">Tap</a> <a id="2752" href="README.Data.Container.FreeMonad.html#2740" class="Bound">i</a><a id="2753" class="Symbol">)</a> <a id="2755" href="README.Data.Container.FreeMonad.html#2692" class="Bound">i</a> <a id="2757" class="Symbol">→</a> <a id="2759" href="README.Data.Container.FreeMonad.html#2687" class="Datatype">Tap</a> <a id="2763" href="README.Data.Container.FreeMonad.html#2692" class="Bound">i</a>

<a id="2766" class="Comment">-- We can run a given tap for a set number of steps and collect the elements</a>
<a id="2843" class="Comment">-- thus generated along the way. This gives us a `C ⋆_` computation of a vector.</a>

<a id="2925" class="Keyword">module</a> <a id="2932" href="README.Data.Container.FreeMonad.html#2932" class="Module">_</a> <a id="2934" class="Symbol">{</a><a id="2935" href="README.Data.Container.FreeMonad.html#2935" class="Bound">C</a> <a id="2937" class="Symbol">:</a> <a id="2939" href="Data.Container.Core.html#513" class="Record">Container</a> <a id="2949" href="Level.html#521" class="Function">0ℓ</a> <a id="2952" href="Level.html#521" class="Function">0ℓ</a><a id="2954" class="Symbol">}</a> <a id="2956" class="Symbol">{</a><a id="2957" href="README.Data.Container.FreeMonad.html#2957" class="Bound">A</a> <a id="2959" class="Symbol">:</a> <a id="2961" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="2965" href="Level.html#521" class="Function">0ℓ</a><a id="2967" class="Symbol">}</a> <a id="2969" class="Keyword">where</a>

  <a id="2978" href="README.Data.Container.FreeMonad.html#2978" class="Function">take</a> <a id="2983" class="Symbol">:</a> <a id="2985" href="README.Data.Container.FreeMonad.html#2687" class="Datatype">Tap</a> <a id="2989" href="README.Data.Container.FreeMonad.html#2935" class="Bound">C</a> <a id="2991" href="README.Data.Container.FreeMonad.html#2957" class="Bound">A</a> <a id="2993" class="Symbol">_</a> <a id="2995" class="Symbol">→</a> <a id="2997" class="Symbol">(</a><a id="2998" href="README.Data.Container.FreeMonad.html#2998" class="Bound">n</a> <a id="3000" class="Symbol">:</a> <a id="3002" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="3003" class="Symbol">)</a> <a id="3005" class="Symbol">→</a> <a id="3007" href="README.Data.Container.FreeMonad.html#2935" class="Bound">C</a> <a id="3009" href="Data.Container.FreeMonad.html#2344" class="Datatype Operator">⋆</a> <a id="3011" href="Data.Vec.Base.html#1111" class="Datatype">Vec</a> <a id="3015" href="README.Data.Container.FreeMonad.html#2957" class="Bound">A</a> <a id="3017" href="README.Data.Container.FreeMonad.html#2998" class="Bound">n</a>
  <a id="3021" href="README.Data.Container.FreeMonad.html#2978" class="Function">take</a> <a id="3026" class="Symbol">_</a> <a id="3028" class="Number">0</a> <a id="3030" class="Symbol">=</a> <a id="3032" href="Data.Container.FreeMonad.html#2406" class="InductiveConstructor">pure</a> <a id="3037" href="Data.Vec.Base.html#1147" class="InductiveConstructor">[]</a>
  <a id="3042" href="README.Data.Container.FreeMonad.html#2978" class="Function">take</a> <a id="3047" class="Symbol">(</a><a id="3048" href="README.Data.Container.FreeMonad.html#3048" class="Bound">x</a> <a id="3050" href="README.Data.Container.FreeMonad.html#2721" class="InductiveConstructor Operator">∷</a> <a id="3052" class="Symbol">_)</a> <a id="3055" class="Number">1</a> <a id="3057" class="Symbol">=</a> <a id="3059" href="Data.Container.FreeMonad.html#2406" class="InductiveConstructor">pure</a> <a id="3064" class="Symbol">(</a><a id="3065" href="README.Data.Container.FreeMonad.html#3048" class="Bound">x</a> <a id="3067" href="Data.Vec.Base.html#1166" class="InductiveConstructor Operator">∷</a> <a id="3069" href="Data.Vec.Base.html#1147" class="InductiveConstructor">[]</a><a id="3071" class="Symbol">)</a>
  <a id="3075" href="README.Data.Container.FreeMonad.html#2978" class="CatchallClause Function">take</a><a id="3079" class="CatchallClause"> </a><a id="3080" class="CatchallClause Symbol">(</a><a id="3081" href="README.Data.Container.FreeMonad.html#3081" class="CatchallClause Bound">x</a><a id="3082" class="CatchallClause"> </a><a id="3083" href="README.Data.Container.FreeMonad.html#2721" class="CatchallClause InductiveConstructor Operator">∷</a><a id="3084" class="CatchallClause"> </a><a id="3085" href="README.Data.Container.FreeMonad.html#3085" class="CatchallClause Bound">mxs</a><a id="3088" class="CatchallClause Symbol">)</a><a id="3089" class="CatchallClause"> </a><a id="3090" class="CatchallClause Symbol">(</a><a id="3091" href="Agda.Builtin.Nat.html#234" class="CatchallClause InductiveConstructor">suc</a><a id="3094" class="CatchallClause"> </a><a id="3095" href="README.Data.Container.FreeMonad.html#3095" class="CatchallClause Bound">n</a><a id="3096" class="CatchallClause Symbol">)</a> <a id="3098" class="Symbol">=</a> <a id="3100" class="Keyword">do</a>
    <a id="3107" href="README.Data.Container.FreeMonad.html#3107" class="Bound">xs</a> <a id="3110" href="Data.Container.FreeMonad.html#3873" class="Function Operator">←</a> <a id="3112" href="README.Data.Container.FreeMonad.html#3085" class="Bound">mxs</a> <a id="3116" class="Symbol">.</a><a id="3117" href="Codata.Sized.Thunk.html#556" class="Field">force</a>
    <a id="3127" href="README.Data.Container.FreeMonad.html#3127" class="Bound">rest</a> <a id="3132" href="Data.Container.FreeMonad.html#3873" class="Function Operator">←</a> <a id="3134" href="README.Data.Container.FreeMonad.html#2978" class="Function">take</a> <a id="3139" href="README.Data.Container.FreeMonad.html#3107" class="Bound">xs</a> <a id="3142" href="README.Data.Container.FreeMonad.html#3095" class="Bound">n</a>
    <a id="3148" href="Data.Container.FreeMonad.html#2406" class="InductiveConstructor">pure</a> <a id="3153" class="Symbol">(</a><a id="3154" href="README.Data.Container.FreeMonad.html#3081" class="Bound">x</a> <a id="3156" href="Data.Vec.Base.html#1166" class="InductiveConstructor Operator">∷</a> <a id="3158" href="README.Data.Container.FreeMonad.html#3127" class="Bound">rest</a><a id="3162" class="Symbol">)</a>

<a id="3165" class="Comment">-- A stream of all the natural numbers starting from a given value is an</a>
<a id="3238" class="Comment">-- example of a tap.</a>

<a id="natsFrom"></a><a id="3260" href="README.Data.Container.FreeMonad.html#3260" class="Function">natsFrom</a> <a id="3269" class="Symbol">:</a> <a id="3271" class="Symbol">∀</a> <a id="3273" class="Symbol">{</a><a id="3274" href="README.Data.Container.FreeMonad.html#3274" class="Bound">i</a><a id="3275" class="Symbol">}</a> <a id="3277" class="Symbol">→</a> <a id="3279" href="README.Data.Container.FreeMonad.html#1076" class="Function">State</a> <a id="3285" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3287" href="Data.Container.FreeMonad.html#2344" class="Datatype Operator">⋆</a> <a id="3289" href="README.Data.Container.FreeMonad.html#2687" class="Datatype">Tap</a> <a id="3293" class="Symbol">(</a><a id="3294" href="README.Data.Container.FreeMonad.html#1076" class="Function">State</a> <a id="3300" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="3301" class="Symbol">)</a> <a id="3303" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3305" href="README.Data.Container.FreeMonad.html#3274" class="Bound">i</a>
<a id="3307" href="README.Data.Container.FreeMonad.html#3260" class="Function">natsFrom</a> <a id="3316" class="Symbol">=</a> <a id="3318" class="Keyword">let</a> <a id="3322" class="Keyword">open</a> <a id="3327" href="Effect.Monad.html#779" class="Module">RawMonad</a> <a id="3336" href="Data.Container.FreeMonad.html#4299" class="Function">monad</a> <a id="3342" class="Keyword">using</a> <a id="3348" class="Symbol">(</a><a id="3349" href="Effect.Monad.html#1011" class="Function Operator">_&gt;&gt;_</a><a id="3353" class="Symbol">)</a> <a id="3355" class="Keyword">in</a> <a id="3358" class="Keyword">do</a>
  <a id="3363" href="README.Data.Container.FreeMonad.html#3363" class="Bound">n</a> <a id="3365" href="Data.Container.FreeMonad.html#3873" class="Function Operator">←</a> <a id="3367" href="README.Data.Container.FreeMonad.html#1193" class="Function">get</a>
  <a id="3373" href="README.Data.Container.FreeMonad.html#1249" class="Function">put</a> <a id="3377" class="Symbol">(</a><a id="3378" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="3382" href="README.Data.Container.FreeMonad.html#3363" class="Bound">n</a><a id="3383" class="Symbol">)</a>
  <a id="3387" href="Data.Container.FreeMonad.html#2406" class="InductiveConstructor">pure</a> <a id="3392" class="Symbol">(</a><a id="3393" href="README.Data.Container.FreeMonad.html#3363" class="Bound">n</a> <a id="3395" href="README.Data.Container.FreeMonad.html#2721" class="InductiveConstructor Operator">∷</a> <a id="3397" class="Symbol">λ</a> <a id="3399" class="Keyword">where</a> <a id="3405" class="Symbol">.</a><a id="3406" href="Codata.Sized.Thunk.html#556" class="Field">force</a> <a id="3412" class="Symbol">→</a> <a id="3414" href="README.Data.Container.FreeMonad.html#3260" class="Function">natsFrom</a><a id="3422" class="Symbol">)</a>

<a id="3425" class="Comment">-- We can use `take` to capture an initial segment of the `natsFrom` tap</a>
<a id="3498" class="Comment">-- and, after running the state operations, observe that it does generate</a>
<a id="3572" class="Comment">-- successive numbers.</a>

<a id="3596" href="README.Data.Container.FreeMonad.html#3596" class="Function">_</a> <a id="3598" class="Symbol">:</a> <a id="3600" class="Symbol">∀</a> <a id="3602" href="README.Data.Container.FreeMonad.html#3602" class="Bound">k</a> <a id="3604" class="Symbol">→</a>
    <a id="3610" href="README.Data.Container.FreeMonad.html#1530" class="Function">runState</a> <a id="3619" class="Symbol">(</a><a id="3620" href="README.Data.Container.FreeMonad.html#3260" class="Function">natsFrom</a> <a id="3629" href="Data.Container.FreeMonad.html#3873" class="Function Operator">&gt;&gt;=</a> <a id="3633" class="Symbol">λ</a> <a id="3635" href="README.Data.Container.FreeMonad.html#3635" class="Bound">ns</a> <a id="3638" class="Symbol">→</a> <a id="3640" href="README.Data.Container.FreeMonad.html#2978" class="Function">take</a> <a id="3645" href="README.Data.Container.FreeMonad.html#3635" class="Bound">ns</a> <a id="3648" class="Number">5</a><a id="3649" class="Symbol">)</a> <a id="3651" href="README.Data.Container.FreeMonad.html#3602" class="Bound">k</a>
  <a id="3655" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3657" class="Symbol">(</a><a id="3658" href="README.Data.Container.FreeMonad.html#3602" class="Bound">k</a> <a id="3660" class="InductiveConstructor Operator">∷</a> <a id="3662" class="Number">1</a> <a id="3664" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="3666" href="README.Data.Container.FreeMonad.html#3602" class="Bound">k</a> <a id="3668" class="InductiveConstructor Operator">∷</a> <a id="3670" class="Number">2</a> <a id="3672" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="3674" href="README.Data.Container.FreeMonad.html#3602" class="Bound">k</a> <a id="3676" class="InductiveConstructor Operator">∷</a> <a id="3678" class="Number">3</a> <a id="3680" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="3682" href="README.Data.Container.FreeMonad.html#3602" class="Bound">k</a> <a id="3684" class="InductiveConstructor Operator">∷</a> <a id="3686" class="Number">4</a> <a id="3688" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="3690" href="README.Data.Container.FreeMonad.html#3602" class="Bound">k</a> <a id="3692" class="InductiveConstructor Operator">∷</a> <a id="3694" href="Data.Vec.Base.html#1147" class="InductiveConstructor">[]</a> <a id="3697" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3699" class="Number">5</a> <a id="3701" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="3703" href="README.Data.Container.FreeMonad.html#3602" class="Bound">k</a><a id="3704" class="Symbol">)</a>
<a id="3706" class="Symbol">_</a> <a id="3708" class="Symbol">=</a> <a id="3710" class="Symbol">λ</a> <a id="3712" href="README.Data.Container.FreeMonad.html#3712" class="Bound">k</a> <a id="3714" class="Symbol">→</a> <a id="3716" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre></body></html>