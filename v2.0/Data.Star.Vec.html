<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Star.Vec</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Vectors defined in terms of the reflexive-transitive closure, Star</a>
<a id="176" class="Comment">------------------------------------------------------------------------</a>

<a id="250" class="Symbol">{-#</a> <a id="254" class="Keyword">OPTIONS</a> <a id="262" class="Pragma">--with-K</a> <a id="271" class="Pragma">--safe</a> <a id="278" class="Symbol">#-}</a>

<a id="283" class="Keyword">module</a> <a id="290" href="Data.Star.Vec.html" class="Module">Data.Star.Vec</a> <a id="304" class="Keyword">where</a>

<a id="311" class="Keyword">open</a> <a id="316" class="Keyword">import</a> <a id="323" href="Data.Star.Nat.html" class="Module">Data.Star.Nat</a>
<a id="337" class="Keyword">open</a> <a id="342" class="Keyword">import</a> <a id="349" href="Data.Star.Fin.html" class="Module">Data.Star.Fin</a> <a id="363" class="Keyword">using</a> <a id="369" class="Symbol">(</a><a id="370" href="Data.Star.Fin.html#466" class="Function">Fin</a><a id="373" class="Symbol">)</a>
<a id="375" class="Keyword">open</a> <a id="380" class="Keyword">import</a> <a id="387" href="Data.Star.Decoration.html" class="Module">Data.Star.Decoration</a>
<a id="408" class="Keyword">open</a> <a id="413" class="Keyword">import</a> <a id="420" href="Data.Star.Pointer.html" class="Module">Data.Star.Pointer</a> <a id="438" class="Symbol">as</a> <a id="441" class="Module">Pointer</a> <a id="449" class="Keyword">hiding</a> <a id="456" class="Symbol">(</a><a id="457" href="Data.Star.Pointer.html#2307" class="Function">lookup</a><a id="463" class="Symbol">)</a>
<a id="465" class="Keyword">open</a> <a id="470" class="Keyword">import</a> <a id="477" href="Data.Star.List.html" class="Module">Data.Star.List</a> <a id="492" class="Keyword">using</a> <a id="498" class="Symbol">(</a><a id="499" href="Data.Star.List.html#569" class="Function">List</a><a id="503" class="Symbol">)</a>
<a id="505" class="Keyword">open</a> <a id="510" class="Keyword">import</a> <a id="517" href="Level.html" class="Module">Level</a> <a id="523" class="Keyword">using</a> <a id="529" class="Symbol">(</a><a id="530" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="535" class="Symbol">)</a>
<a id="537" class="Keyword">open</a> <a id="542" class="Keyword">import</a> <a id="549" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html" class="Module">Relation.Binary.Construct.Closure.ReflexiveTransitive</a>
<a id="603" class="Keyword">open</a> <a id="608" class="Keyword">import</a> <a id="615" href="Function.Base.html" class="Module">Function.Base</a>
<a id="629" class="Keyword">open</a> <a id="634" class="Keyword">import</a> <a id="641" href="Data.Unit.html" class="Module">Data.Unit</a>

<a id="652" class="Keyword">private</a>
  <a id="662" class="Keyword">variable</a>
    <a id="675" href="Data.Star.Vec.html#675" class="Generalizable">a</a> <a id="677" class="Symbol">:</a> <a id="679" href="Agda.Primitive.html#742" class="Postulate">Level</a>
    <a id="689" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="691" class="Symbol">:</a> <a id="693" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="697" href="Data.Star.Vec.html#675" class="Generalizable">a</a>

<a id="700" class="Comment">-- The vector type. Vectors are natural numbers decorated with extra</a>
<a id="769" class="Comment">-- information (i.e. elements).</a>

<a id="Vec"></a><a id="802" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="806" class="Symbol">:</a> <a id="808" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="812" href="Data.Star.Vec.html#675" class="Generalizable">a</a> <a id="814" class="Symbol">→</a> <a id="816" href="Data.Star.Nat.html#580" class="Function">ℕ</a> <a id="818" class="Symbol">→</a> <a id="820" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="824" href="Data.Star.Vec.html#675" class="Generalizable">a</a>
<a id="826" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="830" href="Data.Star.Vec.html#830" class="Bound">A</a> <a id="832" class="Symbol">=</a> <a id="834" href="Data.Star.Decoration.html#1654" class="Function">All</a> <a id="838" class="Symbol">(λ</a> <a id="841" href="Data.Star.Vec.html#841" class="Bound">_</a> <a id="843" class="Symbol">→</a> <a id="845" href="Data.Star.Vec.html#830" class="Bound">A</a><a id="846" class="Symbol">)</a>

<a id="849" class="Comment">-- Nil and cons.</a>

<a id="[]"></a><a id="867" href="Data.Star.Vec.html#867" class="Function">[]</a> <a id="870" class="Symbol">:</a> <a id="872" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="876" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="878" href="Data.Star.Nat.html#635" class="Function">zero</a>
<a id="883" href="Data.Star.Vec.html#867" class="Function">[]</a> <a id="886" class="Symbol">=</a> <a id="888" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#686" class="InductiveConstructor">ε</a>

<a id="891" class="Keyword">infixr</a> <a id="898" class="Number">5</a> <a id="900" href="Data.Star.Vec.html#905" class="Function Operator">_∷_</a>

<a id="_∷_"></a><a id="905" href="Data.Star.Vec.html#905" class="Function Operator">_∷_</a> <a id="909" class="Symbol">:</a> <a id="911" class="Symbol">∀</a> <a id="913" class="Symbol">{</a><a id="914" href="Data.Star.Vec.html#914" class="Bound">n</a><a id="915" class="Symbol">}</a> <a id="917" class="Symbol">→</a> <a id="919" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="921" class="Symbol">→</a> <a id="923" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="927" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="929" href="Data.Star.Vec.html#914" class="Bound">n</a> <a id="931" class="Symbol">→</a> <a id="933" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="937" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="939" class="Symbol">(</a><a id="940" href="Data.Star.Nat.html#654" class="Function">suc</a> <a id="944" href="Data.Star.Vec.html#914" class="Bound">n</a><a id="945" class="Symbol">)</a>
<a id="947" href="Data.Star.Vec.html#947" class="Bound">x</a> <a id="949" href="Data.Star.Vec.html#905" class="Function Operator">∷</a> <a id="951" href="Data.Star.Vec.html#951" class="Bound">xs</a> <a id="954" class="Symbol">=</a> <a id="956" href="Data.Star.Decoration.html#1142" class="InductiveConstructor">↦</a> <a id="958" href="Data.Star.Vec.html#947" class="Bound">x</a> <a id="960" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#713" class="InductiveConstructor Operator">◅</a> <a id="962" href="Data.Star.Vec.html#951" class="Bound">xs</a>

<a id="966" class="Comment">-- Projections.</a>

<a id="head"></a><a id="983" href="Data.Star.Vec.html#983" class="Function">head</a> <a id="988" class="Symbol">:</a> <a id="990" class="Symbol">∀</a> <a id="992" class="Symbol">{</a><a id="993" href="Data.Star.Vec.html#993" class="Bound">n</a><a id="994" class="Symbol">}</a> <a id="996" class="Symbol">→</a> <a id="998" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="1002" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="1004" class="Symbol">(</a><a id="1005" href="Data.Star.Nat.html#1041" class="Function">1#</a> <a id="1008" href="Data.Star.Nat.html#858" class="Function Operator">+</a> <a id="1010" href="Data.Star.Vec.html#993" class="Bound">n</a><a id="1011" class="Symbol">)</a> <a id="1013" class="Symbol">→</a> <a id="1015" href="Data.Star.Vec.html#689" class="Generalizable">A</a>
<a id="1017" href="Data.Star.Vec.html#983" class="Function">head</a> <a id="1022" class="Symbol">(</a><a id="1023" href="Data.Star.Decoration.html#1142" class="InductiveConstructor">↦</a> <a id="1025" href="Data.Star.Vec.html#1025" class="Bound">x</a> <a id="1027" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#713" class="InductiveConstructor Operator">◅</a> <a id="1029" class="Symbol">_)</a> <a id="1032" class="Symbol">=</a> <a id="1034" href="Data.Star.Vec.html#1025" class="Bound">x</a>

<a id="tail"></a><a id="1037" href="Data.Star.Vec.html#1037" class="Function">tail</a> <a id="1042" class="Symbol">:</a> <a id="1044" class="Symbol">∀</a> <a id="1046" class="Symbol">{</a><a id="1047" href="Data.Star.Vec.html#1047" class="Bound">n</a><a id="1048" class="Symbol">}</a> <a id="1050" class="Symbol">→</a> <a id="1052" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="1056" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="1058" class="Symbol">(</a><a id="1059" href="Data.Star.Nat.html#1041" class="Function">1#</a> <a id="1062" href="Data.Star.Nat.html#858" class="Function Operator">+</a> <a id="1064" href="Data.Star.Vec.html#1047" class="Bound">n</a><a id="1065" class="Symbol">)</a> <a id="1067" class="Symbol">→</a> <a id="1069" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="1073" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="1075" href="Data.Star.Vec.html#1047" class="Bound">n</a>
<a id="1077" href="Data.Star.Vec.html#1037" class="Function">tail</a> <a id="1082" class="Symbol">(</a><a id="1083" href="Data.Star.Decoration.html#1142" class="InductiveConstructor">↦</a> <a id="1085" class="Symbol">_</a> <a id="1087" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#713" class="InductiveConstructor Operator">◅</a> <a id="1089" href="Data.Star.Vec.html#1089" class="Bound">xs</a><a id="1091" class="Symbol">)</a> <a id="1093" class="Symbol">=</a> <a id="1095" href="Data.Star.Vec.html#1089" class="Bound">xs</a>

<a id="1099" class="Comment">-- Append.</a>

<a id="1111" class="Keyword">infixr</a> <a id="1118" class="Number">5</a> <a id="1120" href="Data.Star.Vec.html#1126" class="Function Operator">_++_</a>

<a id="_++_"></a><a id="1126" href="Data.Star.Vec.html#1126" class="Function Operator">_++_</a> <a id="1131" class="Symbol">:</a> <a id="1133" class="Symbol">∀</a> <a id="1135" class="Symbol">{</a><a id="1136" href="Data.Star.Vec.html#1136" class="Bound">m</a> <a id="1138" href="Data.Star.Vec.html#1138" class="Bound">n</a><a id="1139" class="Symbol">}</a> <a id="1141" class="Symbol">→</a> <a id="1143" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="1147" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="1149" href="Data.Star.Vec.html#1136" class="Bound">m</a> <a id="1151" class="Symbol">→</a> <a id="1153" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="1157" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="1159" href="Data.Star.Vec.html#1138" class="Bound">n</a> <a id="1161" class="Symbol">→</a> <a id="1163" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="1167" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="1169" class="Symbol">(</a><a id="1170" href="Data.Star.Vec.html#1136" class="Bound">m</a> <a id="1172" href="Data.Star.Nat.html#858" class="Function Operator">+</a> <a id="1174" href="Data.Star.Vec.html#1138" class="Bound">n</a><a id="1175" class="Symbol">)</a>
<a id="1177" href="Data.Star.Vec.html#1126" class="Function Operator">_++_</a> <a id="1182" class="Symbol">=</a> <a id="1184" href="Data.Star.Decoration.html#3071" class="Function Operator">_◅◅◅_</a>

<a id="1191" class="Comment">-- Safe lookup.</a>

<a id="lookup"></a><a id="1208" href="Data.Star.Vec.html#1208" class="Function">lookup</a> <a id="1215" class="Symbol">:</a> <a id="1217" class="Symbol">∀</a> <a id="1219" class="Symbol">{</a><a id="1220" href="Data.Star.Vec.html#1220" class="Bound">n</a><a id="1221" class="Symbol">}</a> <a id="1223" class="Symbol">→</a> <a id="1225" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="1229" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="1231" href="Data.Star.Vec.html#1220" class="Bound">n</a> <a id="1233" class="Symbol">→</a> <a id="1235" href="Data.Star.Fin.html#466" class="Function">Fin</a> <a id="1239" href="Data.Star.Vec.html#1220" class="Bound">n</a> <a id="1241" class="Symbol">→</a> <a id="1243" href="Data.Star.Vec.html#689" class="Generalizable">A</a>
<a id="1245" href="Data.Star.Vec.html#1208" class="Function">lookup</a> <a id="1252" href="Data.Star.Vec.html#1252" class="Bound">xs</a> <a id="1255" href="Data.Star.Vec.html#1255" class="Bound">i</a> <a id="1257" class="Keyword">with</a> <a id="1262" href="Data.Star.Pointer.html#2307" class="Function">Pointer.lookup</a> <a id="1277" href="Data.Star.Vec.html#1252" class="Bound">xs</a> <a id="1280" href="Data.Star.Vec.html#1255" class="Bound">i</a>
<a id="1282" class="Symbol">...</a> <a id="1286" class="Symbol">|</a> <a id="1288" href="Data.Star.Pointer.html#2042" class="InductiveConstructor">result</a> <a id="1295" class="Symbol">_</a> <a id="1297" href="Data.Star.Vec.html#1297" class="Bound">x</a> <a id="1299" class="Symbol">=</a> <a id="1301" href="Data.Star.Vec.html#1297" class="Bound">x</a>

<a id="1304" class="Comment">------------------------------------------------------------------------</a>
<a id="1377" class="Comment">-- Conversions</a>

<a id="fromList"></a><a id="1393" href="Data.Star.Vec.html#1393" class="Function">fromList</a> <a id="1402" class="Symbol">:</a> <a id="1404" class="Symbol">(</a><a id="1405" href="Data.Star.Vec.html#1405" class="Bound">xs</a> <a id="1408" class="Symbol">:</a> <a id="1410" href="Data.Star.List.html#569" class="Function">List</a> <a id="1415" href="Data.Star.Vec.html#689" class="Generalizable">A</a><a id="1416" class="Symbol">)</a> <a id="1418" class="Symbol">→</a> <a id="1420" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="1424" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="1426" class="Symbol">(</a><a id="1427" href="Data.Star.Nat.html#710" class="Function">length</a> <a id="1434" href="Data.Star.Vec.html#1405" class="Bound">xs</a><a id="1436" class="Symbol">)</a>
<a id="1438" href="Data.Star.Vec.html#1393" class="Function">fromList</a> <a id="1447" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#686" class="InductiveConstructor">ε</a>        <a id="1456" class="Symbol">=</a> <a id="1458" href="Data.Star.Vec.html#867" class="Function">[]</a>
<a id="1461" href="Data.Star.Vec.html#1393" class="Function">fromList</a> <a id="1470" class="Symbol">(</a><a id="1471" href="Data.Star.Vec.html#1471" class="Bound">x</a> <a id="1473" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#713" class="InductiveConstructor Operator">◅</a> <a id="1475" href="Data.Star.Vec.html#1475" class="Bound">xs</a><a id="1477" class="Symbol">)</a> <a id="1479" class="Symbol">=</a> <a id="1481" href="Data.Star.Vec.html#1471" class="Bound">x</a> <a id="1483" href="Data.Star.Vec.html#905" class="Function Operator">∷</a> <a id="1485" href="Data.Star.Vec.html#1393" class="Function">fromList</a> <a id="1494" href="Data.Star.Vec.html#1475" class="Bound">xs</a>

<a id="toList"></a><a id="1498" href="Data.Star.Vec.html#1498" class="Function">toList</a> <a id="1505" class="Symbol">:</a> <a id="1507" class="Symbol">∀</a> <a id="1509" class="Symbol">{</a><a id="1510" href="Data.Star.Vec.html#1510" class="Bound">n</a><a id="1511" class="Symbol">}</a> <a id="1513" class="Symbol">→</a> <a id="1515" href="Data.Star.Vec.html#802" class="Function">Vec</a> <a id="1519" href="Data.Star.Vec.html#689" class="Generalizable">A</a> <a id="1521" href="Data.Star.Vec.html#1510" class="Bound">n</a> <a id="1523" class="Symbol">→</a> <a id="1525" href="Data.Star.List.html#569" class="Function">List</a> <a id="1530" href="Data.Star.Vec.html#689" class="Generalizable">A</a>
<a id="1532" href="Data.Star.Vec.html#1498" class="Function">toList</a> <a id="1539" class="Symbol">=</a> <a id="1541" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1665" class="Function">gmap</a> <a id="1546" class="Symbol">(</a><a id="1547" href="Function.Base.html#725" class="Function">const</a> <a id="1553" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a><a id="1555" class="Symbol">)</a> <a id="1557" href="Data.Star.Decoration.html#1429" class="Function">decoration</a>
</pre></body></html>