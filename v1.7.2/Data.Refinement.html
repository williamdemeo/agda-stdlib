<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Refinement</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Refinement type: a value together with an erased proof.</a>
<a id="165" class="Comment">------------------------------------------------------------------------</a>

<a id="239" class="Symbol">{-#</a> <a id="243" class="Keyword">OPTIONS</a> <a id="251" class="Pragma">--cubical-compatible</a> <a id="272" class="Pragma">--safe</a> <a id="279" class="Symbol">#-}</a>

<a id="284" class="Keyword">module</a> <a id="291" href="Data.Refinement.html" class="Module">Data.Refinement</a> <a id="307" class="Keyword">where</a>

<a id="314" class="Keyword">open</a> <a id="319" class="Keyword">import</a> <a id="326" href="Level.html" class="Module">Level</a>
<a id="332" class="Keyword">open</a> <a id="337" class="Keyword">import</a> <a id="344" href="Data.Erased.html" class="Module">Data.Erased</a> <a id="356" class="Symbol">as</a> <a id="359" class="Module">Erased</a> <a id="366" class="Keyword">using</a> <a id="372" class="Symbol">(</a><a id="373" href="Data.Erased.html#659" class="Record">Erased</a><a id="379" class="Symbol">)</a>
<a id="381" class="Keyword">open</a> <a id="386" class="Keyword">import</a> <a id="393" href="Function.Base.html" class="Module">Function.Base</a>
<a id="407" class="Keyword">open</a> <a id="412" class="Keyword">import</a> <a id="419" href="Relation.Unary.html" class="Module">Relation.Unary</a>

<a id="435" class="Keyword">private</a>
  <a id="445" class="Keyword">variable</a>
    <a id="458" href="Data.Refinement.html#458" class="Generalizable">a</a> <a id="460" href="Data.Refinement.html#460" class="Generalizable">b</a> <a id="462" href="Data.Refinement.html#462" class="Generalizable">p</a> <a id="464" href="Data.Refinement.html#464" class="Generalizable">q</a> <a id="466" class="Symbol">:</a> <a id="468" href="Agda.Primitive.html#591" class="Postulate">Level</a>
    <a id="478" href="Data.Refinement.html#478" class="Generalizable">A</a> <a id="480" class="Symbol">:</a> <a id="482" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="486" href="Data.Refinement.html#458" class="Generalizable">a</a>
    <a id="492" href="Data.Refinement.html#492" class="Generalizable">B</a> <a id="494" class="Symbol">:</a> <a id="496" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="500" href="Data.Refinement.html#460" class="Generalizable">b</a>

<a id="503" class="Keyword">record</a> <a id="Refinement"></a><a id="510" href="Data.Refinement.html#510" class="Record">Refinement</a> <a id="521" class="Symbol">{</a><a id="522" href="Data.Refinement.html#522" class="Bound">a</a> <a id="524" href="Data.Refinement.html#524" class="Bound">p</a><a id="525" class="Symbol">}</a> <a id="527" class="Symbol">(</a><a id="528" href="Data.Refinement.html#528" class="Bound">A</a> <a id="530" class="Symbol">:</a> <a id="532" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="536" href="Data.Refinement.html#522" class="Bound">a</a><a id="537" class="Symbol">)</a> <a id="539" class="Symbol">(</a><a id="540" href="Data.Refinement.html#540" class="Bound">P</a> <a id="542" class="Symbol">:</a> <a id="544" href="Data.Refinement.html#528" class="Bound">A</a> <a id="546" class="Symbol">→</a> <a id="548" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="552" href="Data.Refinement.html#524" class="Bound">p</a><a id="553" class="Symbol">)</a> <a id="555" class="Symbol">:</a> <a id="557" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="561" class="Symbol">(</a><a id="562" href="Data.Refinement.html#522" class="Bound">a</a> <a id="564" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="566" href="Data.Refinement.html#524" class="Bound">p</a><a id="567" class="Symbol">)</a> <a id="569" class="Keyword">where</a>
  <a id="577" class="Keyword">constructor</a> <a id="_,_"></a><a id="589" href="Data.Refinement.html#589" class="InductiveConstructor Operator">_,_</a>
  <a id="595" class="Keyword">field</a> <a id="Refinement.value"></a><a id="601" href="Data.Refinement.html#601" class="Field">value</a> <a id="607" class="Symbol">:</a> <a id="609" href="Data.Refinement.html#528" class="Bound">A</a>
        <a id="Refinement.proof"></a><a id="619" href="Data.Refinement.html#619" class="Field">proof</a> <a id="625" class="Symbol">:</a> <a id="627" href="Data.Erased.html#659" class="Record">Erased</a> <a id="634" class="Symbol">(</a><a id="635" href="Data.Refinement.html#540" class="Bound">P</a> <a id="637" href="Data.Refinement.html#601" class="Field">value</a><a id="642" class="Symbol">)</a>
<a id="644" class="Keyword">open</a> <a id="649" href="Data.Refinement.html#510" class="Module">Refinement</a> <a id="660" class="Keyword">public</a>

<a id="668" class="Comment">-- The syntax declaration below is meant to mimick set comprehension.</a>
<a id="738" class="Comment">-- It is attached to Refinement-syntax, to make it easy to import</a>
<a id="804" class="Comment">-- Data.Refinement without the special syntax.</a>

<a id="852" class="Keyword">infix</a> <a id="858" class="Number">2</a> <a id="860" href="Data.Refinement.html#878" class="Function">Refinement-syntax</a>
<a id="Refinement-syntax"></a><a id="878" href="Data.Refinement.html#878" class="Function">Refinement-syntax</a> <a id="896" class="Symbol">=</a> <a id="898" href="Data.Refinement.html#510" class="Record">Refinement</a>
<a id="909" class="Keyword">syntax</a> <a id="916" href="Data.Refinement.html#878" class="Function">Refinement-syntax</a> <a id="934" class="Bound">A</a> <a id="936" class="Symbol">(λ</a> <a id="939" class="Bound">x</a> <a id="941" class="Symbol">→</a> <a id="943" class="Bound">P</a><a id="944" class="Symbol">)</a> <a id="946" class="Symbol">=</a> <a id="948" class="Function">[</a> <a id="950" class="Bound">x</a> <a id="952" class="Function">∈</a> <a id="954" class="Bound">A</a> <a id="956" class="Function">∣</a> <a id="958" class="Bound">P</a> <a id="960" class="Function">]</a>

<a id="963" class="Keyword">module</a> <a id="970" href="Data.Refinement.html#970" class="Module">_</a> <a id="972" class="Symbol">{</a><a id="973" href="Data.Refinement.html#973" class="Bound">P</a> <a id="975" class="Symbol">:</a> <a id="977" href="Data.Refinement.html#478" class="Generalizable">A</a> <a id="979" class="Symbol">→</a> <a id="981" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="985" href="Data.Refinement.html#462" class="Generalizable">p</a><a id="986" class="Symbol">}</a> <a id="988" class="Symbol">{</a><a id="989" href="Data.Refinement.html#989" class="Bound">Q</a> <a id="991" class="Symbol">:</a> <a id="993" href="Data.Refinement.html#492" class="Generalizable">B</a> <a id="995" class="Symbol">→</a> <a id="997" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1001" href="Data.Refinement.html#464" class="Generalizable">q</a><a id="1002" class="Symbol">}</a> <a id="1004" class="Keyword">where</a>

  <a id="1013" href="Data.Refinement.html#1013" class="Function">map</a> <a id="1017" class="Symbol">:</a> <a id="1019" class="Symbol">(</a><a id="1020" href="Data.Refinement.html#1020" class="Bound">f</a> <a id="1022" class="Symbol">:</a> <a id="1024" href="Data.Refinement.html#977" class="Bound">A</a> <a id="1026" class="Symbol">→</a> <a id="1028" href="Data.Refinement.html#993" class="Bound">B</a><a id="1029" class="Symbol">)</a> <a id="1031" class="Symbol">→</a> <a id="1033" href="Relation.Unary.html#3368" class="Function">∀[</a> <a id="1036" href="Data.Refinement.html#973" class="Bound">P</a> <a id="1038" href="Relation.Unary.html#4347" class="Function Operator">⇒</a> <a id="1040" href="Data.Refinement.html#1020" class="Bound">f</a> <a id="1042" href="Relation.Unary.html#5008" class="Function Operator">⊢</a> <a id="1044" href="Data.Refinement.html#989" class="Bound">Q</a> <a id="1046" href="Relation.Unary.html#3368" class="Function">]</a> <a id="1048" class="Symbol">→</a>
        <a id="1058" href="Data.Refinement.html#878" class="Function">[</a> <a id="1060" href="Data.Refinement.html#1060" class="Bound">a</a> <a id="1062" href="Data.Refinement.html#878" class="Function">∈</a> <a id="1064" href="Data.Refinement.html#977" class="Bound">A</a> <a id="1066" href="Data.Refinement.html#878" class="Function">∣</a> <a id="1068" href="Data.Refinement.html#973" class="Bound">P</a> <a id="1070" href="Data.Refinement.html#1060" class="Bound">a</a> <a id="1072" href="Data.Refinement.html#878" class="Function">]</a> <a id="1074" class="Symbol">→</a> <a id="1076" href="Data.Refinement.html#878" class="Function">[</a> <a id="1078" href="Data.Refinement.html#1078" class="Bound">b</a> <a id="1080" href="Data.Refinement.html#878" class="Function">∈</a> <a id="1082" href="Data.Refinement.html#993" class="Bound">B</a> <a id="1084" href="Data.Refinement.html#878" class="Function">∣</a> <a id="1086" href="Data.Refinement.html#989" class="Bound">Q</a> <a id="1088" href="Data.Refinement.html#1078" class="Bound">b</a> <a id="1090" href="Data.Refinement.html#878" class="Function">]</a>
  <a id="1094" href="Data.Refinement.html#1013" class="Function">map</a> <a id="1098" href="Data.Refinement.html#1098" class="Bound">f</a> <a id="1100" href="Data.Refinement.html#1100" class="Bound">prf</a> <a id="1104" class="Symbol">(</a><a id="1105" href="Data.Refinement.html#1105" class="Bound">a</a> <a id="1107" href="Data.Refinement.html#589" class="InductiveConstructor Operator">,</a> <a id="1109" href="Data.Refinement.html#1109" class="Bound">p</a><a id="1110" class="Symbol">)</a> <a id="1112" class="Symbol">=</a> <a id="1114" href="Data.Refinement.html#1098" class="Bound">f</a> <a id="1116" href="Data.Refinement.html#1105" class="Bound">a</a> <a id="1118" href="Data.Refinement.html#589" class="InductiveConstructor Operator">,</a> <a id="1120" href="Data.Erased.html#885" class="Function">Erased.map</a> <a id="1131" href="Data.Refinement.html#1100" class="Bound">prf</a> <a id="1135" href="Data.Refinement.html#1109" class="Bound">p</a>

<a id="1138" class="Keyword">module</a> <a id="1145" href="Data.Refinement.html#1145" class="Module">_</a> <a id="1147" class="Symbol">{</a><a id="1148" href="Data.Refinement.html#1148" class="Bound">P</a> <a id="1150" class="Symbol">:</a> <a id="1152" href="Data.Refinement.html#478" class="Generalizable">A</a> <a id="1154" class="Symbol">→</a> <a id="1156" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1160" href="Data.Refinement.html#462" class="Generalizable">p</a><a id="1161" class="Symbol">}</a> <a id="1163" class="Symbol">{</a><a id="1164" href="Data.Refinement.html#1164" class="Bound">Q</a> <a id="1166" class="Symbol">:</a> <a id="1168" href="Data.Refinement.html#478" class="Generalizable">A</a> <a id="1170" class="Symbol">→</a> <a id="1172" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1176" href="Data.Refinement.html#464" class="Generalizable">q</a><a id="1177" class="Symbol">}</a> <a id="1179" class="Keyword">where</a>

  <a id="1188" href="Data.Refinement.html#1188" class="Function">refine</a> <a id="1195" class="Symbol">:</a> <a id="1197" href="Relation.Unary.html#3368" class="Function">∀[</a> <a id="1200" href="Data.Refinement.html#1148" class="Bound">P</a> <a id="1202" href="Relation.Unary.html#4347" class="Function Operator">⇒</a> <a id="1204" href="Data.Refinement.html#1164" class="Bound">Q</a> <a id="1206" href="Relation.Unary.html#3368" class="Function">]</a> <a id="1208" class="Symbol">→</a> <a id="1210" href="Data.Refinement.html#878" class="Function">[</a> <a id="1212" href="Data.Refinement.html#1212" class="Bound">a</a> <a id="1214" href="Data.Refinement.html#878" class="Function">∈</a> <a id="1216" href="Data.Refinement.html#1152" class="Bound">A</a> <a id="1218" href="Data.Refinement.html#878" class="Function">∣</a> <a id="1220" href="Data.Refinement.html#1148" class="Bound">P</a> <a id="1222" href="Data.Refinement.html#1212" class="Bound">a</a> <a id="1224" href="Data.Refinement.html#878" class="Function">]</a> <a id="1226" class="Symbol">→</a> <a id="1228" href="Data.Refinement.html#878" class="Function">[</a> <a id="1230" href="Data.Refinement.html#1230" class="Bound">a</a> <a id="1232" href="Data.Refinement.html#878" class="Function">∈</a> <a id="1234" href="Data.Refinement.html#1152" class="Bound">A</a> <a id="1236" href="Data.Refinement.html#878" class="Function">∣</a> <a id="1238" href="Data.Refinement.html#1164" class="Bound">Q</a> <a id="1240" href="Data.Refinement.html#1230" class="Bound">a</a> <a id="1242" href="Data.Refinement.html#878" class="Function">]</a>
  <a id="1246" href="Data.Refinement.html#1188" class="Function">refine</a> <a id="1253" class="Symbol">=</a> <a id="1255" href="Data.Refinement.html#1013" class="Function">map</a> <a id="1259" href="Function.Base.html#624" class="Function">id</a>
</pre></body></html>