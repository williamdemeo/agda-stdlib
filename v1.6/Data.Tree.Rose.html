<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Tree.Rose</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Rose trees</a>
<a id="120" class="Comment">------------------------------------------------------------------------</a>

<a id="194" class="Symbol">{-#</a> <a id="198" class="Keyword">OPTIONS</a> <a id="206" class="Pragma">--without-K</a> <a id="218" class="Pragma">--safe</a> <a id="225" class="Pragma">--sized-types</a> <a id="239" class="Symbol">#-}</a>

<a id="244" class="Keyword">module</a> <a id="251" href="Data.Tree.Rose.html" class="Module">Data.Tree.Rose</a> <a id="266" class="Keyword">where</a>

<a id="273" class="Keyword">open</a> <a id="278" class="Keyword">import</a> <a id="285" href="Level.html" class="Module">Level</a> <a id="291" class="Keyword">using</a> <a id="297" class="Symbol">(</a><a id="298" href="Agda.Primitive.html#423" class="Postulate">Level</a><a id="303" class="Symbol">)</a>
<a id="305" class="Keyword">open</a> <a id="310" class="Keyword">import</a> <a id="317" href="Size.html" class="Module">Size</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="349" class="Symbol">as</a> <a id="352" class="Module">List</a> <a id="357" class="Keyword">using</a> <a id="363" class="Symbol">(</a><a id="364" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="368" class="Symbol">;</a> <a id="370" href="Data.List.Base.html#10383" class="InductiveConstructor">[]</a><a id="372" class="Symbol">;</a> <a id="374" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="377" class="Symbol">)</a>
<a id="379" class="Keyword">open</a> <a id="384" class="Keyword">import</a> <a id="391" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="405" class="Symbol">as</a> <a id="408" class="Module">ℕ</a> <a id="410" class="Keyword">using</a> <a id="416" class="Symbol">(</a><a id="417" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="418" class="Symbol">;</a> <a id="420" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="424" class="Symbol">;</a> <a id="426" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="429" class="Symbol">)</a>
<a id="431" class="Keyword">open</a> <a id="436" class="Keyword">import</a> <a id="443" href="Data.List.Extrema.Nat.html" class="Module">Data.List.Extrema.Nat</a>
<a id="465" class="Keyword">import</a> <a id="472" href="Data.Tree.Binary.html" class="Module">Data.Tree.Binary</a> <a id="489" class="Symbol">as</a> <a id="492" class="Module">Bin</a>
<a id="496" class="Keyword">open</a> <a id="501" class="Keyword">import</a> <a id="508" href="Function.Base.html" class="Module">Function.Base</a> <a id="522" class="Keyword">using</a> <a id="528" class="Symbol">(</a><a id="529" href="Function.Base.html#1031" class="Function Operator">_∘_</a><a id="532" class="Symbol">)</a>

<a id="535" class="Keyword">private</a>
  <a id="545" class="Keyword">variable</a>
    <a id="558" href="Data.Tree.Rose.html#558" class="Generalizable">a</a> <a id="560" class="Symbol">:</a> <a id="562" href="Agda.Primitive.html#423" class="Postulate">Level</a>
    <a id="572" href="Data.Tree.Rose.html#572" class="Generalizable">A</a> <a id="574" href="Data.Tree.Rose.html#574" class="Generalizable">B</a> <a id="576" href="Data.Tree.Rose.html#576" class="Generalizable">C</a> <a id="578" class="Symbol">:</a> <a id="580" class="PrimitiveType">Set</a> <a id="584" href="Data.Tree.Rose.html#558" class="Generalizable">a</a>
    <a id="590" href="Data.Tree.Rose.html#590" class="Generalizable">i</a> <a id="592" class="Symbol">:</a> <a id="594" href="Agda.Builtin.Size.html#206" class="Postulate">Size</a>

<a id="600" class="Comment">------------------------------------------------------------------------</a>
<a id="673" class="Comment">-- Type and basic constructions</a>

<a id="706" class="Keyword">data</a> <a id="Rose"></a><a id="711" href="Data.Tree.Rose.html#711" class="Datatype">Rose</a> <a id="716" class="Symbol">(</a><a id="717" href="Data.Tree.Rose.html#717" class="Bound">A</a> <a id="719" class="Symbol">:</a> <a id="721" class="PrimitiveType">Set</a> <a id="725" href="Data.Tree.Rose.html#558" class="Generalizable">a</a><a id="726" class="Symbol">)</a> <a id="728" class="Symbol">:</a> <a id="730" href="Agda.Builtin.Size.html#206" class="Postulate">Size</a> <a id="735" class="Symbol">→</a> <a id="737" class="PrimitiveType">Set</a> <a id="741" href="Data.Tree.Rose.html#725" class="Bound">a</a> <a id="743" class="Keyword">where</a>
  <a id="Rose.node"></a><a id="751" href="Data.Tree.Rose.html#751" class="InductiveConstructor">node</a> <a id="756" class="Symbol">:</a> <a id="758" class="Symbol">(</a><a id="759" href="Data.Tree.Rose.html#759" class="Bound">a</a> <a id="761" class="Symbol">:</a> <a id="763" href="Data.Tree.Rose.html#717" class="Bound">A</a><a id="764" class="Symbol">)</a> <a id="766" class="Symbol">(</a><a id="767" href="Data.Tree.Rose.html#767" class="Bound">ts</a> <a id="770" class="Symbol">:</a> <a id="772" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="777" class="Symbol">(</a><a id="778" href="Data.Tree.Rose.html#711" class="Datatype">Rose</a> <a id="783" href="Data.Tree.Rose.html#717" class="Bound">A</a> <a id="785" href="Data.Tree.Rose.html#590" class="Generalizable">i</a><a id="786" class="Symbol">))</a> <a id="789" class="Symbol">→</a> <a id="791" href="Data.Tree.Rose.html#711" class="Datatype">Rose</a> <a id="796" href="Data.Tree.Rose.html#717" class="Bound">A</a> <a id="798" class="Symbol">(</a><a id="799" href="Agda.Builtin.Size.html#270" class="Postulate Operator">↑</a> <a id="801" href="Data.Tree.Rose.html#590" class="Generalizable">i</a><a id="802" class="Symbol">)</a>

<a id="leaf"></a><a id="805" href="Data.Tree.Rose.html#805" class="Function">leaf</a> <a id="810" class="Symbol">:</a> <a id="812" href="Data.Tree.Rose.html#572" class="Generalizable">A</a> <a id="814" class="Symbol">→</a> <a id="816" href="Data.Tree.Rose.html#711" class="Datatype">Rose</a> <a id="821" href="Data.Tree.Rose.html#572" class="Generalizable">A</a> <a id="823" href="Agda.Builtin.Size.html#302" class="Postulate">∞</a>
<a id="825" href="Data.Tree.Rose.html#805" class="Function">leaf</a> <a id="830" href="Data.Tree.Rose.html#830" class="Bound">a</a> <a id="832" class="Symbol">=</a> <a id="834" href="Data.Tree.Rose.html#751" class="InductiveConstructor">node</a> <a id="839" href="Data.Tree.Rose.html#830" class="Bound">a</a> <a id="841" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>

<a id="845" class="Comment">------------------------------------------------------------------------</a>
<a id="918" class="Comment">-- Transforming rose trees</a>

<a id="map"></a><a id="946" href="Data.Tree.Rose.html#946" class="Function">map</a> <a id="950" class="Symbol">:</a> <a id="952" class="Symbol">(</a><a id="953" href="Data.Tree.Rose.html#572" class="Generalizable">A</a> <a id="955" class="Symbol">→</a> <a id="957" href="Data.Tree.Rose.html#574" class="Generalizable">B</a><a id="958" class="Symbol">)</a> <a id="960" class="Symbol">→</a> <a id="962" href="Data.Tree.Rose.html#711" class="Datatype">Rose</a> <a id="967" href="Data.Tree.Rose.html#572" class="Generalizable">A</a> <a id="969" href="Data.Tree.Rose.html#590" class="Generalizable">i</a> <a id="971" class="Symbol">→</a> <a id="973" href="Data.Tree.Rose.html#711" class="Datatype">Rose</a> <a id="978" href="Data.Tree.Rose.html#574" class="Generalizable">B</a> <a id="980" href="Data.Tree.Rose.html#590" class="Generalizable">i</a>
<a id="982" href="Data.Tree.Rose.html#946" class="Function">map</a> <a id="986" href="Data.Tree.Rose.html#986" class="Bound">f</a> <a id="988" class="Symbol">(</a><a id="989" href="Data.Tree.Rose.html#751" class="InductiveConstructor">node</a> <a id="994" href="Data.Tree.Rose.html#994" class="Bound">a</a> <a id="996" href="Data.Tree.Rose.html#996" class="Bound">ts</a><a id="998" class="Symbol">)</a> <a id="1000" class="Symbol">=</a> <a id="1002" href="Data.Tree.Rose.html#751" class="InductiveConstructor">node</a> <a id="1007" class="Symbol">(</a><a id="1008" href="Data.Tree.Rose.html#986" class="Bound">f</a> <a id="1010" href="Data.Tree.Rose.html#994" class="Bound">a</a><a id="1011" class="Symbol">)</a> <a id="1013" class="Symbol">(</a><a id="1014" href="Data.List.Base.html#1544" class="Function">List.map</a> <a id="1023" class="Symbol">(</a><a id="1024" href="Data.Tree.Rose.html#946" class="Function">map</a> <a id="1028" href="Data.Tree.Rose.html#986" class="Bound">f</a><a id="1029" class="Symbol">)</a> <a id="1031" href="Data.Tree.Rose.html#996" class="Bound">ts</a><a id="1033" class="Symbol">)</a>

<a id="1036" class="Comment">------------------------------------------------------------------------</a>
<a id="1109" class="Comment">-- Reducing rose trees</a>

<a id="foldr"></a><a id="1133" href="Data.Tree.Rose.html#1133" class="Function">foldr</a> <a id="1139" class="Symbol">:</a> <a id="1141" class="Symbol">(</a><a id="1142" href="Data.Tree.Rose.html#572" class="Generalizable">A</a> <a id="1144" class="Symbol">→</a> <a id="1146" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1151" href="Data.Tree.Rose.html#574" class="Generalizable">B</a> <a id="1153" class="Symbol">→</a> <a id="1155" href="Data.Tree.Rose.html#574" class="Generalizable">B</a><a id="1156" class="Symbol">)</a> <a id="1158" class="Symbol">→</a> <a id="1160" href="Data.Tree.Rose.html#711" class="Datatype">Rose</a> <a id="1165" href="Data.Tree.Rose.html#572" class="Generalizable">A</a> <a id="1167" href="Data.Tree.Rose.html#590" class="Generalizable">i</a> <a id="1169" class="Symbol">→</a> <a id="1171" href="Data.Tree.Rose.html#574" class="Generalizable">B</a>
<a id="1173" href="Data.Tree.Rose.html#1133" class="Function">foldr</a> <a id="1179" href="Data.Tree.Rose.html#1179" class="Bound">n</a> <a id="1181" class="Symbol">(</a><a id="1182" href="Data.Tree.Rose.html#751" class="InductiveConstructor">node</a> <a id="1187" href="Data.Tree.Rose.html#1187" class="Bound">a</a> <a id="1189" href="Data.Tree.Rose.html#1189" class="Bound">ts</a><a id="1191" class="Symbol">)</a> <a id="1193" class="Symbol">=</a> <a id="1195" href="Data.Tree.Rose.html#1179" class="Bound">n</a> <a id="1197" href="Data.Tree.Rose.html#1187" class="Bound">a</a> <a id="1199" class="Symbol">(</a><a id="1200" href="Data.List.Base.html#1544" class="Function">List.map</a> <a id="1209" class="Symbol">(</a><a id="1210" href="Data.Tree.Rose.html#1133" class="Function">foldr</a> <a id="1216" href="Data.Tree.Rose.html#1179" class="Bound">n</a><a id="1217" class="Symbol">)</a> <a id="1219" href="Data.Tree.Rose.html#1189" class="Bound">ts</a><a id="1221" class="Symbol">)</a>

<a id="depth"></a><a id="1224" href="Data.Tree.Rose.html#1224" class="Function">depth</a> <a id="1230" class="Symbol">:</a> <a id="1232" href="Data.Tree.Rose.html#711" class="Datatype">Rose</a> <a id="1237" href="Data.Tree.Rose.html#572" class="Generalizable">A</a> <a id="1239" href="Data.Tree.Rose.html#590" class="Generalizable">i</a> <a id="1241" class="Symbol">→</a> <a id="1243" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="1245" href="Data.Tree.Rose.html#1224" class="Function">depth</a> <a id="1251" class="Symbol">(</a><a id="1252" href="Data.Tree.Rose.html#751" class="InductiveConstructor">node</a> <a id="1257" href="Data.Tree.Rose.html#1257" class="Bound">a</a> <a id="1259" href="Data.Tree.Rose.html#1259" class="Bound">ts</a><a id="1261" class="Symbol">)</a> <a id="1263" class="Symbol">=</a> <a id="1265" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1269" class="Symbol">(</a><a id="1270" href="Data.List.Extrema.html#1936" class="Function">max</a> <a id="1274" class="Number">0</a> <a id="1276" class="Symbol">(</a><a id="1277" href="Data.List.Base.html#1544" class="Function">List.map</a> <a id="1286" href="Data.Tree.Rose.html#1224" class="Function">depth</a> <a id="1292" href="Data.Tree.Rose.html#1259" class="Bound">ts</a><a id="1294" class="Symbol">))</a>

<a id="1298" class="Comment">------------------------------------------------------------------------</a>
<a id="1371" class="Comment">-- Conversion from binary trees</a>

<a id="1404" class="Keyword">module</a> <a id="1411" href="Data.Tree.Rose.html#1411" class="Module">_</a> <a id="1413" class="Symbol">(</a><a id="1414" href="Data.Tree.Rose.html#1414" class="Bound">fromNode</a> <a id="1423" class="Symbol">:</a> <a id="1425" href="Data.Tree.Rose.html#572" class="Generalizable">A</a> <a id="1427" class="Symbol">→</a> <a id="1429" href="Data.Tree.Rose.html#576" class="Generalizable">C</a><a id="1430" class="Symbol">)</a> <a id="1432" class="Symbol">(</a><a id="1433" href="Data.Tree.Rose.html#1433" class="Bound">fromLeaf</a> <a id="1442" class="Symbol">:</a> <a id="1444" href="Data.Tree.Rose.html#574" class="Generalizable">B</a> <a id="1446" class="Symbol">→</a> <a id="1448" href="Data.Tree.Rose.html#576" class="Generalizable">C</a><a id="1449" class="Symbol">)</a> <a id="1451" class="Keyword">where</a>

  <a id="1460" href="Data.Tree.Rose.html#1460" class="Function">fromBinary</a> <a id="1471" class="Symbol">:</a> <a id="1473" href="Data.Tree.Binary.html#691" class="Datatype">Bin.Tree</a> <a id="1482" href="Data.Tree.Rose.html#1425" class="Bound">A</a> <a id="1484" href="Data.Tree.Rose.html#1444" class="Bound">B</a> <a id="1486" class="Symbol">→</a> <a id="1488" href="Data.Tree.Rose.html#711" class="Datatype">Rose</a> <a id="1493" href="Data.Tree.Rose.html#1429" class="Bound">C</a> <a id="1495" href="Agda.Builtin.Size.html#302" class="Postulate">∞</a>
  <a id="1499" href="Data.Tree.Rose.html#1460" class="Function">fromBinary</a> <a id="1510" class="Symbol">(</a><a id="1511" href="Data.Tree.Binary.html#742" class="InductiveConstructor">Bin.leaf</a> <a id="1520" href="Data.Tree.Rose.html#1520" class="Bound">x</a><a id="1521" class="Symbol">)</a>     <a id="1527" class="Symbol">=</a> <a id="1529" href="Data.Tree.Rose.html#751" class="InductiveConstructor">node</a> <a id="1534" class="Symbol">(</a><a id="1535" href="Data.Tree.Rose.html#1433" class="Bound">fromLeaf</a> <a id="1544" href="Data.Tree.Rose.html#1520" class="Bound">x</a><a id="1545" class="Symbol">)</a> <a id="1547" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
  <a id="1552" href="Data.Tree.Rose.html#1460" class="Function">fromBinary</a> <a id="1563" class="Symbol">(</a><a id="1564" href="Data.Tree.Binary.html#764" class="InductiveConstructor">Bin.node</a> <a id="1573" href="Data.Tree.Rose.html#1573" class="Bound">l</a> <a id="1575" href="Data.Tree.Rose.html#1575" class="Bound">x</a> <a id="1577" href="Data.Tree.Rose.html#1577" class="Bound">r</a><a id="1578" class="Symbol">)</a> <a id="1580" class="Symbol">=</a> <a id="1582" href="Data.Tree.Rose.html#751" class="InductiveConstructor">node</a> <a id="1587" class="Symbol">(</a><a id="1588" href="Data.Tree.Rose.html#1414" class="Bound">fromNode</a> <a id="1597" href="Data.Tree.Rose.html#1575" class="Bound">x</a><a id="1598" class="Symbol">)</a>
    <a id="1604" class="Symbol">(</a><a id="1605" href="Data.Tree.Rose.html#1460" class="Function">fromBinary</a> <a id="1616" href="Data.Tree.Rose.html#1573" class="Bound">l</a> <a id="1618" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1620" href="Data.Tree.Rose.html#1460" class="Function">fromBinary</a> <a id="1631" href="Data.Tree.Rose.html#1577" class="Bound">r</a> <a id="1633" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1635" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1637" class="Symbol">)</a>
</pre></body></html>