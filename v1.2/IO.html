<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>IO</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- IO</a>
<a id="112" class="Comment">------------------------------------------------------------------------</a>

<a id="186" class="Symbol">{-#</a> <a id="190" class="Keyword">OPTIONS</a> <a id="198" class="Pragma">--without-K</a> <a id="210" class="Pragma">--guardedness</a> <a id="224" class="Symbol">#-}</a>

<a id="229" class="Keyword">module</a> <a id="236" href="IO.html" class="Module">IO</a> <a id="239" class="Keyword">where</a>

<a id="246" class="Keyword">open</a> <a id="251" class="Keyword">import</a> <a id="258" href="Codata.Musical.Notation.html" class="Module">Codata.Musical.Notation</a>
<a id="282" class="Keyword">open</a> <a id="287" class="Keyword">import</a> <a id="294" href="Codata.Musical.Colist.html" class="Module">Codata.Musical.Colist</a>
<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Codata.Musical.Costring.html" class="Module">Codata.Musical.Costring</a>
<a id="352" class="Keyword">open</a> <a id="357" class="Keyword">import</a> <a id="364" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="374" class="Keyword">open</a> <a id="379" class="Keyword">import</a> <a id="386" href="Data.String.html" class="Module">Data.String</a>
<a id="398" class="Keyword">open</a> <a id="403" class="Keyword">import</a> <a id="410" href="Function.html" class="Module">Function</a>
<a id="419" class="Keyword">import</a> <a id="426" href="IO.Primitive.html" class="Module">IO.Primitive</a> <a id="439" class="Symbol">as</a> <a id="442" class="Module">Prim</a>
<a id="447" class="Keyword">open</a> <a id="452" class="Keyword">import</a> <a id="459" href="Level.html" class="Module">Level</a>

<a id="466" class="Comment">------------------------------------------------------------------------</a>
<a id="539" class="Comment">-- The IO monad</a>

<a id="556" class="Comment">-- One cannot write &quot;infinitely large&quot; computations with the</a>
<a id="617" class="Comment">-- postulated IO monad in IO.Primitive without turning off the</a>
<a id="680" class="Comment">-- termination checker (or going via the FFI, or perhaps abusing</a>
<a id="745" class="Comment">-- something else). The following coinductive deep embedding is</a>
<a id="809" class="Comment">-- introduced to avoid this problem. Possible non-termination is</a>
<a id="874" class="Comment">-- isolated to the run function below.</a>

<a id="914" class="Keyword">infixl</a> <a id="921" class="Number">1</a> <a id="923" href="IO.html#1041" class="InductiveConstructor Operator">_&gt;&gt;=_</a> <a id="929" href="IO.html#1111" class="InductiveConstructor Operator">_&gt;&gt;_</a>

<a id="935" class="Keyword">data</a> <a id="IO"></a><a id="940" href="IO.html#940" class="Datatype">IO</a> <a id="943" class="Symbol">{</a><a id="944" href="IO.html#944" class="Bound">a</a><a id="945" class="Symbol">}</a> <a id="947" class="Symbol">(</a><a id="948" href="IO.html#948" class="Bound">A</a> <a id="950" class="Symbol">:</a> <a id="952" class="PrimitiveType">Set</a> <a id="956" href="IO.html#944" class="Bound">a</a><a id="957" class="Symbol">)</a> <a id="959" class="Symbol">:</a> <a id="961" class="PrimitiveType">Set</a> <a id="965" class="Symbol">(</a><a id="966" href="Agda.Primitive.html#627" class="Primitive">suc</a> <a id="970" href="IO.html#944" class="Bound">a</a><a id="971" class="Symbol">)</a> <a id="973" class="Keyword">where</a>
  <a id="IO.lift"></a><a id="981" href="IO.html#981" class="InductiveConstructor">lift</a>   <a id="988" class="Symbol">:</a> <a id="990" class="Symbol">(</a><a id="991" href="IO.html#991" class="Bound">m</a> <a id="993" class="Symbol">:</a> <a id="995" href="Agda.Builtin.IO.html#111" class="Postulate">Prim.IO</a> <a id="1003" href="IO.html#948" class="Bound">A</a><a id="1004" class="Symbol">)</a> <a id="1006" class="Symbol">→</a> <a id="1008" href="IO.html#940" class="Datatype">IO</a> <a id="1011" href="IO.html#948" class="Bound">A</a>
  <a id="IO.return"></a><a id="1015" href="IO.html#1015" class="InductiveConstructor">return</a> <a id="1022" class="Symbol">:</a> <a id="1024" class="Symbol">(</a><a id="1025" href="IO.html#1025" class="Bound">x</a> <a id="1027" class="Symbol">:</a> <a id="1029" href="IO.html#948" class="Bound">A</a><a id="1030" class="Symbol">)</a> <a id="1032" class="Symbol">→</a> <a id="1034" href="IO.html#940" class="Datatype">IO</a> <a id="1037" href="IO.html#948" class="Bound">A</a>
  <a id="IO._&gt;&gt;=_"></a><a id="1041" href="IO.html#1041" class="InductiveConstructor Operator">_&gt;&gt;=_</a>  <a id="1048" class="Symbol">:</a> <a id="1050" class="Symbol">{</a><a id="1051" href="IO.html#1051" class="Bound">B</a> <a id="1053" class="Symbol">:</a> <a id="1055" class="PrimitiveType">Set</a> <a id="1059" href="IO.html#944" class="Bound">a</a><a id="1060" class="Symbol">}</a> <a id="1062" class="Symbol">(</a><a id="1063" href="IO.html#1063" class="Bound">m</a> <a id="1065" class="Symbol">:</a> <a id="1067" href="Agda.Builtin.Coinduction.html#161" class="Record">∞</a> <a id="1069" class="Symbol">(</a><a id="1070" href="IO.html#940" class="Datatype">IO</a> <a id="1073" href="IO.html#1051" class="Bound">B</a><a id="1074" class="Symbol">))</a> <a id="1077" class="Symbol">(</a><a id="1078" href="IO.html#1078" class="Bound">f</a> <a id="1080" class="Symbol">:</a> <a id="1082" class="Symbol">(</a><a id="1083" href="IO.html#1083" class="Bound">x</a> <a id="1085" class="Symbol">:</a> <a id="1087" href="IO.html#1051" class="Bound">B</a><a id="1088" class="Symbol">)</a> <a id="1090" class="Symbol">→</a> <a id="1092" href="Agda.Builtin.Coinduction.html#161" class="Record">∞</a> <a id="1094" class="Symbol">(</a><a id="1095" href="IO.html#940" class="Datatype">IO</a> <a id="1098" href="IO.html#948" class="Bound">A</a><a id="1099" class="Symbol">))</a> <a id="1102" class="Symbol">→</a> <a id="1104" href="IO.html#940" class="Datatype">IO</a> <a id="1107" href="IO.html#948" class="Bound">A</a>
  <a id="IO._&gt;&gt;_"></a><a id="1111" href="IO.html#1111" class="InductiveConstructor Operator">_&gt;&gt;_</a>   <a id="1118" class="Symbol">:</a> <a id="1120" class="Symbol">{</a><a id="1121" href="IO.html#1121" class="Bound">B</a> <a id="1123" class="Symbol">:</a> <a id="1125" class="PrimitiveType">Set</a> <a id="1129" href="IO.html#944" class="Bound">a</a><a id="1130" class="Symbol">}</a> <a id="1132" class="Symbol">(</a><a id="1133" href="IO.html#1133" class="Bound">m₁</a> <a id="1136" class="Symbol">:</a> <a id="1138" href="Agda.Builtin.Coinduction.html#161" class="Record">∞</a> <a id="1140" class="Symbol">(</a><a id="1141" href="IO.html#940" class="Datatype">IO</a> <a id="1144" href="IO.html#1121" class="Bound">B</a><a id="1145" class="Symbol">))</a> <a id="1148" class="Symbol">(</a><a id="1149" href="IO.html#1149" class="Bound">m₂</a> <a id="1152" class="Symbol">:</a> <a id="1154" href="Agda.Builtin.Coinduction.html#161" class="Record">∞</a> <a id="1156" class="Symbol">(</a><a id="1157" href="IO.html#940" class="Datatype">IO</a> <a id="1160" href="IO.html#948" class="Bound">A</a><a id="1161" class="Symbol">))</a> <a id="1164" class="Symbol">→</a> <a id="1166" href="IO.html#940" class="Datatype">IO</a> <a id="1169" href="IO.html#948" class="Bound">A</a>

<a id="1172" class="Symbol">{-#</a> <a id="1176" class="Keyword">NON_TERMINATING</a> <a id="1192" class="Symbol">#-}</a>

<a id="run"></a><a id="1197" href="IO.html#1197" class="Function">run</a> <a id="1201" class="Symbol">:</a> <a id="1203" class="Symbol">∀</a> <a id="1205" class="Symbol">{</a><a id="1206" href="IO.html#1206" class="Bound">a</a><a id="1207" class="Symbol">}</a> <a id="1209" class="Symbol">{</a><a id="1210" href="IO.html#1210" class="Bound">A</a> <a id="1212" class="Symbol">:</a> <a id="1214" class="PrimitiveType">Set</a> <a id="1218" href="IO.html#1206" class="Bound">a</a><a id="1219" class="Symbol">}</a> <a id="1221" class="Symbol">→</a> <a id="1223" href="IO.html#940" class="Datatype">IO</a> <a id="1226" href="IO.html#1210" class="Bound">A</a> <a id="1228" class="Symbol">→</a> <a id="1230" href="Agda.Builtin.IO.html#111" class="Postulate">Prim.IO</a> <a id="1238" href="IO.html#1210" class="Bound">A</a>
<a id="1240" href="IO.html#1197" class="Function">run</a> <a id="1244" class="Symbol">(</a><a id="1245" href="IO.html#981" class="InductiveConstructor">lift</a> <a id="1250" href="IO.html#1250" class="Bound">m</a><a id="1251" class="Symbol">)</a>   <a id="1255" class="Symbol">=</a> <a id="1257" href="IO.html#1250" class="Bound">m</a>
<a id="1259" href="IO.html#1197" class="Function">run</a> <a id="1263" class="Symbol">(</a><a id="1264" href="IO.html#1015" class="InductiveConstructor">return</a> <a id="1271" href="IO.html#1271" class="Bound">x</a><a id="1272" class="Symbol">)</a> <a id="1274" class="Symbol">=</a> <a id="1276" href="IO.Primitive.html#610" class="Postulate">Prim.return</a> <a id="1288" href="IO.html#1271" class="Bound">x</a>
<a id="1290" href="IO.html#1197" class="Function">run</a> <a id="1294" class="Symbol">(</a><a id="1295" href="IO.html#1295" class="Bound">m</a>  <a id="1298" href="IO.html#1041" class="InductiveConstructor Operator">&gt;&gt;=</a> <a id="1302" href="IO.html#1302" class="Bound">f</a><a id="1303" class="Symbol">)</a> <a id="1305" class="Symbol">=</a> <a id="1307" href="IO.Primitive.html#650" class="Postulate Operator">Prim._&gt;&gt;=_</a> <a id="1318" class="Symbol">(</a><a id="1319" href="IO.html#1197" class="Function">run</a> <a id="1323" class="Symbol">(</a><a id="1324" href="Agda.Builtin.Coinduction.html#229" class="Field">♭</a> <a id="1326" href="IO.html#1295" class="Bound">m</a> <a id="1328" class="Symbol">))</a> <a id="1331" class="Symbol">λ</a> <a id="1333" href="IO.html#1333" class="Bound">x</a> <a id="1335" class="Symbol">→</a> <a id="1337" href="IO.html#1197" class="Function">run</a> <a id="1341" class="Symbol">(</a><a id="1342" href="Agda.Builtin.Coinduction.html#229" class="Field">♭</a> <a id="1344" class="Symbol">(</a><a id="1345" href="IO.html#1302" class="Bound">f</a> <a id="1347" href="IO.html#1333" class="Bound">x</a><a id="1348" class="Symbol">))</a>
<a id="1351" href="IO.html#1197" class="Function">run</a> <a id="1355" class="Symbol">(</a><a id="1356" href="IO.html#1356" class="Bound">m₁</a> <a id="1359" href="IO.html#1111" class="InductiveConstructor Operator">&gt;&gt;</a> <a id="1362" href="IO.html#1362" class="Bound">m₂</a><a id="1364" class="Symbol">)</a> <a id="1366" class="Symbol">=</a> <a id="1368" href="IO.Primitive.html#650" class="Postulate Operator">Prim._&gt;&gt;=_</a> <a id="1379" class="Symbol">(</a><a id="1380" href="IO.html#1197" class="Function">run</a> <a id="1384" class="Symbol">(</a><a id="1385" href="Agda.Builtin.Coinduction.html#229" class="Field">♭</a> <a id="1387" href="IO.html#1356" class="Bound">m₁</a><a id="1389" class="Symbol">))</a> <a id="1392" class="Symbol">λ</a> <a id="1394" href="IO.html#1394" class="Bound">_</a> <a id="1396" class="Symbol">→</a> <a id="1398" href="IO.html#1197" class="Function">run</a> <a id="1402" class="Symbol">(</a><a id="1403" href="Agda.Builtin.Coinduction.html#229" class="Field">♭</a> <a id="1405" href="IO.html#1362" class="Bound">m₂</a><a id="1407" class="Symbol">)</a>

<a id="1410" class="Comment">------------------------------------------------------------------------</a>
<a id="1483" class="Comment">-- Utilities</a>

<a id="sequence"></a><a id="1497" href="IO.html#1497" class="Function">sequence</a> <a id="1506" class="Symbol">:</a> <a id="1508" class="Symbol">∀</a> <a id="1510" class="Symbol">{</a><a id="1511" href="IO.html#1511" class="Bound">a</a><a id="1512" class="Symbol">}</a> <a id="1514" class="Symbol">{</a><a id="1515" href="IO.html#1515" class="Bound">A</a> <a id="1517" class="Symbol">:</a> <a id="1519" class="PrimitiveType">Set</a> <a id="1523" href="IO.html#1511" class="Bound">a</a><a id="1524" class="Symbol">}</a> <a id="1526" class="Symbol">→</a> <a id="1528" href="Codata.Musical.Colist.html#1750" class="Datatype">Colist</a> <a id="1535" class="Symbol">(</a><a id="1536" href="IO.html#940" class="Datatype">IO</a> <a id="1539" href="IO.html#1515" class="Bound">A</a><a id="1540" class="Symbol">)</a> <a id="1542" class="Symbol">→</a> <a id="1544" href="IO.html#940" class="Datatype">IO</a> <a id="1547" class="Symbol">(</a><a id="1548" href="Codata.Musical.Colist.html#1750" class="Datatype">Colist</a> <a id="1555" href="IO.html#1515" class="Bound">A</a><a id="1556" class="Symbol">)</a>
<a id="1558" href="IO.html#1497" class="Function">sequence</a> <a id="1567" href="Codata.Musical.Colist.html#1789" class="InductiveConstructor">[]</a>       <a id="1576" class="Symbol">=</a> <a id="1578" href="IO.html#1015" class="InductiveConstructor">return</a> <a id="1585" href="Codata.Musical.Colist.html#1789" class="InductiveConstructor">[]</a>
<a id="1588" href="IO.html#1497" class="Function">sequence</a> <a id="1597" class="Symbol">(</a><a id="1598" href="IO.html#1598" class="Bound">c</a> <a id="1600" href="Codata.Musical.Colist.html#1806" class="InductiveConstructor Operator">∷</a> <a id="1602" href="IO.html#1602" class="Bound">cs</a><a id="1604" class="Symbol">)</a> <a id="1606" class="Symbol">=</a> <a id="1608" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="1610" href="IO.html#1598" class="Bound">c</a>                  <a id="1629" href="IO.html#1041" class="InductiveConstructor Operator">&gt;&gt;=</a> <a id="1633" class="Symbol">λ</a> <a id="1635" href="IO.html#1635" class="Bound">x</a>  <a id="1638" class="Symbol">→</a>
                    <a id="1660" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="1662" class="Symbol">(</a><a id="1663" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="1665" href="IO.html#1497" class="Function">sequence</a> <a id="1674" class="Symbol">(</a><a id="1675" href="Agda.Builtin.Coinduction.html#229" class="Field">♭</a> <a id="1677" href="IO.html#1602" class="Bound">cs</a><a id="1679" class="Symbol">)</a> <a id="1681" href="IO.html#1041" class="InductiveConstructor Operator">&gt;&gt;=</a> <a id="1685" class="Symbol">λ</a> <a id="1687" href="IO.html#1687" class="Bound">xs</a> <a id="1690" class="Symbol">→</a>
                    <a id="1712" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="1714" href="IO.html#1015" class="InductiveConstructor">return</a> <a id="1721" class="Symbol">(</a><a id="1722" href="IO.html#1635" class="Bound">x</a> <a id="1724" href="Codata.Musical.Colist.html#1806" class="InductiveConstructor Operator">∷</a> <a id="1726" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="1728" href="IO.html#1687" class="Bound">xs</a><a id="1730" class="Symbol">))</a>

<a id="1734" class="Comment">-- The reason for not defining sequence′ in terms of sequence is</a>
<a id="1799" class="Comment">-- efficiency (the unused results could cause unnecessary memory use).</a>

<a id="sequence′"></a><a id="1871" href="IO.html#1871" class="Function">sequence′</a> <a id="1881" class="Symbol">:</a> <a id="1883" class="Symbol">∀</a> <a id="1885" class="Symbol">{</a><a id="1886" href="IO.html#1886" class="Bound">a</a><a id="1887" class="Symbol">}</a> <a id="1889" class="Symbol">{</a><a id="1890" href="IO.html#1890" class="Bound">A</a> <a id="1892" class="Symbol">:</a> <a id="1894" class="PrimitiveType">Set</a> <a id="1898" href="IO.html#1886" class="Bound">a</a><a id="1899" class="Symbol">}</a> <a id="1901" class="Symbol">→</a> <a id="1903" href="Codata.Musical.Colist.html#1750" class="Datatype">Colist</a> <a id="1910" class="Symbol">(</a><a id="1911" href="IO.html#940" class="Datatype">IO</a> <a id="1914" href="IO.html#1890" class="Bound">A</a><a id="1915" class="Symbol">)</a> <a id="1917" class="Symbol">→</a> <a id="1919" href="IO.html#940" class="Datatype">IO</a> <a id="1922" class="Symbol">(</a><a id="1923" href="Level.html#400" class="Record">Lift</a> <a id="1928" href="IO.html#1886" class="Bound">a</a> <a id="1930" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a><a id="1931" class="Symbol">)</a>
<a id="1933" href="IO.html#1871" class="Function">sequence′</a> <a id="1943" href="Codata.Musical.Colist.html#1789" class="InductiveConstructor">[]</a>       <a id="1952" class="Symbol">=</a> <a id="1954" href="IO.html#1015" class="InductiveConstructor">return</a> <a id="1961" class="Symbol">_</a>
<a id="1963" href="IO.html#1871" class="Function">sequence′</a> <a id="1973" class="Symbol">(</a><a id="1974" href="IO.html#1974" class="Bound">c</a> <a id="1976" href="Codata.Musical.Colist.html#1806" class="InductiveConstructor Operator">∷</a> <a id="1978" href="IO.html#1978" class="Bound">cs</a><a id="1980" class="Symbol">)</a> <a id="1982" class="Symbol">=</a> <a id="1984" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="1986" href="IO.html#1974" class="Bound">c</a>                   <a id="2006" href="IO.html#1111" class="InductiveConstructor Operator">&gt;&gt;</a>
                     <a id="2030" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="2032" class="Symbol">(</a><a id="2033" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="2035" href="IO.html#1871" class="Function">sequence′</a> <a id="2045" class="Symbol">(</a><a id="2046" href="Agda.Builtin.Coinduction.html#229" class="Field">♭</a> <a id="2048" href="IO.html#1978" class="Bound">cs</a><a id="2050" class="Symbol">)</a> <a id="2052" href="IO.html#1111" class="InductiveConstructor Operator">&gt;&gt;</a>
                     <a id="2076" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="2078" href="IO.html#1015" class="InductiveConstructor">return</a> <a id="2085" class="Symbol">_)</a>

<a id="2089" class="Keyword">module</a> <a id="2096" href="IO.html#2096" class="Module">_</a> <a id="2098" class="Symbol">{</a><a id="2099" href="IO.html#2099" class="Bound">a</a> <a id="2101" href="IO.html#2101" class="Bound">b</a><a id="2102" class="Symbol">}</a> <a id="2104" class="Symbol">{</a><a id="2105" href="IO.html#2105" class="Bound">A</a> <a id="2107" class="Symbol">:</a> <a id="2109" class="PrimitiveType">Set</a> <a id="2113" href="IO.html#2099" class="Bound">a</a><a id="2114" class="Symbol">}</a> <a id="2116" class="Symbol">{</a><a id="2117" href="IO.html#2117" class="Bound">B</a> <a id="2119" class="Symbol">:</a> <a id="2121" class="PrimitiveType">Set</a> <a id="2125" href="IO.html#2101" class="Bound">b</a><a id="2126" class="Symbol">}</a> <a id="2128" class="Keyword">where</a>

  <a id="2137" href="IO.html#2137" class="Function">mapM</a> <a id="2142" class="Symbol">:</a> <a id="2144" class="Symbol">(</a><a id="2145" href="IO.html#2105" class="Bound">A</a> <a id="2147" class="Symbol">→</a> <a id="2149" href="IO.html#940" class="Datatype">IO</a> <a id="2152" href="IO.html#2117" class="Bound">B</a><a id="2153" class="Symbol">)</a> <a id="2155" class="Symbol">→</a> <a id="2157" href="Codata.Musical.Colist.html#1750" class="Datatype">Colist</a> <a id="2164" href="IO.html#2105" class="Bound">A</a> <a id="2166" class="Symbol">→</a> <a id="2168" href="IO.html#940" class="Datatype">IO</a> <a id="2171" class="Symbol">(</a><a id="2172" href="Codata.Musical.Colist.html#1750" class="Datatype">Colist</a> <a id="2179" href="IO.html#2117" class="Bound">B</a><a id="2180" class="Symbol">)</a>
  <a id="2184" href="IO.html#2137" class="Function">mapM</a> <a id="2189" href="IO.html#2189" class="Bound">f</a> <a id="2191" class="Symbol">=</a> <a id="2193" href="IO.html#1497" class="Function">sequence</a> <a id="2202" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="2204" href="Codata.Musical.Colist.html#3638" class="Function">map</a> <a id="2208" href="IO.html#2189" class="Bound">f</a>

  <a id="2213" href="IO.html#2213" class="Function">mapM′</a> <a id="2219" class="Symbol">:</a> <a id="2221" class="Symbol">(</a><a id="2222" href="IO.html#2105" class="Bound">A</a> <a id="2224" class="Symbol">→</a> <a id="2226" href="IO.html#940" class="Datatype">IO</a> <a id="2229" href="IO.html#2117" class="Bound">B</a><a id="2230" class="Symbol">)</a> <a id="2232" class="Symbol">→</a> <a id="2234" href="Codata.Musical.Colist.html#1750" class="Datatype">Colist</a> <a id="2241" href="IO.html#2105" class="Bound">A</a> <a id="2243" class="Symbol">→</a> <a id="2245" href="IO.html#940" class="Datatype">IO</a> <a id="2248" class="Symbol">(</a><a id="2249" href="Level.html#400" class="Record">Lift</a> <a id="2254" href="IO.html#2101" class="Bound">b</a> <a id="2256" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a><a id="2257" class="Symbol">)</a>
  <a id="2261" href="IO.html#2213" class="Function">mapM′</a> <a id="2267" href="IO.html#2267" class="Bound">f</a> <a id="2269" class="Symbol">=</a> <a id="2271" href="IO.html#1871" class="Function">sequence′</a> <a id="2281" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="2283" href="Codata.Musical.Colist.html#3638" class="Function">map</a> <a id="2287" href="IO.html#2267" class="Bound">f</a>

<a id="2290" class="Comment">------------------------------------------------------------------------</a>
<a id="2363" class="Comment">-- Simple lazy IO</a>

<a id="2382" class="Comment">-- Note that the functions below produce commands which, when</a>
<a id="2444" class="Comment">-- executed, may raise exceptions.</a>

<a id="2480" class="Comment">-- Note also that the semantics of these functions depends on the</a>
<a id="2546" class="Comment">-- version of the Haskell base library. If the version is 4.2.0.0 (or</a>
<a id="2616" class="Comment">-- later?), then the functions use the character encoding specified by</a>
<a id="2687" class="Comment">-- the locale. For older versions of the library (going back to at</a>
<a id="2754" class="Comment">-- least version 3) the functions use ISO-8859-1.</a>

<a id="getContents"></a><a id="2805" href="IO.html#2805" class="Function">getContents</a> <a id="2817" class="Symbol">:</a> <a id="2819" href="IO.html#940" class="Datatype">IO</a> <a id="2822" href="Codata.Musical.Costring.html#468" class="Function">Costring</a>
<a id="2831" href="IO.html#2805" class="Function">getContents</a> <a id="2843" class="Symbol">=</a> <a id="2845" href="IO.html#981" class="InductiveConstructor">lift</a> <a id="2850" href="IO.Primitive.html#1693" class="Postulate">Prim.getContents</a>

<a id="readFile"></a><a id="2868" href="IO.html#2868" class="Function">readFile</a> <a id="2877" class="Symbol">:</a> <a id="2879" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="2886" class="Symbol">→</a> <a id="2888" href="IO.html#940" class="Datatype">IO</a> <a id="2891" href="Codata.Musical.Costring.html#468" class="Function">Costring</a>
<a id="2900" href="IO.html#2868" class="Function">readFile</a> <a id="2909" href="IO.html#2909" class="Bound">f</a> <a id="2911" class="Symbol">=</a> <a id="2913" href="IO.html#981" class="InductiveConstructor">lift</a> <a id="2918" class="Symbol">(</a><a id="2919" href="IO.Primitive.html#1721" class="Postulate">Prim.readFile</a> <a id="2933" href="IO.html#2909" class="Bound">f</a><a id="2934" class="Symbol">)</a>

<a id="2937" class="Comment">-- Reads a finite file. Raises an exception if the file path refers to</a>
<a id="3008" class="Comment">-- a non-physical file (like &quot;/dev/zero&quot;).</a>

<a id="readFiniteFile"></a><a id="3052" href="IO.html#3052" class="Function">readFiniteFile</a> <a id="3067" class="Symbol">:</a> <a id="3069" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="3076" class="Symbol">→</a> <a id="3078" href="IO.html#940" class="Datatype">IO</a> <a id="3081" href="Agda.Builtin.String.html#206" class="Postulate">String</a>
<a id="3088" href="IO.html#3052" class="Function">readFiniteFile</a> <a id="3103" href="IO.html#3103" class="Bound">f</a> <a id="3105" class="Symbol">=</a> <a id="3107" href="IO.html#981" class="InductiveConstructor">lift</a> <a id="3112" class="Symbol">(</a><a id="3113" href="IO.Primitive.html#2036" class="Postulate">Prim.readFiniteFile</a> <a id="3133" href="IO.html#3103" class="Bound">f</a><a id="3134" class="Symbol">)</a>

<a id="writeFile∞"></a><a id="3137" href="IO.html#3137" class="Function">writeFile∞</a> <a id="3148" class="Symbol">:</a> <a id="3150" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="3157" class="Symbol">→</a> <a id="3159" href="Codata.Musical.Costring.html#468" class="Function">Costring</a> <a id="3168" class="Symbol">→</a> <a id="3170" href="IO.html#940" class="Datatype">IO</a> <a id="3173" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a>
<a id="3175" href="IO.html#3137" class="Function">writeFile∞</a> <a id="3186" href="IO.html#3186" class="Bound">f</a> <a id="3188" href="IO.html#3188" class="Bound">s</a> <a id="3190" class="Symbol">=</a>
  <a id="3194" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="3196" href="IO.html#981" class="InductiveConstructor">lift</a> <a id="3201" class="Symbol">(</a><a id="3202" href="IO.Primitive.html#1758" class="Postulate">Prim.writeFile</a> <a id="3217" href="IO.html#3186" class="Bound">f</a> <a id="3219" href="IO.html#3188" class="Bound">s</a><a id="3220" class="Symbol">)</a> <a id="3222" href="IO.html#1111" class="InductiveConstructor Operator">&gt;&gt;</a>
  <a id="3227" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="3229" href="IO.html#1015" class="InductiveConstructor">return</a> <a id="3236" class="Symbol">_</a>

<a id="writeFile"></a><a id="3239" href="IO.html#3239" class="Function">writeFile</a> <a id="3249" class="Symbol">:</a> <a id="3251" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="3258" class="Symbol">→</a> <a id="3260" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="3267" class="Symbol">→</a> <a id="3269" href="IO.html#940" class="Datatype">IO</a> <a id="3272" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a>
<a id="3274" href="IO.html#3239" class="Function">writeFile</a> <a id="3284" href="IO.html#3284" class="Bound">f</a> <a id="3286" href="IO.html#3286" class="Bound">s</a> <a id="3288" class="Symbol">=</a> <a id="3290" href="IO.html#3137" class="Function">writeFile∞</a> <a id="3301" href="IO.html#3284" class="Bound">f</a> <a id="3303" class="Symbol">(</a><a id="3304" href="Codata.Musical.Costring.html#519" class="Function">toCostring</a> <a id="3315" href="IO.html#3286" class="Bound">s</a><a id="3316" class="Symbol">)</a>

<a id="appendFile∞"></a><a id="3319" href="IO.html#3319" class="Function">appendFile∞</a> <a id="3331" class="Symbol">:</a> <a id="3333" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="3340" class="Symbol">→</a> <a id="3342" href="Codata.Musical.Costring.html#468" class="Function">Costring</a> <a id="3351" class="Symbol">→</a> <a id="3353" href="IO.html#940" class="Datatype">IO</a> <a id="3356" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a>
<a id="3358" href="IO.html#3319" class="Function">appendFile∞</a> <a id="3370" href="IO.html#3370" class="Bound">f</a> <a id="3372" href="IO.html#3372" class="Bound">s</a> <a id="3374" class="Symbol">=</a>
  <a id="3378" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="3380" href="IO.html#981" class="InductiveConstructor">lift</a> <a id="3385" class="Symbol">(</a><a id="3386" href="IO.Primitive.html#1802" class="Postulate">Prim.appendFile</a> <a id="3402" href="IO.html#3370" class="Bound">f</a> <a id="3404" href="IO.html#3372" class="Bound">s</a><a id="3405" class="Symbol">)</a> <a id="3407" href="IO.html#1111" class="InductiveConstructor Operator">&gt;&gt;</a>
  <a id="3412" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="3414" href="IO.html#1015" class="InductiveConstructor">return</a> <a id="3421" class="Symbol">_</a>

<a id="appendFile"></a><a id="3424" href="IO.html#3424" class="Function">appendFile</a> <a id="3435" class="Symbol">:</a> <a id="3437" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="3444" class="Symbol">→</a> <a id="3446" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="3453" class="Symbol">→</a> <a id="3455" href="IO.html#940" class="Datatype">IO</a> <a id="3458" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a>
<a id="3460" href="IO.html#3424" class="Function">appendFile</a> <a id="3471" href="IO.html#3471" class="Bound">f</a> <a id="3473" href="IO.html#3473" class="Bound">s</a> <a id="3475" class="Symbol">=</a> <a id="3477" href="IO.html#3319" class="Function">appendFile∞</a> <a id="3489" href="IO.html#3471" class="Bound">f</a> <a id="3491" class="Symbol">(</a><a id="3492" href="Codata.Musical.Costring.html#519" class="Function">toCostring</a> <a id="3503" href="IO.html#3473" class="Bound">s</a><a id="3504" class="Symbol">)</a>

<a id="putStr∞"></a><a id="3507" href="IO.html#3507" class="Function">putStr∞</a> <a id="3515" class="Symbol">:</a> <a id="3517" href="Codata.Musical.Costring.html#468" class="Function">Costring</a> <a id="3526" class="Symbol">→</a> <a id="3528" href="IO.html#940" class="Datatype">IO</a> <a id="3531" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a>
<a id="3533" href="IO.html#3507" class="Function">putStr∞</a> <a id="3541" href="IO.html#3541" class="Bound">s</a> <a id="3543" class="Symbol">=</a>
  <a id="3547" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="3549" href="IO.html#981" class="InductiveConstructor">lift</a> <a id="3554" class="Symbol">(</a><a id="3555" href="IO.Primitive.html#1846" class="Postulate">Prim.putStr</a> <a id="3567" href="IO.html#3541" class="Bound">s</a><a id="3568" class="Symbol">)</a> <a id="3570" href="IO.html#1111" class="InductiveConstructor Operator">&gt;&gt;</a>
  <a id="3575" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="3577" href="IO.html#1015" class="InductiveConstructor">return</a> <a id="3584" class="Symbol">_</a>

<a id="putStr"></a><a id="3587" href="IO.html#3587" class="Function">putStr</a> <a id="3594" class="Symbol">:</a> <a id="3596" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="3603" class="Symbol">→</a> <a id="3605" href="IO.html#940" class="Datatype">IO</a> <a id="3608" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a>
<a id="3610" href="IO.html#3587" class="Function">putStr</a> <a id="3617" href="IO.html#3617" class="Bound">s</a> <a id="3619" class="Symbol">=</a> <a id="3621" href="IO.html#3507" class="Function">putStr∞</a> <a id="3629" class="Symbol">(</a><a id="3630" href="Codata.Musical.Costring.html#519" class="Function">toCostring</a> <a id="3641" href="IO.html#3617" class="Bound">s</a><a id="3642" class="Symbol">)</a>

<a id="putStrLn∞"></a><a id="3645" href="IO.html#3645" class="Function">putStrLn∞</a> <a id="3655" class="Symbol">:</a> <a id="3657" href="Codata.Musical.Costring.html#468" class="Function">Costring</a> <a id="3666" class="Symbol">→</a> <a id="3668" href="IO.html#940" class="Datatype">IO</a> <a id="3671" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a>
<a id="3673" href="IO.html#3645" class="Function">putStrLn∞</a> <a id="3683" href="IO.html#3683" class="Bound">s</a> <a id="3685" class="Symbol">=</a>
  <a id="3689" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="3691" href="IO.html#981" class="InductiveConstructor">lift</a> <a id="3696" class="Symbol">(</a><a id="3697" href="IO.Primitive.html#1881" class="Postulate">Prim.putStrLn</a> <a id="3711" href="IO.html#3683" class="Bound">s</a><a id="3712" class="Symbol">)</a> <a id="3714" href="IO.html#1111" class="InductiveConstructor Operator">&gt;&gt;</a>
  <a id="3719" href="Agda.Builtin.Coinduction.html#194" class="CoinductiveConstructor Operator">♯</a> <a id="3721" href="IO.html#1015" class="InductiveConstructor">return</a> <a id="3728" class="Symbol">_</a>

<a id="putStrLn"></a><a id="3731" href="IO.html#3731" class="Function">putStrLn</a> <a id="3740" class="Symbol">:</a> <a id="3742" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="3749" class="Symbol">→</a> <a id="3751" href="IO.html#940" class="Datatype">IO</a> <a id="3754" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a>
<a id="3756" href="IO.html#3731" class="Function">putStrLn</a> <a id="3765" href="IO.html#3765" class="Bound">s</a> <a id="3767" class="Symbol">=</a> <a id="3769" href="IO.html#3645" class="Function">putStrLn∞</a> <a id="3779" class="Symbol">(</a><a id="3780" href="Codata.Musical.Costring.html#519" class="Function">toCostring</a> <a id="3791" href="IO.html#3765" class="Bound">s</a><a id="3792" class="Symbol">)</a>

<a id="3795" class="Comment">-- Note that the commands writeFile, appendFile, putStr and putStrLn</a>
<a id="3864" class="Comment">-- perform two conversions (string → costring → Haskell list). It may</a>
<a id="3934" class="Comment">-- be preferable to only perform one conversion.</a>
</pre></body></html>