<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Text.Format</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Format strings for Printf and Scanf</a>
<a id="145" class="Comment">------------------------------------------------------------------------</a>

<a id="219" class="Symbol">{-#</a> <a id="223" class="Keyword">OPTIONS</a> <a id="231" class="Pragma">--without-K</a> <a id="243" class="Pragma">--safe</a> <a id="250" class="Symbol">#-}</a>

<a id="255" class="Keyword">module</a> <a id="262" href="Text.Format.html" class="Module">Text.Format</a> <a id="274" class="Keyword">where</a>

<a id="281" class="Keyword">open</a> <a id="286" class="Keyword">import</a> <a id="293" href="Level.html" class="Module">Level</a> <a id="299" class="Keyword">using</a> <a id="305" class="Symbol">(</a><a id="306" href="Level.html#512" class="Function">0ℓ</a><a id="308" class="Symbol">)</a>
<a id="310" class="Keyword">open</a> <a id="315" class="Keyword">import</a> <a id="322" href="Category.Applicative.html" class="Module">Category.Applicative</a>
<a id="343" class="Keyword">open</a> <a id="348" class="Keyword">import</a> <a id="355" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="370" class="Symbol">as</a> <a id="373" class="Module">List</a>
<a id="378" class="Keyword">open</a> <a id="383" class="Keyword">import</a> <a id="390" href="Data.Product.html" class="Module">Data.Product</a>
<a id="403" class="Keyword">open</a> <a id="408" class="Keyword">import</a> <a id="415" href="Data.Product.Nary.NonDependent.html" class="Module">Data.Product.Nary.NonDependent</a>
<a id="446" class="Keyword">open</a> <a id="451" class="Keyword">import</a> <a id="458" href="Data.Sum.Base.html" class="Module">Data.Sum.Base</a>
<a id="472" class="Keyword">import</a> <a id="479" href="Data.Sum.Categorical.Left.html" class="Module">Data.Sum.Categorical.Left</a> <a id="505" class="Symbol">as</a> <a id="508" class="Module">Sumₗ</a>
<a id="513" class="Keyword">open</a> <a id="518" class="Keyword">import</a> <a id="525" href="Function.html" class="Module">Function</a>
<a id="534" class="Keyword">open</a> <a id="539" class="Keyword">import</a> <a id="546" href="Function.Nary.NonDependent.html" class="Module">Function.Nary.NonDependent</a> <a id="573" class="Keyword">using</a> <a id="579" class="Symbol">(</a><a id="580" href="Function.Nary.NonDependent.html#1531" class="Function">0ℓs</a><a id="583" class="Symbol">;</a> <a id="585" href="Function.Nary.NonDependent.Base.html#2319" class="Function">Sets</a><a id="589" class="Symbol">)</a>
<a id="591" class="Keyword">open</a> <a id="596" class="Keyword">import</a> <a id="603" href="Strict.html" class="Module">Strict</a>

<a id="611" class="Comment">-- Formatted types</a>
<a id="630" class="Keyword">open</a> <a id="635" class="Keyword">import</a> <a id="642" href="Data.Char.Base.html" class="Module">Data.Char.Base</a>
<a id="657" class="Keyword">open</a> <a id="662" class="Keyword">import</a> <a id="669" href="Data.Integer.Base.html" class="Module">Data.Integer.Base</a>
<a id="687" class="Keyword">open</a> <a id="692" class="Keyword">import</a> <a id="699" href="Data.Float.html" class="Module">Data.Float</a>
<a id="710" class="Keyword">open</a> <a id="715" class="Keyword">import</a> <a id="722" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="736" class="Keyword">open</a> <a id="741" class="Keyword">import</a> <a id="748" href="Data.String.Base.html" class="Module">Data.String.Base</a>

<a id="766" class="Comment">------------------------------------------------------------------------</a>
<a id="839" class="Comment">-- Basic types</a>

<a id="855" class="Keyword">data</a> <a id="Chunk"></a><a id="860" href="Text.Format.html#860" class="Datatype">Chunk</a> <a id="866" class="Symbol">:</a> <a id="868" class="PrimitiveType">Set</a> <a id="872" class="Keyword">where</a>
  <a id="Chunk.`ℕ"></a><a id="880" href="Text.Format.html#880" class="InductiveConstructor">`ℕ</a> <a id="Chunk.`ℤ"></a><a id="883" href="Text.Format.html#883" class="InductiveConstructor">`ℤ</a> <a id="Chunk.`Float"></a><a id="886" href="Text.Format.html#886" class="InductiveConstructor">`Float</a> <a id="Chunk.`Char"></a><a id="893" href="Text.Format.html#893" class="InductiveConstructor">`Char</a> <a id="Chunk.`String"></a><a id="899" href="Text.Format.html#899" class="InductiveConstructor">`String</a> <a id="907" class="Symbol">:</a> <a id="909" href="Text.Format.html#860" class="Datatype">Chunk</a>
  <a id="Chunk.Raw"></a><a id="917" href="Text.Format.html#917" class="InductiveConstructor">Raw</a> <a id="921" class="Symbol">:</a> <a id="923" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="930" class="Symbol">→</a> <a id="932" href="Text.Format.html#860" class="Datatype">Chunk</a>

<a id="Format"></a><a id="939" href="Text.Format.html#939" class="Function">Format</a> <a id="946" class="Symbol">:</a> <a id="948" class="PrimitiveType">Set</a>
<a id="952" href="Text.Format.html#939" class="Function">Format</a> <a id="959" class="Symbol">=</a> <a id="961" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="966" href="Text.Format.html#860" class="Datatype">Chunk</a>

<a id="973" class="Comment">------------------------------------------------------------------------</a>
<a id="1046" class="Comment">-- Semantics</a>

<a id="size"></a><a id="1060" href="Text.Format.html#1060" class="Function">size</a> <a id="1065" class="Symbol">:</a> <a id="1067" href="Text.Format.html#939" class="Function">Format</a> <a id="1074" class="Symbol">→</a> <a id="1076" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
<a id="1078" href="Text.Format.html#1060" class="Function">size</a> <a id="1083" class="Symbol">=</a> <a id="1085" href="Data.List.Base.html#4103" class="Function">List.sum</a> <a id="1094" href="Function.Base.html#3193" class="Function Operator">∘′</a> <a id="1097" href="Data.List.Base.html#1383" class="Function">List.map</a> <a id="1106" class="Symbol">λ</a> <a id="1108" class="Symbol">{</a> <a id="1110" class="Symbol">(</a><a id="1111" href="Text.Format.html#917" class="InductiveConstructor">Raw</a> <a id="1115" class="Symbol">_)</a> <a id="1118" class="Symbol">→</a> <a id="1120" class="Number">0</a><a id="1121" class="Symbol">;</a> <a id="1123" class="CatchallClause Symbol">_</a> <a id="1125" class="Symbol">→</a> <a id="1127" class="Number">1</a> <a id="1129" class="Symbol">}</a>

<a id="1132" class="Comment">-- Meaning of a format as a list of value types</a>

<a id="⟦_⟧"></a><a id="1181" href="Text.Format.html#1181" class="Function Operator">⟦_⟧</a> <a id="1185" class="Symbol">:</a> <a id="1187" class="Symbol">(</a><a id="1188" href="Text.Format.html#1188" class="Bound">fmt</a> <a id="1192" class="Symbol">:</a> <a id="1194" href="Text.Format.html#939" class="Function">Format</a><a id="1200" class="Symbol">)</a> <a id="1202" class="Symbol">→</a> <a id="1204" href="Function.Nary.NonDependent.Base.html#2319" class="Function">Sets</a> <a id="1209" class="Symbol">(</a><a id="1210" href="Text.Format.html#1060" class="Function">size</a> <a id="1215" href="Text.Format.html#1188" class="Bound">fmt</a><a id="1218" class="Symbol">)</a> <a id="1220" href="Function.Nary.NonDependent.html#1531" class="Function">0ℓs</a>
<a id="1224" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1226" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a>           <a id="1239" href="Text.Format.html#1181" class="Function Operator">⟧</a> <a id="1241" class="Symbol">=</a> <a id="1243" class="Symbol">_</a>
<a id="1245" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1247" href="Text.Format.html#880" class="InductiveConstructor">`ℕ</a>      <a id="1255" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1257" href="Text.Format.html#1257" class="Bound">cs</a> <a id="1260" href="Text.Format.html#1181" class="Function Operator">⟧</a> <a id="1262" class="Symbol">=</a> <a id="1264" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>      <a id="1271" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1273" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1275" href="Text.Format.html#1257" class="Bound">cs</a> <a id="1278" href="Text.Format.html#1181" class="Function Operator">⟧</a>
<a id="1280" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1282" href="Text.Format.html#883" class="InductiveConstructor">`ℤ</a>      <a id="1290" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1292" href="Text.Format.html#1292" class="Bound">cs</a> <a id="1295" href="Text.Format.html#1181" class="Function Operator">⟧</a> <a id="1297" class="Symbol">=</a> <a id="1299" href="Agda.Builtin.Int.html#219" class="Datatype">ℤ</a>      <a id="1306" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1308" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1310" href="Text.Format.html#1292" class="Bound">cs</a> <a id="1313" href="Text.Format.html#1181" class="Function Operator">⟧</a>
<a id="1315" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1317" href="Text.Format.html#886" class="InductiveConstructor">`Float</a>  <a id="1325" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1327" href="Text.Format.html#1327" class="Bound">cs</a> <a id="1330" href="Text.Format.html#1181" class="Function Operator">⟧</a> <a id="1332" class="Symbol">=</a> <a id="1334" href="Agda.Builtin.Float.html#235" class="Postulate">Float</a>  <a id="1341" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1343" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1345" href="Text.Format.html#1327" class="Bound">cs</a> <a id="1348" href="Text.Format.html#1181" class="Function Operator">⟧</a>
<a id="1350" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1352" href="Text.Format.html#893" class="InductiveConstructor">`Char</a>   <a id="1360" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1362" href="Text.Format.html#1362" class="Bound">cs</a> <a id="1365" href="Text.Format.html#1181" class="Function Operator">⟧</a> <a id="1367" class="Symbol">=</a> <a id="1369" href="Agda.Builtin.Char.html#200" class="Postulate">Char</a>   <a id="1376" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1378" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1380" href="Text.Format.html#1362" class="Bound">cs</a> <a id="1383" href="Text.Format.html#1181" class="Function Operator">⟧</a>
<a id="1385" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1387" href="Text.Format.html#899" class="InductiveConstructor">`String</a> <a id="1395" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1397" href="Text.Format.html#1397" class="Bound">cs</a> <a id="1400" href="Text.Format.html#1181" class="Function Operator">⟧</a> <a id="1402" class="Symbol">=</a> <a id="1404" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="1411" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1413" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1415" href="Text.Format.html#1397" class="Bound">cs</a> <a id="1418" href="Text.Format.html#1181" class="Function Operator">⟧</a>
<a id="1420" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1422" href="Text.Format.html#917" class="InductiveConstructor">Raw</a> <a id="1426" class="Symbol">_</a>   <a id="1430" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1432" href="Text.Format.html#1432" class="Bound">cs</a> <a id="1435" href="Text.Format.html#1181" class="Function Operator">⟧</a> <a id="1437" class="Symbol">=</a>          <a id="1448" href="Text.Format.html#1181" class="Function Operator">⟦</a> <a id="1450" href="Text.Format.html#1432" class="Bound">cs</a> <a id="1453" href="Text.Format.html#1181" class="Function Operator">⟧</a>

<a id="1456" class="Comment">------------------------------------------------------------------------</a>
<a id="1529" class="Comment">-- Lexer: from Strings to Formats</a>

<a id="1564" class="Comment">-- Lexing may fail. To have a useful error message, we defined the following</a>
<a id="1641" class="Comment">-- enumerated type</a>

<a id="1661" class="Keyword">data</a> <a id="Error"></a><a id="1666" href="Text.Format.html#1666" class="Datatype">Error</a> <a id="1672" class="Symbol">:</a> <a id="1674" class="PrimitiveType">Set</a> <a id="1678" class="Keyword">where</a>
  <a id="Error.UnexpectedEndOfString"></a><a id="1686" href="Text.Format.html#1686" class="InductiveConstructor">UnexpectedEndOfString</a> <a id="1708" class="Symbol">:</a> <a id="1710" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="1717" class="Symbol">→</a> <a id="1719" href="Text.Format.html#1666" class="Datatype">Error</a>
  <a id="1727" class="Comment">-- ^ expected a type declaration; found an empty string</a>
  <a id="Error.InvalidType"></a><a id="1785" href="Text.Format.html#1785" class="InductiveConstructor">InvalidType</a> <a id="1797" class="Symbol">:</a> <a id="1799" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="1806" class="Symbol">→</a> <a id="1808" href="Agda.Builtin.Char.html#200" class="Postulate">Char</a> <a id="1813" class="Symbol">→</a> <a id="1815" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="1822" class="Symbol">→</a> <a id="1824" href="Text.Format.html#1666" class="Datatype">Error</a>
  <a id="1832" class="Comment">-- ^ invalid type declaration</a>
  <a id="1864" class="Comment">--   return a focus: prefix processed, character causing failure, rest</a>

<a id="lexer"></a><a id="1936" href="Text.Format.html#1936" class="Function">lexer</a> <a id="1942" class="Symbol">:</a> <a id="1944" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="1951" class="Symbol">→</a> <a id="1953" href="Text.Format.html#1666" class="Datatype">Error</a> <a id="1959" href="Data.Sum.Base.html#617" class="Datatype Operator">⊎</a> <a id="1961" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="1966" href="Text.Format.html#860" class="Datatype">Chunk</a>
<a id="1972" href="Text.Format.html#1936" class="Function">lexer</a> <a id="1978" href="Text.Format.html#1978" class="Bound">input</a> <a id="1984" class="Symbol">=</a> <a id="1986" href="Text.Format.html#2505" class="Function">loop</a> <a id="1991" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a> <a id="1994" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a> <a id="1997" class="Symbol">(</a><a id="1998" href="Agda.Builtin.String.html#262" class="Primitive">toList</a> <a id="2005" href="Text.Format.html#1978" class="Bound">input</a><a id="2010" class="Symbol">)</a> <a id="2012" class="Keyword">where</a>

  <a id="2021" class="Keyword">open</a> <a id="2026" href="Category.Applicative.html#530" class="Module">RawApplicative</a> <a id="2041" class="Symbol">(</a><a id="2042" href="Data.Sum.Categorical.Left.html#945" class="Function">Sumₗ.applicative</a> <a id="2059" href="Text.Format.html#1666" class="Datatype">Error</a> <a id="2065" href="Level.html#512" class="Function">0ℓ</a><a id="2067" class="Symbol">)</a>

  <a id="2072" class="Comment">-- Type synonyms used locally to document the code</a>
  <a id="2125" href="Text.Format.html#2125" class="Function">RevWord</a> <a id="2133" class="Symbol">=</a> <a id="2135" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="2140" href="Agda.Builtin.Char.html#200" class="Postulate">Char</a> <a id="2145" class="Comment">-- Mere characters accumulated so far</a>
  <a id="2185" href="Text.Format.html#2185" class="Function">Prefix</a>  <a id="2193" class="Symbol">=</a> <a id="2195" href="Text.Format.html#2125" class="Function">RevWord</a>   <a id="2205" class="Comment">-- Prefix of the input String already read</a>

  <a id="2251" href="Text.Format.html#2251" class="Function">toRevString</a> <a id="2263" class="Symbol">:</a> <a id="2265" href="Text.Format.html#2125" class="Function">RevWord</a> <a id="2273" class="Symbol">→</a> <a id="2275" href="Agda.Builtin.String.html#206" class="Postulate">String</a>
  <a id="2284" href="Text.Format.html#2251" class="Function">toRevString</a> <a id="2296" class="Symbol">=</a> <a id="2298" href="Agda.Builtin.String.html#304" class="Primitive">fromList</a> <a id="2307" href="Function.Base.html#3193" class="Function Operator">∘′</a> <a id="2310" href="Data.List.Base.html#8643" class="Function">reverse</a>

  <a id="2321" class="Comment">-- Push a Raw token if we have accumulated some mere characters</a>
  <a id="2387" href="Text.Format.html#2387" class="Function">push</a> <a id="2392" class="Symbol">:</a> <a id="2394" href="Text.Format.html#2125" class="Function">RevWord</a> <a id="2402" class="Symbol">→</a> <a id="2404" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="2409" href="Text.Format.html#860" class="Datatype">Chunk</a> <a id="2415" class="Symbol">→</a> <a id="2417" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="2422" href="Text.Format.html#860" class="Datatype">Chunk</a>
  <a id="2430" href="Text.Format.html#2387" class="Function">push</a> <a id="2435" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a> <a id="2438" href="Text.Format.html#2438" class="Bound">ks</a> <a id="2441" class="Symbol">=</a> <a id="2443" href="Text.Format.html#2438" class="Bound">ks</a>
  <a id="2448" href="Text.Format.html#2387" class="CatchallClause Function">push</a><a id="2452" class="CatchallClause"> </a><a id="2453" href="Text.Format.html#2453" class="CatchallClause Bound">cs</a><a id="2455" class="CatchallClause"> </a><a id="2456" href="Text.Format.html#2456" class="CatchallClause Bound">ks</a> <a id="2459" class="Symbol">=</a> <a id="2461" href="Text.Format.html#917" class="InductiveConstructor">Raw</a> <a id="2465" class="Symbol">(</a><a id="2466" href="Text.Format.html#2251" class="Function">toRevString</a> <a id="2478" href="Text.Format.html#2453" class="Bound">cs</a><a id="2480" class="Symbol">)</a> <a id="2482" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="2484" href="Text.Format.html#2456" class="Bound">ks</a>

  <a id="2490" class="Comment">-- Main loop</a>
  <a id="2505" href="Text.Format.html#2505" class="Function">loop</a> <a id="2510" class="Symbol">:</a> <a id="2512" href="Text.Format.html#2125" class="Function">RevWord</a> <a id="2520" class="Symbol">→</a> <a id="2522" href="Text.Format.html#2185" class="Function">Prefix</a> <a id="2529" class="Symbol">→</a> <a id="2531" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="2536" href="Agda.Builtin.Char.html#200" class="Postulate">Char</a> <a id="2541" class="Symbol">→</a> <a id="2543" href="Text.Format.html#1666" class="Datatype">Error</a> <a id="2549" href="Data.Sum.Base.html#617" class="Datatype Operator">⊎</a> <a id="2551" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="2556" href="Text.Format.html#860" class="Datatype">Chunk</a>
  <a id="2564" href="Text.Format.html#2564" class="Function">type</a> <a id="2569" class="Symbol">:</a>           <a id="2581" href="Text.Format.html#2185" class="Function">Prefix</a> <a id="2588" class="Symbol">→</a> <a id="2590" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="2595" href="Agda.Builtin.Char.html#200" class="Postulate">Char</a> <a id="2600" class="Symbol">→</a> <a id="2602" href="Text.Format.html#1666" class="Datatype">Error</a> <a id="2608" href="Data.Sum.Base.html#617" class="Datatype Operator">⊎</a> <a id="2610" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="2615" href="Text.Format.html#860" class="Datatype">Chunk</a>

  <a id="2624" href="Text.Format.html#2505" class="Function">loop</a> <a id="2629" href="Text.Format.html#2629" class="Bound">acc</a> <a id="2633" href="Text.Format.html#2633" class="Bound">bef</a> <a id="2637" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a>               <a id="2654" class="Symbol">=</a> <a id="2656" href="Category.Applicative.Indexed.html#905" class="Function">pure</a> <a id="2661" class="Symbol">(</a><a id="2662" href="Text.Format.html#2387" class="Function">push</a> <a id="2667" href="Text.Format.html#2629" class="Bound">acc</a> <a id="2671" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a><a id="2673" class="Symbol">)</a>
  <a id="2677" class="Comment">-- escaped &#39;%&#39; character: treat like a mere character</a>
  <a id="2733" href="Text.Format.html#2505" class="Function">loop</a> <a id="2738" href="Text.Format.html#2738" class="Bound">acc</a> <a id="2742" href="Text.Format.html#2742" class="Bound">bef</a> <a id="2746" class="Symbol">(</a><a id="2747" class="String">&#39;%&#39;</a> <a id="2751" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="2753" class="String">&#39;%&#39;</a> <a id="2757" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="2759" href="Text.Format.html#2759" class="Bound">cs</a><a id="2761" class="Symbol">)</a> <a id="2763" class="Symbol">=</a> <a id="2765" href="Text.Format.html#2505" class="Function">loop</a> <a id="2770" class="Symbol">(</a><a id="2771" class="String">&#39;%&#39;</a> <a id="2775" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="2777" href="Text.Format.html#2738" class="Bound">acc</a><a id="2780" class="Symbol">)</a> <a id="2782" class="Symbol">(</a><a id="2783" class="String">&#39;%&#39;</a> <a id="2787" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="2789" class="String">&#39;%&#39;</a> <a id="2793" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="2795" href="Text.Format.html#2742" class="Bound">bef</a><a id="2798" class="Symbol">)</a> <a id="2800" href="Text.Format.html#2759" class="Bound">cs</a>
  <a id="2805" class="Comment">-- non escaped &#39;%&#39;: type declaration following</a>
  <a id="2854" href="Text.Format.html#2505" class="CatchallClause Function">loop</a><a id="2858" class="CatchallClause"> </a><a id="2859" href="Text.Format.html#2859" class="CatchallClause Bound">acc</a><a id="2862" class="CatchallClause"> </a><a id="2863" href="Text.Format.html#2863" class="CatchallClause Bound">bef</a><a id="2866" class="CatchallClause"> </a><a id="2867" class="CatchallClause Symbol">(</a><a id="2868" class="CatchallClause String">&#39;%&#39;</a><a id="2871" class="CatchallClause"> </a><a id="2872" href="Agda.Builtin.List.html#173" class="CatchallClause InductiveConstructor Operator">∷</a><a id="2873" class="CatchallClause"> </a><a id="2874" href="Text.Format.html#2874" class="CatchallClause Bound">cs</a><a id="2876" class="CatchallClause Symbol">)</a>       <a id="2884" class="Symbol">=</a> <a id="2886" href="Text.Format.html#2387" class="Function">push</a> <a id="2891" href="Text.Format.html#2859" class="Bound">acc</a> <a id="2895" href="Category.Functor.html#528" class="Function Operator">&lt;$&gt;</a> <a id="2899" href="Text.Format.html#2564" class="Function">type</a> <a id="2904" class="Symbol">(</a><a id="2905" class="String">&#39;%&#39;</a> <a id="2909" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="2911" href="Text.Format.html#2863" class="Bound">bef</a><a id="2914" class="Symbol">)</a> <a id="2916" href="Text.Format.html#2874" class="Bound">cs</a>
  <a id="2921" class="Comment">-- mere character: push onto the accumulator</a>
  <a id="2968" href="Text.Format.html#2505" class="Function">loop</a> <a id="2973" href="Text.Format.html#2973" class="Bound">acc</a> <a id="2977" href="Text.Format.html#2977" class="Bound">bef</a> <a id="2981" class="Symbol">(</a><a id="2982" href="Text.Format.html#2982" class="Bound">c</a> <a id="2984" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="2986" href="Text.Format.html#2986" class="Bound">cs</a><a id="2988" class="Symbol">)</a>         <a id="2998" class="Symbol">=</a> <a id="3000" href="Text.Format.html#2505" class="Function">loop</a> <a id="3005" class="Symbol">(</a><a id="3006" href="Text.Format.html#2982" class="Bound">c</a> <a id="3008" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="3010" href="Text.Format.html#2973" class="Bound">acc</a><a id="3013" class="Symbol">)</a> <a id="3015" class="Symbol">(</a><a id="3016" href="Text.Format.html#2982" class="Bound">c</a> <a id="3018" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="3020" href="Text.Format.html#2977" class="Bound">bef</a><a id="3023" class="Symbol">)</a> <a id="3025" href="Text.Format.html#2986" class="Bound">cs</a>

  <a id="3031" href="Text.Format.html#2564" class="Function">type</a> <a id="3036" href="Text.Format.html#3036" class="Bound">bef</a> <a id="3040" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a>       <a id="3049" class="Symbol">=</a> <a id="3051" href="Data.Sum.Base.html#667" class="InductiveConstructor">inj₁</a> <a id="3056" class="Symbol">(</a><a id="3057" href="Text.Format.html#1686" class="InductiveConstructor">UnexpectedEndOfString</a> <a id="3079" href="Text.Format.html#1978" class="Bound">input</a><a id="3084" class="Symbol">)</a>
  <a id="3088" href="Text.Format.html#2564" class="Function">type</a> <a id="3093" href="Text.Format.html#3093" class="Bound">bef</a> <a id="3097" class="Symbol">(</a><a id="3098" href="Text.Format.html#3098" class="Bound">c</a> <a id="3100" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="3102" href="Text.Format.html#3102" class="Bound">cs</a><a id="3104" class="Symbol">)</a> <a id="3106" class="Symbol">=</a> <a id="3108" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">_∷_</a> <a id="3112" href="Category.Functor.html#528" class="Function Operator">&lt;$&gt;</a> <a id="3116" href="Text.Format.html#3158" class="Function">chunk</a> <a id="3122" href="Text.Format.html#3098" class="Bound">c</a> <a id="3124" href="Category.Applicative.Indexed.html#938" class="Function Operator">⊛</a> <a id="3126" href="Text.Format.html#2505" class="Function">loop</a> <a id="3131" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a> <a id="3134" class="Symbol">(</a><a id="3135" href="Text.Format.html#3098" class="Bound">c</a> <a id="3137" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="3139" href="Text.Format.html#3093" class="Bound">bef</a><a id="3142" class="Symbol">)</a> <a id="3144" href="Text.Format.html#3102" class="Bound">cs</a> <a id="3147" class="Keyword">where</a>

    <a id="3158" href="Text.Format.html#3158" class="Function">chunk</a> <a id="3164" class="Symbol">:</a> <a id="3166" href="Agda.Builtin.Char.html#200" class="Postulate">Char</a> <a id="3171" class="Symbol">→</a> <a id="3173" href="Text.Format.html#1666" class="Datatype">Error</a> <a id="3179" href="Data.Sum.Base.html#617" class="Datatype Operator">⊎</a> <a id="3181" href="Text.Format.html#860" class="Datatype">Chunk</a>
    <a id="3191" href="Text.Format.html#3158" class="Function">chunk</a> <a id="3197" class="String">&#39;d&#39;</a> <a id="3201" class="Symbol">=</a> <a id="3203" href="Category.Applicative.Indexed.html#905" class="Function">pure</a> <a id="3208" href="Text.Format.html#883" class="InductiveConstructor">`ℤ</a>
    <a id="3215" href="Text.Format.html#3158" class="Function">chunk</a> <a id="3221" class="String">&#39;i&#39;</a> <a id="3225" class="Symbol">=</a> <a id="3227" href="Category.Applicative.Indexed.html#905" class="Function">pure</a> <a id="3232" href="Text.Format.html#883" class="InductiveConstructor">`ℤ</a>
    <a id="3239" href="Text.Format.html#3158" class="Function">chunk</a> <a id="3245" class="String">&#39;u&#39;</a> <a id="3249" class="Symbol">=</a> <a id="3251" href="Category.Applicative.Indexed.html#905" class="Function">pure</a> <a id="3256" href="Text.Format.html#880" class="InductiveConstructor">`ℕ</a>
    <a id="3263" href="Text.Format.html#3158" class="Function">chunk</a> <a id="3269" class="String">&#39;f&#39;</a> <a id="3273" class="Symbol">=</a> <a id="3275" href="Category.Applicative.Indexed.html#905" class="Function">pure</a> <a id="3280" href="Text.Format.html#886" class="InductiveConstructor">`Float</a>
    <a id="3291" href="Text.Format.html#3158" class="Function">chunk</a> <a id="3297" class="String">&#39;c&#39;</a> <a id="3301" class="Symbol">=</a> <a id="3303" href="Category.Applicative.Indexed.html#905" class="Function">pure</a> <a id="3308" href="Text.Format.html#893" class="InductiveConstructor">`Char</a>
    <a id="3318" href="Text.Format.html#3158" class="Function">chunk</a> <a id="3324" class="String">&#39;s&#39;</a> <a id="3328" class="Symbol">=</a> <a id="3330" href="Category.Applicative.Indexed.html#905" class="Function">pure</a> <a id="3335" href="Text.Format.html#899" class="InductiveConstructor">`String</a>
    <a id="3347" href="Text.Format.html#3158" class="Function">chunk</a> <a id="3353" class="Symbol">_</a>   <a id="3357" class="Symbol">=</a> <a id="3359" href="Strict.html#515" class="Function">force′</a> <a id="3366" class="Symbol">(</a><a id="3367" href="Text.Format.html#2251" class="Function">toRevString</a> <a id="3379" href="Text.Format.html#3093" class="Bound">bef</a><a id="3382" class="Symbol">)</a> <a id="3384" href="Function.Base.html#3262" class="Function Operator">$′</a> <a id="3387" class="Symbol">λ</a> <a id="3389" href="Text.Format.html#3389" class="Bound">prefix</a> <a id="3396" class="Symbol">→</a>
                <a id="3414" href="Strict.html#515" class="Function">force′</a> <a id="3421" class="Symbol">(</a><a id="3422" href="Agda.Builtin.String.html#304" class="Primitive">fromList</a> <a id="3431" href="Text.Format.html#3102" class="Bound">cs</a><a id="3433" class="Symbol">)</a>     <a id="3439" href="Function.Base.html#3262" class="Function Operator">$′</a> <a id="3442" class="Symbol">λ</a> <a id="3444" href="Text.Format.html#3444" class="Bound">suffix</a> <a id="3451" class="Symbol">→</a>
                <a id="3469" href="Data.Sum.Base.html#667" class="InductiveConstructor">inj₁</a> <a id="3474" class="Symbol">(</a><a id="3475" href="Text.Format.html#1785" class="InductiveConstructor">InvalidType</a> <a id="3487" href="Text.Format.html#3389" class="Bound">prefix</a> <a id="3494" href="Text.Format.html#3098" class="Bound">c</a> <a id="3496" href="Text.Format.html#3444" class="Bound">suffix</a><a id="3502" class="Symbol">)</a>
</pre></body></html>