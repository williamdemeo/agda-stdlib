<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Refinement</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Refinement type: a value together with a proof irrelevant witness.</a>
<a id="176" class="Comment">------------------------------------------------------------------------</a>

<a id="250" class="Symbol">{-#</a> <a id="254" class="Keyword">OPTIONS</a> <a id="262" class="Pragma">--without-K</a> <a id="274" class="Pragma">--safe</a> <a id="281" class="Symbol">#-}</a>

<a id="286" class="Keyword">module</a> <a id="293" href="Data.Refinement.html" class="Module">Data.Refinement</a> <a id="309" class="Keyword">where</a>

<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Level.html" class="Module">Level</a>
<a id="334" class="Keyword">open</a> <a id="339" class="Keyword">import</a> <a id="346" href="Data.Irrelevant.html" class="Module">Data.Irrelevant</a> <a id="362" class="Symbol">as</a> <a id="365" class="Module">Irrelevant</a> <a id="376" class="Keyword">using</a> <a id="382" class="Symbol">(</a><a id="383" href="Data.Irrelevant.html#716" class="Record">Irrelevant</a><a id="393" class="Symbol">)</a>
<a id="395" class="Keyword">open</a> <a id="400" class="Keyword">import</a> <a id="407" href="Function.Base.html" class="Module">Function.Base</a>
<a id="421" class="Keyword">open</a> <a id="426" class="Keyword">import</a> <a id="433" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="448" class="Keyword">using</a> <a id="454" class="Symbol">(</a><a id="455" href="Relation.Unary.html#3508" class="Function">IUniversal</a><a id="465" class="Symbol">;</a> <a id="467" href="Relation.Unary.html#4500" class="Function Operator">_⇒_</a><a id="470" class="Symbol">;</a> <a id="472" href="Relation.Unary.html#5245" class="Function Operator">_⊢_</a><a id="475" class="Symbol">)</a>

<a id="478" class="Keyword">private</a>
  <a id="488" class="Keyword">variable</a>
    <a id="501" href="Data.Refinement.html#501" class="Generalizable">a</a> <a id="503" href="Data.Refinement.html#503" class="Generalizable">b</a> <a id="505" href="Data.Refinement.html#505" class="Generalizable">p</a> <a id="507" href="Data.Refinement.html#507" class="Generalizable">q</a> <a id="509" class="Symbol">:</a> <a id="511" href="Agda.Primitive.html#597" class="Postulate">Level</a>
    <a id="521" href="Data.Refinement.html#521" class="Generalizable">A</a> <a id="523" class="Symbol">:</a> <a id="525" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="529" href="Data.Refinement.html#501" class="Generalizable">a</a>
    <a id="535" href="Data.Refinement.html#535" class="Generalizable">B</a> <a id="537" class="Symbol">:</a> <a id="539" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="543" href="Data.Refinement.html#503" class="Generalizable">b</a>

<a id="546" class="Keyword">record</a> <a id="Refinement"></a><a id="553" href="Data.Refinement.html#553" class="Record">Refinement</a> <a id="564" class="Symbol">{</a><a id="565" href="Data.Refinement.html#565" class="Bound">a</a> <a id="567" href="Data.Refinement.html#567" class="Bound">p</a><a id="568" class="Symbol">}</a> <a id="570" class="Symbol">(</a><a id="571" href="Data.Refinement.html#571" class="Bound">A</a> <a id="573" class="Symbol">:</a> <a id="575" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="579" href="Data.Refinement.html#565" class="Bound">a</a><a id="580" class="Symbol">)</a> <a id="582" class="Symbol">(</a><a id="583" href="Data.Refinement.html#583" class="Bound">P</a> <a id="585" class="Symbol">:</a> <a id="587" href="Data.Refinement.html#571" class="Bound">A</a> <a id="589" class="Symbol">→</a> <a id="591" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="595" href="Data.Refinement.html#567" class="Bound">p</a><a id="596" class="Symbol">)</a> <a id="598" class="Symbol">:</a> <a id="600" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="604" class="Symbol">(</a><a id="605" href="Data.Refinement.html#565" class="Bound">a</a> <a id="607" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="609" href="Data.Refinement.html#567" class="Bound">p</a><a id="610" class="Symbol">)</a> <a id="612" class="Keyword">where</a>
  <a id="620" class="Keyword">constructor</a> <a id="_,_"></a><a id="632" href="Data.Refinement.html#632" class="InductiveConstructor Operator">_,_</a>
  <a id="638" class="Keyword">field</a> <a id="Refinement.value"></a><a id="644" href="Data.Refinement.html#644" class="Field">value</a> <a id="650" class="Symbol">:</a> <a id="652" href="Data.Refinement.html#571" class="Bound">A</a>
        <a id="Refinement.proof"></a><a id="662" href="Data.Refinement.html#662" class="Field">proof</a> <a id="668" class="Symbol">:</a> <a id="670" href="Data.Irrelevant.html#716" class="Record">Irrelevant</a> <a id="681" class="Symbol">(</a><a id="682" href="Data.Refinement.html#583" class="Bound">P</a> <a id="684" href="Data.Refinement.html#644" class="Field">value</a><a id="689" class="Symbol">)</a>
<a id="691" class="Keyword">open</a> <a id="696" href="Data.Refinement.html#553" class="Module">Refinement</a> <a id="707" class="Keyword">public</a>

<a id="715" class="Comment">-- The syntax declaration below is meant to mimick set comprehension.</a>
<a id="785" class="Comment">-- It is attached to Refinement-syntax, to make it easy to import</a>
<a id="851" class="Comment">-- Data.Refinement without the special syntax.</a>

<a id="899" class="Keyword">infix</a> <a id="905" class="Number">2</a> <a id="907" href="Data.Refinement.html#925" class="Function">Refinement-syntax</a>
<a id="Refinement-syntax"></a><a id="925" href="Data.Refinement.html#925" class="Function">Refinement-syntax</a> <a id="943" class="Symbol">=</a> <a id="945" href="Data.Refinement.html#553" class="Record">Refinement</a>
<a id="956" class="Keyword">syntax</a> <a id="963" href="Data.Refinement.html#925" class="Function">Refinement-syntax</a> <a id="981" class="Bound">A</a> <a id="983" class="Symbol">(λ</a> <a id="986" class="Bound">x</a> <a id="988" class="Symbol">→</a> <a id="990" class="Bound">P</a><a id="991" class="Symbol">)</a> <a id="993" class="Symbol">=</a> <a id="995" class="Function">[</a> <a id="997" class="Bound">x</a> <a id="999" class="Function">∈</a> <a id="1001" class="Bound">A</a> <a id="1003" class="Function">∣</a> <a id="1005" class="Bound">P</a> <a id="1007" class="Function">]</a>

<a id="1010" class="Keyword">module</a> <a id="1017" href="Data.Refinement.html#1017" class="Module">_</a> <a id="1019" class="Symbol">{</a><a id="1020" href="Data.Refinement.html#1020" class="Bound">P</a> <a id="1022" class="Symbol">:</a> <a id="1024" href="Data.Refinement.html#521" class="Generalizable">A</a> <a id="1026" class="Symbol">→</a> <a id="1028" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1032" href="Data.Refinement.html#505" class="Generalizable">p</a><a id="1033" class="Symbol">}</a> <a id="1035" class="Symbol">{</a><a id="1036" href="Data.Refinement.html#1036" class="Bound">Q</a> <a id="1038" class="Symbol">:</a> <a id="1040" href="Data.Refinement.html#535" class="Generalizable">B</a> <a id="1042" class="Symbol">→</a> <a id="1044" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1048" href="Data.Refinement.html#507" class="Generalizable">q</a><a id="1049" class="Symbol">}</a> <a id="1051" class="Keyword">where</a>

  <a id="1060" href="Data.Refinement.html#1060" class="Function">map</a> <a id="1064" class="Symbol">:</a> <a id="1066" class="Symbol">(</a><a id="1067" href="Data.Refinement.html#1067" class="Bound">f</a> <a id="1069" class="Symbol">:</a> <a id="1071" href="Data.Refinement.html#1024" class="Bound">A</a> <a id="1073" class="Symbol">→</a> <a id="1075" href="Data.Refinement.html#1040" class="Bound">B</a><a id="1076" class="Symbol">)</a> <a id="1078" class="Symbol">→</a> <a id="1080" href="Relation.Unary.html#3508" class="Function">∀[</a> <a id="1083" href="Data.Refinement.html#1020" class="Bound">P</a> <a id="1085" href="Relation.Unary.html#4500" class="Function Operator">⇒</a> <a id="1087" href="Data.Refinement.html#1067" class="Bound">f</a> <a id="1089" href="Relation.Unary.html#5245" class="Function Operator">⊢</a> <a id="1091" href="Data.Refinement.html#1036" class="Bound">Q</a> <a id="1093" href="Relation.Unary.html#3508" class="Function">]</a> <a id="1095" class="Symbol">→</a>
        <a id="1105" href="Data.Refinement.html#925" class="Function">[</a> <a id="1107" href="Data.Refinement.html#1107" class="Bound">a</a> <a id="1109" href="Data.Refinement.html#925" class="Function">∈</a> <a id="1111" href="Data.Refinement.html#1024" class="Bound">A</a> <a id="1113" href="Data.Refinement.html#925" class="Function">∣</a> <a id="1115" href="Data.Refinement.html#1020" class="Bound">P</a> <a id="1117" href="Data.Refinement.html#1107" class="Bound">a</a> <a id="1119" href="Data.Refinement.html#925" class="Function">]</a> <a id="1121" class="Symbol">→</a> <a id="1123" href="Data.Refinement.html#925" class="Function">[</a> <a id="1125" href="Data.Refinement.html#1125" class="Bound">b</a> <a id="1127" href="Data.Refinement.html#925" class="Function">∈</a> <a id="1129" href="Data.Refinement.html#1040" class="Bound">B</a> <a id="1131" href="Data.Refinement.html#925" class="Function">∣</a> <a id="1133" href="Data.Refinement.html#1036" class="Bound">Q</a> <a id="1135" href="Data.Refinement.html#1125" class="Bound">b</a> <a id="1137" href="Data.Refinement.html#925" class="Function">]</a>
  <a id="1141" href="Data.Refinement.html#1060" class="Function">map</a> <a id="1145" href="Data.Refinement.html#1145" class="Bound">f</a> <a id="1147" href="Data.Refinement.html#1147" class="Bound">prf</a> <a id="1151" class="Symbol">(</a><a id="1152" href="Data.Refinement.html#1152" class="Bound">a</a> <a id="1154" href="Data.Refinement.html#632" class="InductiveConstructor Operator">,</a> <a id="1156" href="Data.Refinement.html#1156" class="Bound">p</a><a id="1157" class="Symbol">)</a> <a id="1159" class="Symbol">=</a> <a id="1161" href="Data.Refinement.html#1145" class="Bound">f</a> <a id="1163" href="Data.Refinement.html#1152" class="Bound">a</a> <a id="1165" href="Data.Refinement.html#632" class="InductiveConstructor Operator">,</a> <a id="1167" href="Data.Irrelevant.html#954" class="Function">Irrelevant.map</a> <a id="1182" href="Data.Refinement.html#1147" class="Bound">prf</a> <a id="1186" href="Data.Refinement.html#1156" class="Bound">p</a>

<a id="1189" class="Keyword">module</a> <a id="1196" href="Data.Refinement.html#1196" class="Module">_</a> <a id="1198" class="Symbol">{</a><a id="1199" href="Data.Refinement.html#1199" class="Bound">P</a> <a id="1201" class="Symbol">:</a> <a id="1203" href="Data.Refinement.html#521" class="Generalizable">A</a> <a id="1205" class="Symbol">→</a> <a id="1207" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1211" href="Data.Refinement.html#505" class="Generalizable">p</a><a id="1212" class="Symbol">}</a> <a id="1214" class="Symbol">{</a><a id="1215" href="Data.Refinement.html#1215" class="Bound">Q</a> <a id="1217" class="Symbol">:</a> <a id="1219" href="Data.Refinement.html#521" class="Generalizable">A</a> <a id="1221" class="Symbol">→</a> <a id="1223" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1227" href="Data.Refinement.html#507" class="Generalizable">q</a><a id="1228" class="Symbol">}</a> <a id="1230" class="Keyword">where</a>

  <a id="1239" href="Data.Refinement.html#1239" class="Function">refine</a> <a id="1246" class="Symbol">:</a> <a id="1248" href="Relation.Unary.html#3508" class="Function">∀[</a> <a id="1251" href="Data.Refinement.html#1199" class="Bound">P</a> <a id="1253" href="Relation.Unary.html#4500" class="Function Operator">⇒</a> <a id="1255" href="Data.Refinement.html#1215" class="Bound">Q</a> <a id="1257" href="Relation.Unary.html#3508" class="Function">]</a> <a id="1259" class="Symbol">→</a> <a id="1261" href="Data.Refinement.html#925" class="Function">[</a> <a id="1263" href="Data.Refinement.html#1263" class="Bound">a</a> <a id="1265" href="Data.Refinement.html#925" class="Function">∈</a> <a id="1267" href="Data.Refinement.html#1203" class="Bound">A</a> <a id="1269" href="Data.Refinement.html#925" class="Function">∣</a> <a id="1271" href="Data.Refinement.html#1199" class="Bound">P</a> <a id="1273" href="Data.Refinement.html#1263" class="Bound">a</a> <a id="1275" href="Data.Refinement.html#925" class="Function">]</a> <a id="1277" class="Symbol">→</a> <a id="1279" href="Data.Refinement.html#925" class="Function">[</a> <a id="1281" href="Data.Refinement.html#1281" class="Bound">a</a> <a id="1283" href="Data.Refinement.html#925" class="Function">∈</a> <a id="1285" href="Data.Refinement.html#1203" class="Bound">A</a> <a id="1287" href="Data.Refinement.html#925" class="Function">∣</a> <a id="1289" href="Data.Refinement.html#1215" class="Bound">Q</a> <a id="1291" href="Data.Refinement.html#1281" class="Bound">a</a> <a id="1293" href="Data.Refinement.html#925" class="Function">]</a>
  <a id="1297" href="Data.Refinement.html#1239" class="Function">refine</a> <a id="1304" class="Symbol">=</a> <a id="1306" href="Data.Refinement.html#1060" class="Function">map</a> <a id="1310" href="Function.Base.html#695" class="Function">id</a>
</pre></body></html>