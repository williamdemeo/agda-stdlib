<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Star.Vec</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Vectors defined in terms of the reflexive-transitive closure, Star</a>
<a id="176" class="Comment">------------------------------------------------------------------------</a>

<a id="250" class="Symbol">{-#</a> <a id="254" class="Keyword">OPTIONS</a> <a id="262" class="Pragma">--with-K</a> <a id="271" class="Pragma">--safe</a> <a id="278" class="Symbol">#-}</a>

<a id="283" class="Keyword">module</a> <a id="290" href="Data.Star.Vec.html" class="Module">Data.Star.Vec</a> <a id="304" class="Keyword">where</a>

<a id="311" class="Keyword">open</a> <a id="316" class="Keyword">import</a> <a id="323" href="Data.Star.Nat.html" class="Module">Data.Star.Nat</a>
<a id="337" class="Keyword">open</a> <a id="342" class="Keyword">import</a> <a id="349" href="Data.Star.Fin.html" class="Module">Data.Star.Fin</a> <a id="363" class="Keyword">using</a> <a id="369" class="Symbol">(</a><a id="370" href="Data.Star.Fin.html#466" class="Function">Fin</a><a id="373" class="Symbol">)</a>
<a id="375" class="Keyword">open</a> <a id="380" class="Keyword">import</a> <a id="387" href="Data.Star.Decoration.html" class="Module">Data.Star.Decoration</a>
<a id="408" class="Keyword">open</a> <a id="413" class="Keyword">import</a> <a id="420" href="Data.Star.Pointer.html" class="Module">Data.Star.Pointer</a> <a id="438" class="Symbol">as</a> <a id="441" class="Module">Pointer</a> <a id="449" class="Keyword">hiding</a> <a id="456" class="Symbol">(</a><a id="457" href="Data.Star.Pointer.html#2195" class="Function">lookup</a><a id="463" class="Symbol">)</a>
<a id="465" class="Keyword">open</a> <a id="470" class="Keyword">import</a> <a id="477" href="Data.Star.List.html" class="Module">Data.Star.List</a> <a id="492" class="Keyword">using</a> <a id="498" class="Symbol">(</a><a id="499" href="Data.Star.List.html#560" class="Function">List</a><a id="503" class="Symbol">)</a>
<a id="505" class="Keyword">open</a> <a id="510" class="Keyword">import</a> <a id="517" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="533" class="Keyword">open</a> <a id="538" class="Keyword">import</a> <a id="545" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html" class="Module">Relation.Binary.Construct.Closure.ReflexiveTransitive</a>
<a id="599" class="Keyword">open</a> <a id="604" class="Keyword">import</a> <a id="611" href="Function.Base.html" class="Module">Function.Base</a>
<a id="625" class="Keyword">open</a> <a id="630" class="Keyword">import</a> <a id="637" href="Data.Unit.html" class="Module">Data.Unit</a>

<a id="648" class="Comment">-- The vector type. Vectors are natural numbers decorated with extra</a>
<a id="717" class="Comment">-- information (i.e. elements).</a>

<a id="Vec"></a><a id="750" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="754" class="Symbol">:</a> <a id="756" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="760" class="Symbol">→</a> <a id="762" href="Data.Star.Nat.html#535" class="Function">ℕ</a> <a id="764" class="Symbol">→</a> <a id="766" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="770" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="774" href="Data.Star.Vec.html#774" class="Bound">A</a> <a id="776" class="Symbol">=</a> <a id="778" href="Data.Star.Decoration.html#1528" class="Function">All</a> <a id="782" class="Symbol">(λ</a> <a id="785" href="Data.Star.Vec.html#785" class="Bound">_</a> <a id="787" class="Symbol">→</a> <a id="789" href="Data.Star.Vec.html#774" class="Bound">A</a><a id="790" class="Symbol">)</a>

<a id="793" class="Comment">-- Nil and cons.</a>

<a id="[]"></a><a id="811" href="Data.Star.Vec.html#811" class="Function">[]</a> <a id="814" class="Symbol">:</a> <a id="816" class="Symbol">∀</a> <a id="818" class="Symbol">{</a><a id="819" href="Data.Star.Vec.html#819" class="Bound">A</a><a id="820" class="Symbol">}</a> <a id="822" class="Symbol">→</a> <a id="824" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="828" href="Data.Star.Vec.html#819" class="Bound">A</a> <a id="830" href="Data.Star.Nat.html#590" class="Function">zero</a>
<a id="835" href="Data.Star.Vec.html#811" class="Function">[]</a> <a id="838" class="Symbol">=</a> <a id="840" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#551" class="InductiveConstructor">ε</a>

<a id="843" class="Keyword">infixr</a> <a id="850" class="Number">5</a> <a id="852" href="Data.Star.Vec.html#857" class="Function Operator">_∷_</a>

<a id="_∷_"></a><a id="857" href="Data.Star.Vec.html#857" class="Function Operator">_∷_</a> <a id="861" class="Symbol">:</a> <a id="863" class="Symbol">∀</a> <a id="865" class="Symbol">{</a><a id="866" href="Data.Star.Vec.html#866" class="Bound">A</a> <a id="868" href="Data.Star.Vec.html#868" class="Bound">n</a><a id="869" class="Symbol">}</a> <a id="871" class="Symbol">→</a> <a id="873" href="Data.Star.Vec.html#866" class="Bound">A</a> <a id="875" class="Symbol">→</a> <a id="877" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="881" href="Data.Star.Vec.html#866" class="Bound">A</a> <a id="883" href="Data.Star.Vec.html#868" class="Bound">n</a> <a id="885" class="Symbol">→</a> <a id="887" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="891" href="Data.Star.Vec.html#866" class="Bound">A</a> <a id="893" class="Symbol">(</a><a id="894" href="Data.Star.Nat.html#609" class="Function">suc</a> <a id="898" href="Data.Star.Vec.html#868" class="Bound">n</a><a id="899" class="Symbol">)</a>
<a id="901" href="Data.Star.Vec.html#901" class="Bound">x</a> <a id="903" href="Data.Star.Vec.html#857" class="Function Operator">∷</a> <a id="905" href="Data.Star.Vec.html#905" class="Bound">xs</a> <a id="908" class="Symbol">=</a> <a id="910" href="Data.Star.Decoration.html#1016" class="InductiveConstructor">↦</a> <a id="912" href="Data.Star.Vec.html#901" class="Bound">x</a> <a id="914" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#578" class="InductiveConstructor Operator">◅</a> <a id="916" href="Data.Star.Vec.html#905" class="Bound">xs</a>

<a id="920" class="Comment">-- Projections.</a>

<a id="head"></a><a id="937" href="Data.Star.Vec.html#937" class="Function">head</a> <a id="942" class="Symbol">:</a> <a id="944" class="Symbol">∀</a> <a id="946" class="Symbol">{</a><a id="947" href="Data.Star.Vec.html#947" class="Bound">A</a> <a id="949" href="Data.Star.Vec.html#949" class="Bound">n</a><a id="950" class="Symbol">}</a> <a id="952" class="Symbol">→</a> <a id="954" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="958" href="Data.Star.Vec.html#947" class="Bound">A</a> <a id="960" class="Symbol">(</a><a id="961" href="Data.Star.Nat.html#996" class="Function">1#</a> <a id="964" href="Data.Star.Nat.html#813" class="Function Operator">+</a> <a id="966" href="Data.Star.Vec.html#949" class="Bound">n</a><a id="967" class="Symbol">)</a> <a id="969" class="Symbol">→</a> <a id="971" href="Data.Star.Vec.html#947" class="Bound">A</a>
<a id="973" href="Data.Star.Vec.html#937" class="Function">head</a> <a id="978" class="Symbol">(</a><a id="979" href="Data.Star.Decoration.html#1016" class="InductiveConstructor">↦</a> <a id="981" href="Data.Star.Vec.html#981" class="Bound">x</a> <a id="983" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#578" class="InductiveConstructor Operator">◅</a> <a id="985" class="Symbol">_)</a> <a id="988" class="Symbol">=</a> <a id="990" href="Data.Star.Vec.html#981" class="Bound">x</a>

<a id="tail"></a><a id="993" href="Data.Star.Vec.html#993" class="Function">tail</a> <a id="998" class="Symbol">:</a> <a id="1000" class="Symbol">∀</a> <a id="1002" class="Symbol">{</a><a id="1003" href="Data.Star.Vec.html#1003" class="Bound">A</a> <a id="1005" href="Data.Star.Vec.html#1005" class="Bound">n</a><a id="1006" class="Symbol">}</a> <a id="1008" class="Symbol">→</a> <a id="1010" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="1014" href="Data.Star.Vec.html#1003" class="Bound">A</a> <a id="1016" class="Symbol">(</a><a id="1017" href="Data.Star.Nat.html#996" class="Function">1#</a> <a id="1020" href="Data.Star.Nat.html#813" class="Function Operator">+</a> <a id="1022" href="Data.Star.Vec.html#1005" class="Bound">n</a><a id="1023" class="Symbol">)</a> <a id="1025" class="Symbol">→</a> <a id="1027" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="1031" href="Data.Star.Vec.html#1003" class="Bound">A</a> <a id="1033" href="Data.Star.Vec.html#1005" class="Bound">n</a>
<a id="1035" href="Data.Star.Vec.html#993" class="Function">tail</a> <a id="1040" class="Symbol">(</a><a id="1041" href="Data.Star.Decoration.html#1016" class="InductiveConstructor">↦</a> <a id="1043" class="Symbol">_</a> <a id="1045" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#578" class="InductiveConstructor Operator">◅</a> <a id="1047" href="Data.Star.Vec.html#1047" class="Bound">xs</a><a id="1049" class="Symbol">)</a> <a id="1051" class="Symbol">=</a> <a id="1053" href="Data.Star.Vec.html#1047" class="Bound">xs</a>

<a id="1057" class="Comment">-- Append.</a>

<a id="1069" class="Keyword">infixr</a> <a id="1076" class="Number">5</a> <a id="1078" href="Data.Star.Vec.html#1084" class="Function Operator">_++_</a>

<a id="_++_"></a><a id="1084" href="Data.Star.Vec.html#1084" class="Function Operator">_++_</a> <a id="1089" class="Symbol">:</a> <a id="1091" class="Symbol">∀</a> <a id="1093" class="Symbol">{</a><a id="1094" href="Data.Star.Vec.html#1094" class="Bound">A</a> <a id="1096" href="Data.Star.Vec.html#1096" class="Bound">m</a> <a id="1098" href="Data.Star.Vec.html#1098" class="Bound">n</a><a id="1099" class="Symbol">}</a> <a id="1101" class="Symbol">→</a> <a id="1103" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="1107" href="Data.Star.Vec.html#1094" class="Bound">A</a> <a id="1109" href="Data.Star.Vec.html#1096" class="Bound">m</a> <a id="1111" class="Symbol">→</a> <a id="1113" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="1117" href="Data.Star.Vec.html#1094" class="Bound">A</a> <a id="1119" href="Data.Star.Vec.html#1098" class="Bound">n</a> <a id="1121" class="Symbol">→</a> <a id="1123" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="1127" href="Data.Star.Vec.html#1094" class="Bound">A</a> <a id="1129" class="Symbol">(</a><a id="1130" href="Data.Star.Vec.html#1096" class="Bound">m</a> <a id="1132" href="Data.Star.Nat.html#813" class="Function Operator">+</a> <a id="1134" href="Data.Star.Vec.html#1098" class="Bound">n</a><a id="1135" class="Symbol">)</a>
<a id="1137" href="Data.Star.Vec.html#1084" class="Function Operator">_++_</a> <a id="1142" class="Symbol">=</a> <a id="1144" href="Data.Star.Decoration.html#2945" class="Function Operator">_◅◅◅_</a>

<a id="1151" class="Comment">-- Safe lookup.</a>

<a id="lookup"></a><a id="1168" href="Data.Star.Vec.html#1168" class="Function">lookup</a> <a id="1175" class="Symbol">:</a> <a id="1177" class="Symbol">∀</a> <a id="1179" class="Symbol">{</a><a id="1180" href="Data.Star.Vec.html#1180" class="Bound">A</a> <a id="1182" href="Data.Star.Vec.html#1182" class="Bound">n</a><a id="1183" class="Symbol">}</a> <a id="1185" class="Symbol">→</a> <a id="1187" href="Data.Star.Fin.html#466" class="Function">Fin</a> <a id="1191" href="Data.Star.Vec.html#1182" class="Bound">n</a> <a id="1193" class="Symbol">→</a> <a id="1195" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="1199" href="Data.Star.Vec.html#1180" class="Bound">A</a> <a id="1201" href="Data.Star.Vec.html#1182" class="Bound">n</a> <a id="1203" class="Symbol">→</a> <a id="1205" href="Data.Star.Vec.html#1180" class="Bound">A</a>
<a id="1207" href="Data.Star.Vec.html#1168" class="Function">lookup</a> <a id="1214" href="Data.Star.Vec.html#1214" class="Bound">i</a> <a id="1216" href="Data.Star.Vec.html#1216" class="Bound">xs</a> <a id="1219" class="Keyword">with</a> <a id="1224" href="Data.Star.Pointer.html#2195" class="Function">Pointer.lookup</a> <a id="1239" href="Data.Star.Vec.html#1214" class="Bound">i</a> <a id="1241" href="Data.Star.Vec.html#1216" class="Bound">xs</a>
<a id="1244" class="Symbol">...</a> <a id="1248" class="Symbol">|</a> <a id="1250" href="Data.Star.Pointer.html#1922" class="InductiveConstructor">result</a> <a id="1257" class="Symbol">_</a> <a id="1259" href="Data.Star.Vec.html#1259" class="Bound">x</a> <a id="1261" class="Symbol">=</a> <a id="1263" href="Data.Star.Vec.html#1259" class="Bound">x</a>

<a id="1266" class="Comment">------------------------------------------------------------------------</a>
<a id="1339" class="Comment">-- Conversions</a>

<a id="fromList"></a><a id="1355" href="Data.Star.Vec.html#1355" class="Function">fromList</a> <a id="1364" class="Symbol">:</a> <a id="1366" class="Symbol">∀</a> <a id="1368" class="Symbol">{</a><a id="1369" href="Data.Star.Vec.html#1369" class="Bound">A</a><a id="1370" class="Symbol">}</a> <a id="1372" class="Symbol">→</a> <a id="1374" class="Symbol">(</a><a id="1375" href="Data.Star.Vec.html#1375" class="Bound">xs</a> <a id="1378" class="Symbol">:</a> <a id="1380" href="Data.Star.List.html#560" class="Function">List</a> <a id="1385" href="Data.Star.Vec.html#1369" class="Bound">A</a><a id="1386" class="Symbol">)</a> <a id="1388" class="Symbol">→</a> <a id="1390" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="1394" href="Data.Star.Vec.html#1369" class="Bound">A</a> <a id="1396" class="Symbol">(</a><a id="1397" href="Data.Star.Nat.html#665" class="Function">length</a> <a id="1404" href="Data.Star.Vec.html#1375" class="Bound">xs</a><a id="1406" class="Symbol">)</a>
<a id="1408" href="Data.Star.Vec.html#1355" class="Function">fromList</a> <a id="1417" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#551" class="InductiveConstructor">ε</a>        <a id="1426" class="Symbol">=</a> <a id="1428" href="Data.Star.Vec.html#811" class="Function">[]</a>
<a id="1431" href="Data.Star.Vec.html#1355" class="Function">fromList</a> <a id="1440" class="Symbol">(</a><a id="1441" href="Data.Star.Vec.html#1441" class="Bound">x</a> <a id="1443" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#578" class="InductiveConstructor Operator">◅</a> <a id="1445" href="Data.Star.Vec.html#1445" class="Bound">xs</a><a id="1447" class="Symbol">)</a> <a id="1449" class="Symbol">=</a> <a id="1451" href="Data.Star.Vec.html#1441" class="Bound">x</a> <a id="1453" href="Data.Star.Vec.html#857" class="Function Operator">∷</a> <a id="1455" href="Data.Star.Vec.html#1355" class="Function">fromList</a> <a id="1464" href="Data.Star.Vec.html#1445" class="Bound">xs</a>

<a id="toList"></a><a id="1468" href="Data.Star.Vec.html#1468" class="Function">toList</a> <a id="1475" class="Symbol">:</a> <a id="1477" class="Symbol">∀</a> <a id="1479" class="Symbol">{</a><a id="1480" href="Data.Star.Vec.html#1480" class="Bound">A</a> <a id="1482" href="Data.Star.Vec.html#1482" class="Bound">n</a><a id="1483" class="Symbol">}</a> <a id="1485" class="Symbol">→</a> <a id="1487" href="Data.Star.Vec.html#750" class="Function">Vec</a> <a id="1491" href="Data.Star.Vec.html#1480" class="Bound">A</a> <a id="1493" href="Data.Star.Vec.html#1482" class="Bound">n</a> <a id="1495" class="Symbol">→</a> <a id="1497" href="Data.Star.List.html#560" class="Function">List</a> <a id="1502" href="Data.Star.Vec.html#1480" class="Bound">A</a>
<a id="1504" href="Data.Star.Vec.html#1468" class="Function">toList</a> <a id="1511" class="Symbol">=</a> <a id="1513" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1530" class="Function">gmap</a> <a id="1518" class="Symbol">(</a><a id="1519" href="Function.Base.html#636" class="Function">const</a> <a id="1525" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1527" class="Symbol">)</a> <a id="1529" href="Data.Star.Decoration.html#1303" class="Function">decoration</a>
</pre></body></html>