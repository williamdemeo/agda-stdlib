<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Star.BoundedVec</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Bounded vectors (inefficient implementation)</a>
<a id="154" class="Comment">------------------------------------------------------------------------</a>

<a id="228" class="Comment">-- Vectors of a specified maximum length.</a>

<a id="271" class="Symbol">{-#</a> <a id="275" class="Keyword">OPTIONS</a> <a id="283" class="Pragma">--with-K</a> <a id="292" class="Pragma">--safe</a> <a id="299" class="Symbol">#-}</a>

<a id="304" class="Keyword">module</a> <a id="311" href="Data.Star.BoundedVec.html" class="Module">Data.Star.BoundedVec</a> <a id="332" class="Keyword">where</a>

<a id="339" class="Keyword">import</a> <a id="346" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="362" class="Symbol">as</a> <a id="365" class="Module">Maybe</a>
<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="Data.Star.Nat.html" class="Module">Data.Star.Nat</a>
<a id="397" class="Keyword">open</a> <a id="402" class="Keyword">import</a> <a id="409" href="Data.Star.Decoration.html" class="Module">Data.Star.Decoration</a>
<a id="430" class="Keyword">open</a> <a id="435" class="Keyword">import</a> <a id="442" href="Data.Star.Pointer.html" class="Module">Data.Star.Pointer</a>
<a id="460" class="Keyword">open</a> <a id="465" class="Keyword">import</a> <a id="472" href="Data.Star.List.html" class="Module">Data.Star.List</a> <a id="487" class="Keyword">using</a> <a id="493" class="Symbol">(</a><a id="494" href="Data.Star.List.html#560" class="Function">List</a><a id="498" class="Symbol">)</a>
<a id="500" class="Keyword">open</a> <a id="505" class="Keyword">import</a> <a id="512" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="522" class="Keyword">open</a> <a id="527" class="Keyword">import</a> <a id="534" href="Function.html" class="Module">Function</a>
<a id="543" class="Keyword">open</a> <a id="548" class="Keyword">import</a> <a id="555" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="571" class="Keyword">open</a> <a id="576" class="Keyword">import</a> <a id="583" href="Relation.Binary.Consequences.html" class="Module">Relation.Binary.Consequences</a>
<a id="612" class="Keyword">open</a> <a id="617" class="Keyword">import</a> <a id="624" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html" class="Module">Relation.Binary.Construct.Closure.ReflexiveTransitive</a>

<a id="679" class="Comment">------------------------------------------------------------------------</a>
<a id="752" class="Comment">-- The type</a>

<a id="765" class="Comment">-- Finite sets decorated with elements (note the use of suc).</a>

<a id="BoundedVec"></a><a id="828" href="Data.Star.BoundedVec.html#828" class="Function">BoundedVec</a> <a id="839" class="Symbol">:</a> <a id="841" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="845" class="Symbol">→</a> <a id="847" href="Data.Star.Nat.html#535" class="Function">ℕ</a> <a id="849" class="Symbol">→</a> <a id="851" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="855" href="Data.Star.BoundedVec.html#828" class="Function">BoundedVec</a> <a id="866" href="Data.Star.BoundedVec.html#866" class="Bound">a</a> <a id="868" href="Data.Star.BoundedVec.html#868" class="Bound">n</a> <a id="870" class="Symbol">=</a> <a id="872" href="Data.Star.Pointer.html#1312" class="Function">Any</a> <a id="876" class="Symbol">(λ</a> <a id="879" href="Data.Star.BoundedVec.html#879" class="Bound">_</a> <a id="881" class="Symbol">→</a> <a id="883" href="Data.Star.BoundedVec.html#866" class="Bound">a</a><a id="884" class="Symbol">)</a> <a id="886" class="Symbol">(λ</a> <a id="889" href="Data.Star.BoundedVec.html#889" class="Bound">_</a> <a id="891" class="Symbol">→</a> <a id="893" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="894" class="Symbol">)</a> <a id="896" class="Symbol">(</a><a id="897" href="Data.Star.Nat.html#609" class="Function">suc</a> <a id="901" href="Data.Star.BoundedVec.html#868" class="Bound">n</a><a id="902" class="Symbol">)</a>

<a id="[]"></a><a id="905" href="Data.Star.BoundedVec.html#905" class="Function">[]</a> <a id="908" class="Symbol">:</a> <a id="910" class="Symbol">∀</a> <a id="912" class="Symbol">{</a><a id="913" href="Data.Star.BoundedVec.html#913" class="Bound">a</a> <a id="915" href="Data.Star.BoundedVec.html#915" class="Bound">n</a><a id="916" class="Symbol">}</a> <a id="918" class="Symbol">→</a> <a id="920" href="Data.Star.BoundedVec.html#828" class="Function">BoundedVec</a> <a id="931" href="Data.Star.BoundedVec.html#913" class="Bound">a</a> <a id="933" href="Data.Star.BoundedVec.html#915" class="Bound">n</a>
<a id="935" href="Data.Star.BoundedVec.html#905" class="Function">[]</a> <a id="938" class="Symbol">=</a> <a id="940" href="Data.Star.Pointer.html#1566" class="Function">this</a> <a id="945" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>

<a id="949" class="Keyword">infixr</a> <a id="956" class="Number">5</a> <a id="958" href="Data.Star.BoundedVec.html#963" class="Function Operator">_∷_</a>

<a id="_∷_"></a><a id="963" href="Data.Star.BoundedVec.html#963" class="Function Operator">_∷_</a> <a id="967" class="Symbol">:</a> <a id="969" class="Symbol">∀</a> <a id="971" class="Symbol">{</a><a id="972" href="Data.Star.BoundedVec.html#972" class="Bound">a</a> <a id="974" href="Data.Star.BoundedVec.html#974" class="Bound">n</a><a id="975" class="Symbol">}</a> <a id="977" class="Symbol">→</a> <a id="979" href="Data.Star.BoundedVec.html#972" class="Bound">a</a> <a id="981" class="Symbol">→</a> <a id="983" href="Data.Star.BoundedVec.html#828" class="Function">BoundedVec</a> <a id="994" href="Data.Star.BoundedVec.html#972" class="Bound">a</a> <a id="996" href="Data.Star.BoundedVec.html#974" class="Bound">n</a> <a id="998" class="Symbol">→</a> <a id="1000" href="Data.Star.BoundedVec.html#828" class="Function">BoundedVec</a> <a id="1011" href="Data.Star.BoundedVec.html#972" class="Bound">a</a> <a id="1013" class="Symbol">(</a><a id="1014" href="Data.Star.Nat.html#609" class="Function">suc</a> <a id="1018" href="Data.Star.BoundedVec.html#974" class="Bound">n</a><a id="1019" class="Symbol">)</a>
<a id="1021" href="Data.Star.BoundedVec.html#963" class="Function Operator">_∷_</a> <a id="1025" class="Symbol">=</a> <a id="1027" href="Data.Star.Pointer.html#1672" class="Function">that</a>

<a id="1033" class="Comment">------------------------------------------------------------------------</a>
<a id="1106" class="Comment">-- Increasing the bound</a>

<a id="1131" class="Comment">-- Note that this operation is linear in the length of the list.</a>

<a id="↑"></a><a id="1197" href="Data.Star.BoundedVec.html#1197" class="Function">↑</a> <a id="1199" class="Symbol">:</a> <a id="1201" class="Symbol">∀</a> <a id="1203" class="Symbol">{</a><a id="1204" href="Data.Star.BoundedVec.html#1204" class="Bound">a</a> <a id="1206" href="Data.Star.BoundedVec.html#1206" class="Bound">n</a><a id="1207" class="Symbol">}</a> <a id="1209" class="Symbol">→</a> <a id="1211" href="Data.Star.BoundedVec.html#828" class="Function">BoundedVec</a> <a id="1222" href="Data.Star.BoundedVec.html#1204" class="Bound">a</a> <a id="1224" href="Data.Star.BoundedVec.html#1206" class="Bound">n</a> <a id="1226" class="Symbol">→</a> <a id="1228" href="Data.Star.BoundedVec.html#828" class="Function">BoundedVec</a> <a id="1239" href="Data.Star.BoundedVec.html#1204" class="Bound">a</a> <a id="1241" class="Symbol">(</a><a id="1242" href="Data.Star.Nat.html#609" class="Function">suc</a> <a id="1246" href="Data.Star.BoundedVec.html#1206" class="Bound">n</a><a id="1247" class="Symbol">)</a>
<a id="1249" href="Data.Star.BoundedVec.html#1197" class="Function">↑</a> <a id="1251" class="Symbol">{</a><a id="1252" href="Data.Star.BoundedVec.html#1252" class="Bound">a</a><a id="1253" class="Symbol">}</a> <a id="1255" class="Symbol">=</a> <a id="1257" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1530" class="Function">gmap</a> <a id="1262" href="Data.Star.BoundedVec.html#1281" class="Function">inc</a> <a id="1266" href="Data.Star.BoundedVec.html#1319" class="Function">lift</a>
  <a id="1273" class="Keyword">where</a>
  <a id="1281" href="Data.Star.BoundedVec.html#1281" class="Function">inc</a> <a id="1285" class="Symbol">=</a> <a id="1287" href="Data.Maybe.Base.html#2020" class="Function">Maybe.map</a> <a id="1297" class="Symbol">(</a><a id="1298" href="Relation.Binary.Consequences.html#6107" class="Function">map-NonEmpty</a> <a id="1311" href="Data.Star.Nat.html#609" class="Function">suc</a><a id="1314" class="Symbol">)</a>

  <a id="1319" href="Data.Star.BoundedVec.html#1319" class="Function">lift</a> <a id="1324" class="Symbol">:</a> <a id="1326" href="Data.Star.Pointer.html#654" class="Datatype">Pointer</a> <a id="1334" class="Symbol">(λ</a> <a id="1337" href="Data.Star.BoundedVec.html#1337" class="Bound">_</a> <a id="1339" class="Symbol">→</a> <a id="1341" href="Data.Star.BoundedVec.html#1252" class="Bound">a</a><a id="1342" class="Symbol">)</a> <a id="1344" class="Symbol">(λ</a> <a id="1347" href="Data.Star.BoundedVec.html#1347" class="Bound">_</a> <a id="1349" class="Symbol">→</a> <a id="1351" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="1352" class="Symbol">)</a> <a id="1354" href="Relation.Binary.Core.html#1460" class="Function Operator">=[</a> <a id="1357" href="Data.Star.BoundedVec.html#1281" class="Function">inc</a> <a id="1361" href="Relation.Binary.Core.html#1460" class="Function Operator">]⇒</a>
         <a id="1373" href="Data.Star.Pointer.html#654" class="Datatype">Pointer</a> <a id="1381" class="Symbol">(λ</a> <a id="1384" href="Data.Star.BoundedVec.html#1384" class="Bound">_</a> <a id="1386" class="Symbol">→</a> <a id="1388" href="Data.Star.BoundedVec.html#1252" class="Bound">a</a><a id="1389" class="Symbol">)</a> <a id="1391" class="Symbol">(λ</a> <a id="1394" href="Data.Star.BoundedVec.html#1394" class="Bound">_</a> <a id="1396" class="Symbol">→</a> <a id="1398" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="1399" class="Symbol">)</a>
  <a id="1403" href="Data.Star.BoundedVec.html#1319" class="Function">lift</a> <a id="1408" class="Symbol">(</a><a id="1409" href="Data.Star.Pointer.html#798" class="InductiveConstructor">step</a> <a id="1414" href="Data.Star.BoundedVec.html#1414" class="Bound">x</a><a id="1415" class="Symbol">)</a> <a id="1417" class="Symbol">=</a> <a id="1419" href="Data.Star.Pointer.html#798" class="InductiveConstructor">step</a> <a id="1424" href="Data.Star.BoundedVec.html#1414" class="Bound">x</a>
  <a id="1428" href="Data.Star.BoundedVec.html#1319" class="Function">lift</a> <a id="1433" class="Symbol">(</a><a id="1434" href="Data.Star.Pointer.html#961" class="InductiveConstructor">done</a> <a id="1439" class="Symbol">_)</a> <a id="1442" class="Symbol">=</a> <a id="1444" href="Data.Star.Pointer.html#961" class="InductiveConstructor">done</a> <a id="1449" class="Symbol">_</a>

<a id="1452" class="Comment">------------------------------------------------------------------------</a>
<a id="1525" class="Comment">-- Conversions</a>

<a id="fromList"></a><a id="1541" href="Data.Star.BoundedVec.html#1541" class="Function">fromList</a> <a id="1550" class="Symbol">:</a> <a id="1552" class="Symbol">∀</a> <a id="1554" class="Symbol">{</a><a id="1555" href="Data.Star.BoundedVec.html#1555" class="Bound">a</a><a id="1556" class="Symbol">}</a> <a id="1558" class="Symbol">→</a> <a id="1560" class="Symbol">(</a><a id="1561" href="Data.Star.BoundedVec.html#1561" class="Bound">xs</a> <a id="1564" class="Symbol">:</a> <a id="1566" href="Data.Star.List.html#560" class="Function">List</a> <a id="1571" href="Data.Star.BoundedVec.html#1555" class="Bound">a</a><a id="1572" class="Symbol">)</a> <a id="1574" class="Symbol">→</a> <a id="1576" href="Data.Star.BoundedVec.html#828" class="Function">BoundedVec</a> <a id="1587" href="Data.Star.BoundedVec.html#1555" class="Bound">a</a> <a id="1589" class="Symbol">(</a><a id="1590" href="Data.Star.Nat.html#665" class="Function">length</a> <a id="1597" href="Data.Star.BoundedVec.html#1561" class="Bound">xs</a><a id="1599" class="Symbol">)</a>
<a id="1601" href="Data.Star.BoundedVec.html#1541" class="Function">fromList</a> <a id="1610" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#551" class="InductiveConstructor">ε</a>        <a id="1619" class="Symbol">=</a> <a id="1621" href="Data.Star.BoundedVec.html#905" class="Function">[]</a>
<a id="1624" href="Data.Star.BoundedVec.html#1541" class="Function">fromList</a> <a id="1633" class="Symbol">(</a><a id="1634" href="Data.Star.BoundedVec.html#1634" class="Bound">x</a> <a id="1636" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#578" class="InductiveConstructor Operator">◅</a> <a id="1638" href="Data.Star.BoundedVec.html#1638" class="Bound">xs</a><a id="1640" class="Symbol">)</a> <a id="1642" class="Symbol">=</a> <a id="1644" href="Data.Star.BoundedVec.html#1634" class="Bound">x</a> <a id="1646" href="Data.Star.BoundedVec.html#963" class="Function Operator">∷</a> <a id="1648" href="Data.Star.BoundedVec.html#1541" class="Function">fromList</a> <a id="1657" href="Data.Star.BoundedVec.html#1638" class="Bound">xs</a>

<a id="toList"></a><a id="1661" href="Data.Star.BoundedVec.html#1661" class="Function">toList</a> <a id="1668" class="Symbol">:</a> <a id="1670" class="Symbol">∀</a> <a id="1672" class="Symbol">{</a><a id="1673" href="Data.Star.BoundedVec.html#1673" class="Bound">a</a> <a id="1675" href="Data.Star.BoundedVec.html#1675" class="Bound">n</a><a id="1676" class="Symbol">}</a> <a id="1678" class="Symbol">→</a> <a id="1680" href="Data.Star.BoundedVec.html#828" class="Function">BoundedVec</a> <a id="1691" href="Data.Star.BoundedVec.html#1673" class="Bound">a</a> <a id="1693" href="Data.Star.BoundedVec.html#1675" class="Bound">n</a> <a id="1695" class="Symbol">→</a> <a id="1697" href="Data.Star.List.html#560" class="Function">List</a> <a id="1702" href="Data.Star.BoundedVec.html#1673" class="Bound">a</a>
<a id="1704" href="Data.Star.BoundedVec.html#1661" class="Function">toList</a> <a id="1711" href="Data.Star.BoundedVec.html#1711" class="Bound">xs</a> <a id="1714" class="Symbol">=</a> <a id="1716" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1530" class="Function">gmap</a> <a id="1721" class="Symbol">(</a><a id="1722" href="Function.Base.html#636" class="Function">const</a> <a id="1728" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1730" class="Symbol">)</a> <a id="1732" href="Data.Star.Decoration.html#1303" class="Function">decoration</a> <a id="1743" class="Symbol">(</a><a id="1744" href="Data.Star.Pointer.html#2897" class="Function">init</a> <a id="1749" href="Data.Star.BoundedVec.html#1711" class="Bound">xs</a><a id="1751" class="Symbol">)</a>
</pre></body></html>