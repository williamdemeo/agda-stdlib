<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Cofin</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- &quot;Finite&quot; sets indexed on coinductive &quot;natural&quot; numbers</a>
<a id="164" class="Comment">------------------------------------------------------------------------</a>

<a id="238" class="Symbol">{-#</a> <a id="242" class="Keyword">OPTIONS</a> <a id="250" class="Pragma">--without-K</a> <a id="262" class="Pragma">--sized-types</a> <a id="276" class="Symbol">#-}</a>

<a id="281" class="Keyword">module</a> <a id="288" href="Codata.Cofin.html" class="Module">Codata.Cofin</a> <a id="301" class="Keyword">where</a>

<a id="308" class="Keyword">open</a> <a id="313" class="Keyword">import</a> <a id="320" href="Size.html" class="Module">Size</a>
<a id="325" class="Keyword">open</a> <a id="330" class="Keyword">import</a> <a id="337" href="Codata.Thunk.html" class="Module">Codata.Thunk</a>
<a id="350" class="Keyword">open</a> <a id="355" class="Keyword">import</a> <a id="362" href="Codata.Conat.html" class="Module">Codata.Conat</a> <a id="375" class="Symbol">as</a> <a id="378" class="Module">Conat</a>
  <a id="386" class="Keyword">using</a> <a id="392" class="Symbol">(</a><a id="393" href="Codata.Conat.html#520" class="Datatype">Conat</a><a id="398" class="Symbol">;</a> <a id="400" href="Codata.Conat.html#551" class="InductiveConstructor">zero</a><a id="404" class="Symbol">;</a> <a id="406" href="Codata.Conat.html#568" class="InductiveConstructor">suc</a><a id="409" class="Symbol">;</a> <a id="411" href="Codata.Conat.html#599" class="Function">infinity</a><a id="419" class="Symbol">;</a> <a id="421" href="Codata.Conat.html#2363" class="Function Operator">_ℕ&lt;_</a><a id="425" class="Symbol">;</a> <a id="427" href="Codata.Conat.html#2314" class="InductiveConstructor">sℕ≤s</a><a id="431" class="Symbol">;</a> <a id="433" href="Codata.Conat.html#2409" class="Function Operator">_ℕ≤infinity</a><a id="444" class="Symbol">)</a>
<a id="446" class="Keyword">open</a> <a id="451" class="Keyword">import</a> <a id="458" href="Codata.Conat.Bisimilarity.html" class="Module">Codata.Conat.Bisimilarity</a> <a id="484" class="Symbol">as</a> <a id="487" class="Module">Bisim</a> <a id="493" class="Keyword">using</a> <a id="499" class="Symbol">(</a><a id="500" href="Codata.Conat.Bisimilarity.html#1273" class="Datatype Operator">_⊢_≲_</a> <a id="506" class="Symbol">;</a> <a id="508" href="Codata.Conat.Bisimilarity.html#1342" class="InductiveConstructor">s≲s</a><a id="511" class="Symbol">)</a>
<a id="513" class="Keyword">open</a> <a id="518" class="Keyword">import</a> <a id="525" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="539" class="Keyword">open</a> <a id="544" class="Keyword">import</a> <a id="551" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a> <a id="565" class="Symbol">as</a> <a id="568" class="Module">Fin</a> <a id="572" class="Keyword">hiding</a> <a id="579" class="Symbol">(</a><a id="580" href="Data.Fin.Base.html#1867" class="Function">fromℕ</a><a id="585" class="Symbol">;</a> <a id="587" href="Data.Fin.Base.html#8488" class="Function">fromℕ≤</a><a id="593" class="Symbol">;</a> <a id="595" href="Data.Fin.Base.html#1973" class="Function">fromℕ&lt;</a><a id="601" class="Symbol">;</a> <a id="603" href="Data.Fin.Base.html#1252" class="Function">toℕ</a><a id="606" class="Symbol">)</a>
<a id="608" class="Keyword">open</a> <a id="613" class="Keyword">import</a> <a id="620" href="Function.html" class="Module">Function</a>
<a id="629" class="Keyword">open</a> <a id="634" class="Keyword">import</a> <a id="641" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>

<a id="680" class="Comment">------------------------------------------------------------------------</a>
<a id="753" class="Comment">-- The type</a>

<a id="766" class="Comment">-- Note that `Cofin infnity` is /not/ finite. Note also that this is not a</a>
<a id="841" class="Comment">-- coinductive type, but it is indexed on a coinductive type.</a>

<a id="904" class="Keyword">data</a> <a id="Cofin"></a><a id="909" href="Codata.Cofin.html#909" class="Datatype">Cofin</a> <a id="915" class="Symbol">:</a> <a id="917" href="Codata.Conat.html#520" class="Datatype">Conat</a> <a id="923" href="Agda.Builtin.Size.html#304" class="Postulate">∞</a> <a id="925" class="Symbol">→</a> <a id="927" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="931" class="Keyword">where</a>
  <a id="Cofin.zero"></a><a id="939" href="Codata.Cofin.html#939" class="InductiveConstructor">zero</a> <a id="944" class="Symbol">:</a> <a id="946" class="Symbol">∀</a> <a id="948" class="Symbol">{</a><a id="949" href="Codata.Cofin.html#949" class="Bound">n</a><a id="950" class="Symbol">}</a> <a id="952" class="Symbol">→</a> <a id="954" href="Codata.Cofin.html#909" class="Datatype">Cofin</a> <a id="960" class="Symbol">(</a><a id="961" href="Codata.Conat.html#568" class="InductiveConstructor">suc</a> <a id="965" href="Codata.Cofin.html#949" class="Bound">n</a><a id="966" class="Symbol">)</a>
  <a id="Cofin.suc"></a><a id="970" href="Codata.Cofin.html#970" class="InductiveConstructor">suc</a>  <a id="975" class="Symbol">:</a> <a id="977" class="Symbol">∀</a> <a id="979" class="Symbol">{</a><a id="980" href="Codata.Cofin.html#980" class="Bound">n</a><a id="981" class="Symbol">}</a> <a id="983" class="Symbol">→</a> <a id="985" href="Codata.Cofin.html#909" class="Datatype">Cofin</a> <a id="991" class="Symbol">(</a><a id="992" href="Codata.Cofin.html#980" class="Bound">n</a> <a id="994" class="Symbol">.</a><a id="995" href="Codata.Thunk.html#541" class="Field">force</a><a id="1000" class="Symbol">)</a> <a id="1002" class="Symbol">→</a> <a id="1004" href="Codata.Cofin.html#909" class="Datatype">Cofin</a> <a id="1010" class="Symbol">(</a><a id="1011" href="Codata.Conat.html#568" class="InductiveConstructor">suc</a> <a id="1015" href="Codata.Cofin.html#980" class="Bound">n</a><a id="1016" class="Symbol">)</a>

<a id="suc-injective"></a><a id="1019" href="Codata.Cofin.html#1019" class="Function">suc-injective</a> <a id="1033" class="Symbol">:</a> <a id="1035" class="Symbol">∀</a> <a id="1037" class="Symbol">{</a><a id="1038" href="Codata.Cofin.html#1038" class="Bound">n</a><a id="1039" class="Symbol">}</a> <a id="1041" class="Symbol">{</a><a id="1042" href="Codata.Cofin.html#1042" class="Bound">p</a> <a id="1044" href="Codata.Cofin.html#1044" class="Bound">q</a> <a id="1046" class="Symbol">:</a> <a id="1048" href="Codata.Cofin.html#909" class="Datatype">Cofin</a> <a id="1054" class="Symbol">(</a><a id="1055" href="Codata.Cofin.html#1038" class="Bound">n</a> <a id="1057" class="Symbol">.</a><a id="1058" href="Codata.Thunk.html#541" class="Field">force</a><a id="1063" class="Symbol">)}</a> <a id="1066" class="Symbol">→</a>
                <a id="1084" class="Symbol">(</a><a id="1085" href="Codata.Cofin.html#909" class="Datatype">Cofin</a> <a id="1091" class="Symbol">(</a><a id="1092" class="InductiveConstructor">suc</a> <a id="1096" href="Codata.Cofin.html#1038" class="Bound">n</a><a id="1097" class="Symbol">)</a> <a id="1099" href="Function.Base.html#4562" class="Function Operator">∋</a> <a id="1101" class="InductiveConstructor">suc</a> <a id="1105" href="Codata.Cofin.html#1042" class="Bound">p</a><a id="1106" class="Symbol">)</a> <a id="1108" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1110" class="InductiveConstructor">suc</a> <a id="1114" href="Codata.Cofin.html#1044" class="Bound">q</a> <a id="1116" class="Symbol">→</a> <a id="1118" href="Codata.Cofin.html#1042" class="Bound">p</a> <a id="1120" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1122" href="Codata.Cofin.html#1044" class="Bound">q</a>
<a id="1124" href="Codata.Cofin.html#1019" class="Function">suc-injective</a> <a id="1138" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="1143" class="Symbol">=</a> <a id="1145" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="1151" class="Comment">------------------------------------------------------------------------</a>
<a id="1224" class="Comment">-- Some operations</a>

<a id="fromℕ&lt;"></a><a id="1244" href="Codata.Cofin.html#1244" class="Function">fromℕ&lt;</a> <a id="1251" class="Symbol">:</a> <a id="1253" class="Symbol">∀</a> <a id="1255" class="Symbol">{</a><a id="1256" href="Codata.Cofin.html#1256" class="Bound">n</a> <a id="1258" href="Codata.Cofin.html#1258" class="Bound">k</a><a id="1259" class="Symbol">}</a> <a id="1261" class="Symbol">→</a> <a id="1263" href="Codata.Cofin.html#1258" class="Bound">k</a> <a id="1265" href="Codata.Conat.html#2363" class="Function Operator">ℕ&lt;</a> <a id="1268" href="Codata.Cofin.html#1256" class="Bound">n</a> <a id="1270" class="Symbol">→</a> <a id="1272" href="Codata.Cofin.html#909" class="Datatype">Cofin</a> <a id="1278" href="Codata.Cofin.html#1256" class="Bound">n</a>
<a id="1280" href="Codata.Cofin.html#1244" class="Function">fromℕ&lt;</a> <a id="1287" class="Symbol">{</a><a id="1288" href="Codata.Conat.html#551" class="InductiveConstructor">zero</a><a id="1292" class="Symbol">}</a>  <a id="1295" class="Symbol">()</a>
<a id="1298" href="Codata.Cofin.html#1244" class="Function">fromℕ&lt;</a> <a id="1305" class="Symbol">{</a><a id="1306" href="Codata.Conat.html#568" class="InductiveConstructor">suc</a> <a id="1310" href="Codata.Cofin.html#1310" class="Bound">n</a><a id="1311" class="Symbol">}</a> <a id="1313" class="Symbol">{</a><a id="1314" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="1318" class="Symbol">}</a>  <a id="1321" class="Symbol">(</a><a id="1322" href="Codata.Conat.html#2314" class="InductiveConstructor">sℕ≤s</a> <a id="1327" href="Codata.Cofin.html#1327" class="Bound">p</a><a id="1328" class="Symbol">)</a> <a id="1330" class="Symbol">=</a> <a id="1332" href="Codata.Cofin.html#939" class="InductiveConstructor">zero</a>
<a id="1337" href="Codata.Cofin.html#1244" class="Function">fromℕ&lt;</a> <a id="1344" class="Symbol">{</a><a id="1345" href="Codata.Conat.html#568" class="InductiveConstructor">suc</a> <a id="1349" href="Codata.Cofin.html#1349" class="Bound">n</a><a id="1350" class="Symbol">}</a> <a id="1352" class="Symbol">{</a><a id="1353" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1357" href="Codata.Cofin.html#1357" class="Bound">k</a><a id="1358" class="Symbol">}</a> <a id="1360" class="Symbol">(</a><a id="1361" href="Codata.Conat.html#2314" class="InductiveConstructor">sℕ≤s</a> <a id="1366" href="Codata.Cofin.html#1366" class="Bound">p</a><a id="1367" class="Symbol">)</a> <a id="1369" class="Symbol">=</a> <a id="1371" href="Codata.Cofin.html#970" class="InductiveConstructor">suc</a> <a id="1375" class="Symbol">(</a><a id="1376" href="Codata.Cofin.html#1244" class="Function">fromℕ&lt;</a> <a id="1383" href="Codata.Cofin.html#1366" class="Bound">p</a><a id="1384" class="Symbol">)</a>

<a id="fromℕ"></a><a id="1387" href="Codata.Cofin.html#1387" class="Function">fromℕ</a> <a id="1393" class="Symbol">:</a> <a id="1395" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1397" class="Symbol">→</a> <a id="1399" href="Codata.Cofin.html#909" class="Datatype">Cofin</a> <a id="1405" href="Codata.Conat.html#599" class="Function">infinity</a>
<a id="1414" href="Codata.Cofin.html#1387" class="Function">fromℕ</a> <a id="1420" href="Codata.Cofin.html#1420" class="Bound">k</a> <a id="1422" class="Symbol">=</a> <a id="1424" href="Codata.Cofin.html#1244" class="Function">fromℕ&lt;</a> <a id="1431" class="Symbol">(</a><a id="1432" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1436" href="Codata.Cofin.html#1420" class="Bound">k</a> <a id="1438" href="Codata.Conat.html#2409" class="Function Operator">ℕ≤infinity</a><a id="1448" class="Symbol">)</a>

<a id="toℕ"></a><a id="1451" href="Codata.Cofin.html#1451" class="Function">toℕ</a> <a id="1455" class="Symbol">:</a> <a id="1457" class="Symbol">∀</a> <a id="1459" class="Symbol">{</a><a id="1460" href="Codata.Cofin.html#1460" class="Bound">n</a><a id="1461" class="Symbol">}</a> <a id="1463" class="Symbol">→</a> <a id="1465" href="Codata.Cofin.html#909" class="Datatype">Cofin</a> <a id="1471" href="Codata.Cofin.html#1460" class="Bound">n</a> <a id="1473" class="Symbol">→</a> <a id="1475" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="1477" href="Codata.Cofin.html#1451" class="Function">toℕ</a> <a id="1481" href="Codata.Cofin.html#939" class="InductiveConstructor">zero</a>    <a id="1489" class="Symbol">=</a> <a id="1491" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>
<a id="1496" href="Codata.Cofin.html#1451" class="Function">toℕ</a> <a id="1500" class="Symbol">(</a><a id="1501" href="Codata.Cofin.html#970" class="InductiveConstructor">suc</a> <a id="1505" href="Codata.Cofin.html#1505" class="Bound">i</a><a id="1506" class="Symbol">)</a> <a id="1508" class="Symbol">=</a> <a id="1510" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1514" class="Symbol">(</a><a id="1515" href="Codata.Cofin.html#1451" class="Function">toℕ</a> <a id="1519" href="Codata.Cofin.html#1505" class="Bound">i</a><a id="1520" class="Symbol">)</a>

<a id="fromFin"></a><a id="1523" href="Codata.Cofin.html#1523" class="Function">fromFin</a> <a id="1531" class="Symbol">:</a> <a id="1533" class="Symbol">∀</a> <a id="1535" class="Symbol">{</a><a id="1536" href="Codata.Cofin.html#1536" class="Bound">n</a><a id="1537" class="Symbol">}</a> <a id="1539" class="Symbol">→</a> <a id="1541" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1545" href="Codata.Cofin.html#1536" class="Bound">n</a> <a id="1547" class="Symbol">→</a> <a id="1549" href="Codata.Cofin.html#909" class="Datatype">Cofin</a> <a id="1555" class="Symbol">(</a><a id="1556" href="Codata.Conat.html#668" class="Function">Conat.fromℕ</a> <a id="1568" href="Codata.Cofin.html#1536" class="Bound">n</a><a id="1569" class="Symbol">)</a>
<a id="1571" href="Codata.Cofin.html#1523" class="Function">fromFin</a> <a id="1579" href="Data.Fin.Base.html#1148" class="InductiveConstructor">zero</a>    <a id="1587" class="Symbol">=</a> <a id="1589" href="Codata.Cofin.html#939" class="InductiveConstructor">zero</a>
<a id="1594" href="Codata.Cofin.html#1523" class="Function">fromFin</a> <a id="1602" class="Symbol">(</a><a id="1603" href="Data.Fin.Base.html#1179" class="InductiveConstructor">suc</a> <a id="1607" href="Codata.Cofin.html#1607" class="Bound">i</a><a id="1608" class="Symbol">)</a> <a id="1610" class="Symbol">=</a> <a id="1612" href="Codata.Cofin.html#970" class="InductiveConstructor">suc</a> <a id="1616" class="Symbol">(</a><a id="1617" href="Codata.Cofin.html#1523" class="Function">fromFin</a> <a id="1625" href="Codata.Cofin.html#1607" class="Bound">i</a><a id="1626" class="Symbol">)</a>

<a id="toFin"></a><a id="1629" href="Codata.Cofin.html#1629" class="Function">toFin</a> <a id="1635" class="Symbol">:</a> <a id="1637" class="Symbol">∀</a> <a id="1639" href="Codata.Cofin.html#1639" class="Bound">n</a> <a id="1641" class="Symbol">→</a> <a id="1643" href="Codata.Cofin.html#909" class="Datatype">Cofin</a> <a id="1649" class="Symbol">(</a><a id="1650" href="Codata.Conat.html#668" class="Function">Conat.fromℕ</a> <a id="1662" href="Codata.Cofin.html#1639" class="Bound">n</a><a id="1663" class="Symbol">)</a> <a id="1665" class="Symbol">→</a> <a id="1667" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1671" href="Codata.Cofin.html#1639" class="Bound">n</a>
<a id="1673" href="Codata.Cofin.html#1629" class="Function">toFin</a> <a id="1679" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>    <a id="1687" class="Symbol">()</a>
<a id="1690" href="Codata.Cofin.html#1629" class="Function">toFin</a> <a id="1696" class="Symbol">(</a><a id="1697" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1701" href="Codata.Cofin.html#1701" class="Bound">n</a><a id="1702" class="Symbol">)</a> <a id="1704" href="Codata.Cofin.html#939" class="InductiveConstructor">zero</a>    <a id="1712" class="Symbol">=</a> <a id="1714" href="Data.Fin.Base.html#1148" class="InductiveConstructor">zero</a>
<a id="1719" href="Codata.Cofin.html#1629" class="Function">toFin</a> <a id="1725" class="Symbol">(</a><a id="1726" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1730" href="Codata.Cofin.html#1730" class="Bound">n</a><a id="1731" class="Symbol">)</a> <a id="1733" class="Symbol">(</a><a id="1734" href="Codata.Cofin.html#970" class="InductiveConstructor">suc</a> <a id="1738" href="Codata.Cofin.html#1738" class="Bound">i</a><a id="1739" class="Symbol">)</a> <a id="1741" class="Symbol">=</a> <a id="1743" href="Data.Fin.Base.html#1179" class="InductiveConstructor">suc</a> <a id="1747" class="Symbol">(</a><a id="1748" href="Codata.Cofin.html#1629" class="Function">toFin</a> <a id="1754" href="Codata.Cofin.html#1730" class="Bound">n</a> <a id="1756" href="Codata.Cofin.html#1738" class="Bound">i</a><a id="1757" class="Symbol">)</a>
</pre></body></html>