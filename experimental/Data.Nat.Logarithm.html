<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Nat.Logarithm</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">-----------------------------------------------------------------------</a>
<a id="73" class="Comment">-- The Agda standard library</a>
<a id="102" class="Comment">--</a>
<a id="105" class="Comment">-- Logarithm base 2 and respective properties</a>
<a id="151" class="Comment">------------------------------------------------------------------------</a>

<a id="225" class="Symbol">{-#</a> <a id="229" class="Keyword">OPTIONS</a> <a id="237" class="Pragma">--cubical-compatible</a> <a id="258" class="Pragma">--safe</a> <a id="265" class="Symbol">#-}</a>

<a id="270" class="Keyword">module</a> <a id="277" href="Data.Nat.Logarithm.html" class="Module">Data.Nat.Logarithm</a> <a id="296" class="Keyword">where</a>

<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="324" class="Keyword">open</a> <a id="329" class="Keyword">import</a> <a id="336" href="Data.Nat.Induction.html" class="Module">Data.Nat.Induction</a> <a id="355" class="Keyword">using</a> <a id="361" class="Symbol">(</a><a id="362" href="Data.Nat.Induction.html#2200" class="Function">&lt;-wellFounded</a><a id="375" class="Symbol">)</a>
<a id="377" class="Keyword">open</a> <a id="382" class="Keyword">import</a> <a id="389" href="Data.Nat.Logarithm.Core.html" class="Module">Data.Nat.Logarithm.Core</a>
<a id="413" class="Keyword">open</a> <a id="418" class="Keyword">import</a> <a id="425" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="463" class="Keyword">using</a> <a id="469" class="Symbol">(</a><a id="470" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="473" class="Symbol">)</a>

<a id="476" class="Comment">------------------------------------------------------------------------</a>
<a id="549" class="Comment">-- Logarithm base 2</a>

<a id="570" class="Comment">-- Floor version</a>

<a id="⌊log₂_⌋"></a><a id="588" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌊log₂_⌋</a> <a id="596" class="Symbol">:</a> <a id="598" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="600" class="Symbol">→</a> <a id="602" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="604" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌊log₂</a> <a id="610" href="Data.Nat.Logarithm.html#610" class="Bound">n</a> <a id="612" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌋</a> <a id="614" class="Symbol">=</a> <a id="616" href="Data.Nat.Logarithm.Core.html#661" class="Function">⌊log2⌋</a> <a id="623" href="Data.Nat.Logarithm.html#610" class="Bound">n</a> <a id="625" class="Symbol">(</a><a id="626" href="Data.Nat.Induction.html#2200" class="Function">&lt;-wellFounded</a> <a id="640" href="Data.Nat.Logarithm.html#610" class="Bound">n</a><a id="641" class="Symbol">)</a>

<a id="644" class="Comment">-- Ceil version</a>

<a id="⌈log₂_⌉"></a><a id="661" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌈log₂_⌉</a> <a id="669" class="Symbol">:</a> <a id="671" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="673" class="Symbol">→</a> <a id="675" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="677" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌈log₂</a> <a id="683" href="Data.Nat.Logarithm.html#683" class="Bound">n</a> <a id="685" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌉</a> <a id="687" class="Symbol">=</a> <a id="689" href="Data.Nat.Logarithm.Core.html#838" class="Function">⌈log2⌉</a> <a id="696" href="Data.Nat.Logarithm.html#683" class="Bound">n</a> <a id="698" class="Symbol">(</a><a id="699" href="Data.Nat.Induction.html#2200" class="Function">&lt;-wellFounded</a> <a id="713" href="Data.Nat.Logarithm.html#683" class="Bound">n</a><a id="714" class="Symbol">)</a>

<a id="717" class="Comment">------------------------------------------------------------------------</a>
<a id="790" class="Comment">-- Properties of ⌊log₂_⌋</a>

<a id="⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1"></a><a id="816" href="Data.Nat.Logarithm.html#816" class="Function">⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1</a> <a id="838" class="Symbol">:</a> <a id="840" class="Symbol">∀</a> <a id="842" href="Data.Nat.Logarithm.html#842" class="Bound">n</a> <a id="844" class="Symbol">→</a> <a id="846" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌊log₂</a> <a id="852" href="Data.Nat.Base.html#3631" class="Function Operator">⌊</a> <a id="854" href="Data.Nat.Logarithm.html#842" class="Bound">n</a> <a id="856" href="Data.Nat.Base.html#3631" class="Function Operator">/2⌋</a> <a id="860" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌋</a> <a id="862" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="864" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌊log₂</a> <a id="870" href="Data.Nat.Logarithm.html#842" class="Bound">n</a> <a id="872" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌋</a> <a id="874" href="Data.Nat.Base.html#3140" class="Primitive Operator">∸</a> <a id="876" class="Number">1</a>
<a id="878" href="Data.Nat.Logarithm.html#816" class="Function">⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1</a> <a id="900" href="Data.Nat.Logarithm.html#900" class="Bound">n</a> <a id="902" class="Symbol">=</a> <a id="904" href="Data.Nat.Logarithm.Core.html#1859" class="Function">⌊log2⌋⌊n/2⌋≡⌊log2⌋n∸1</a> <a id="926" href="Data.Nat.Logarithm.html#900" class="Bound">n</a>

<a id="⌊log₂[2*b]⌋≡1+⌊log₂b⌋"></a><a id="929" href="Data.Nat.Logarithm.html#929" class="Function">⌊log₂[2*b]⌋≡1+⌊log₂b⌋</a> <a id="951" class="Symbol">:</a> <a id="953" class="Symbol">∀</a> <a id="955" href="Data.Nat.Logarithm.html#955" class="Bound">n</a> <a id="957" class="Symbol">.{{</a><a id="960" href="Data.Nat.Logarithm.html#960" class="Bound">_</a> <a id="962" class="Symbol">:</a> <a id="964" href="Data.Nat.Base.html#2499" class="Record">NonZero</a> <a id="972" href="Data.Nat.Logarithm.html#955" class="Bound">n</a><a id="973" class="Symbol">}}</a> <a id="976" class="Symbol">→</a> <a id="978" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌊log₂</a> <a id="984" class="Symbol">(</a><a id="985" class="Number">2</a> <a id="987" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="989" href="Data.Nat.Logarithm.html#955" class="Bound">n</a><a id="990" class="Symbol">)</a> <a id="992" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌋</a> <a id="994" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="996" class="Number">1</a> <a id="998" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="1000" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌊log₂</a> <a id="1006" href="Data.Nat.Logarithm.html#955" class="Bound">n</a> <a id="1008" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌋</a>
<a id="1010" href="Data.Nat.Logarithm.html#929" class="Function">⌊log₂[2*b]⌋≡1+⌊log₂b⌋</a> <a id="1032" href="Data.Nat.Logarithm.html#1032" class="Bound">n</a> <a id="1034" class="Symbol">=</a> <a id="1036" href="Data.Nat.Logarithm.Core.html#2185" class="Function">⌊log2⌋2*b≡1+⌊log2⌋b</a> <a id="1056" href="Data.Nat.Logarithm.html#1032" class="Bound">n</a>

<a id="⌊log₂[2^n]⌋≡n"></a><a id="1059" href="Data.Nat.Logarithm.html#1059" class="Function">⌊log₂[2^n]⌋≡n</a> <a id="1073" class="Symbol">:</a> <a id="1075" class="Symbol">∀</a> <a id="1077" href="Data.Nat.Logarithm.html#1077" class="Bound">n</a> <a id="1079" class="Symbol">→</a> <a id="1081" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌊log₂</a> <a id="1087" class="Symbol">(</a><a id="1088" class="Number">2</a> <a id="1090" href="Data.Nat.Base.html#3820" class="Function Operator">^</a> <a id="1092" href="Data.Nat.Logarithm.html#1077" class="Bound">n</a><a id="1093" class="Symbol">)</a> <a id="1095" href="Data.Nat.Logarithm.html#588" class="Function Operator">⌋</a> <a id="1097" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1099" href="Data.Nat.Logarithm.html#1077" class="Bound">n</a>
<a id="1101" href="Data.Nat.Logarithm.html#1059" class="Function">⌊log₂[2^n]⌋≡n</a> <a id="1115" href="Data.Nat.Logarithm.html#1115" class="Bound">n</a> <a id="1117" class="Symbol">=</a> <a id="1119" href="Data.Nat.Logarithm.Core.html#2890" class="Function">⌊log2⌋2^n≡n</a> <a id="1131" href="Data.Nat.Logarithm.html#1115" class="Bound">n</a>

<a id="1134" class="Comment">------------------------------------------------------------------------</a>
<a id="1207" class="Comment">-- Properties of ⌈log₂_⌉</a>

<a id="⌈log₂⌉-mono-≤"></a><a id="1233" href="Data.Nat.Logarithm.html#1233" class="Function">⌈log₂⌉-mono-≤</a> <a id="1247" class="Symbol">:</a> <a id="1249" class="Symbol">∀</a> <a id="1251" class="Symbol">{</a><a id="1252" href="Data.Nat.Logarithm.html#1252" class="Bound">m</a> <a id="1254" href="Data.Nat.Logarithm.html#1254" class="Bound">n</a><a id="1255" class="Symbol">}</a> <a id="1257" class="Symbol">→</a> <a id="1259" href="Data.Nat.Logarithm.html#1252" class="Bound">m</a> <a id="1261" href="Data.Nat.Base.html#1473" class="Datatype Operator">≤</a> <a id="1263" href="Data.Nat.Logarithm.html#1254" class="Bound">n</a> <a id="1265" class="Symbol">→</a> <a id="1267" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌈log₂</a> <a id="1273" href="Data.Nat.Logarithm.html#1252" class="Bound">m</a> <a id="1275" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌉</a> <a id="1277" href="Data.Nat.Base.html#1473" class="Datatype Operator">≤</a> <a id="1279" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌈log₂</a> <a id="1285" href="Data.Nat.Logarithm.html#1254" class="Bound">n</a> <a id="1287" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌉</a>
<a id="1289" href="Data.Nat.Logarithm.html#1233" class="Function">⌈log₂⌉-mono-≤</a> <a id="1303" href="Data.Nat.Logarithm.html#1303" class="Bound">p</a> <a id="1305" class="Symbol">=</a> <a id="1307" href="Data.Nat.Logarithm.Core.html#3796" class="Function">⌈log2⌉-mono-≤</a> <a id="1321" href="Data.Nat.Logarithm.html#1303" class="Bound">p</a>

<a id="⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1"></a><a id="1324" href="Data.Nat.Logarithm.html#1324" class="Function">⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1</a> <a id="1346" class="Symbol">:</a> <a id="1348" class="Symbol">∀</a> <a id="1350" href="Data.Nat.Logarithm.html#1350" class="Bound">n</a> <a id="1352" class="Symbol">→</a> <a id="1354" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌈log₂</a> <a id="1360" href="Data.Nat.Base.html#3758" class="Function Operator">⌈</a> <a id="1362" href="Data.Nat.Logarithm.html#1350" class="Bound">n</a> <a id="1364" href="Data.Nat.Base.html#3758" class="Function Operator">/2⌉</a> <a id="1368" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌉</a> <a id="1370" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1372" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌈log₂</a> <a id="1378" href="Data.Nat.Logarithm.html#1350" class="Bound">n</a> <a id="1380" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌉</a> <a id="1382" href="Data.Nat.Base.html#3140" class="Primitive Operator">∸</a> <a id="1384" class="Number">1</a>
<a id="1386" href="Data.Nat.Logarithm.html#1324" class="Function">⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1</a> <a id="1408" href="Data.Nat.Logarithm.html#1408" class="Bound">n</a> <a id="1410" class="Symbol">=</a> <a id="1412" href="Data.Nat.Logarithm.Core.html#4095" class="Function">⌈log2⌉⌈n/2⌉≡⌈log2⌉n∸1</a> <a id="1434" href="Data.Nat.Logarithm.html#1408" class="Bound">n</a>

<a id="⌈log₂2*n⌉≡1+⌈log₂n⌉"></a><a id="1437" href="Data.Nat.Logarithm.html#1437" class="Function">⌈log₂2*n⌉≡1+⌈log₂n⌉</a> <a id="1457" class="Symbol">:</a> <a id="1459" class="Symbol">∀</a> <a id="1461" href="Data.Nat.Logarithm.html#1461" class="Bound">n</a> <a id="1463" class="Symbol">.{{</a><a id="1466" href="Data.Nat.Logarithm.html#1466" class="Bound">_</a> <a id="1468" class="Symbol">:</a> <a id="1470" href="Data.Nat.Base.html#2499" class="Record">NonZero</a> <a id="1478" href="Data.Nat.Logarithm.html#1461" class="Bound">n</a><a id="1479" class="Symbol">}}</a> <a id="1482" class="Symbol">→</a> <a id="1484" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌈log₂</a> <a id="1490" class="Symbol">(</a><a id="1491" class="Number">2</a> <a id="1493" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="1495" href="Data.Nat.Logarithm.html#1461" class="Bound">n</a><a id="1496" class="Symbol">)</a> <a id="1498" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌉</a> <a id="1500" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1502" class="Number">1</a> <a id="1504" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="1506" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌈log₂</a> <a id="1512" href="Data.Nat.Logarithm.html#1461" class="Bound">n</a> <a id="1514" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌉</a>
<a id="1516" href="Data.Nat.Logarithm.html#1437" class="Function">⌈log₂2*n⌉≡1+⌈log₂n⌉</a> <a id="1536" href="Data.Nat.Logarithm.html#1536" class="Bound">n</a> <a id="1538" class="Symbol">=</a> <a id="1540" href="Data.Nat.Logarithm.Core.html#4425" class="Function">⌈log2⌉2*n≡1+⌈log2⌉n</a> <a id="1560" href="Data.Nat.Logarithm.html#1536" class="Bound">n</a>

<a id="⌈log₂2^n⌉≡n"></a><a id="1563" href="Data.Nat.Logarithm.html#1563" class="Function">⌈log₂2^n⌉≡n</a> <a id="1575" class="Symbol">:</a> <a id="1577" class="Symbol">∀</a> <a id="1579" href="Data.Nat.Logarithm.html#1579" class="Bound">n</a> <a id="1581" class="Symbol">→</a> <a id="1583" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌈log₂</a> <a id="1589" class="Symbol">(</a><a id="1590" class="Number">2</a> <a id="1592" href="Data.Nat.Base.html#3820" class="Function Operator">^</a> <a id="1594" href="Data.Nat.Logarithm.html#1579" class="Bound">n</a><a id="1595" class="Symbol">)</a> <a id="1597" href="Data.Nat.Logarithm.html#661" class="Function Operator">⌉</a> <a id="1599" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1601" href="Data.Nat.Logarithm.html#1579" class="Bound">n</a>
<a id="1603" href="Data.Nat.Logarithm.html#1563" class="Function">⌈log₂2^n⌉≡n</a> <a id="1615" href="Data.Nat.Logarithm.html#1615" class="Bound">n</a> <a id="1617" class="Symbol">=</a> <a id="1619" href="Data.Nat.Logarithm.Core.html#5129" class="Function">⌈log2⌉2^n≡n</a> <a id="1631" href="Data.Nat.Logarithm.html#1615" class="Bound">n</a>
</pre></body></html>