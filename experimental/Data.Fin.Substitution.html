<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Fin.Substitution</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Substitutions</a>
<a id="123" class="Comment">------------------------------------------------------------------------</a>

<a id="197" class="Comment">-- Uses a variant of Conor McBride&#39;s technique from &quot;Type-Preserving</a>
<a id="266" class="Comment">-- Renaming and Substitution&quot;.</a>

<a id="298" class="Comment">-- See Data.Fin.Substitution.Example for an example of how this module</a>
<a id="369" class="Comment">-- can be used: a definition of substitution for the untyped</a>
<a id="430" class="Comment">-- λ-calculus.</a>

<a id="446" class="Symbol">{-#</a> <a id="450" class="Keyword">OPTIONS</a> <a id="458" class="Pragma">--cubical-compatible</a> <a id="479" class="Pragma">--safe</a> <a id="486" class="Symbol">#-}</a>

<a id="491" class="Keyword">module</a> <a id="498" href="Data.Fin.Substitution.html" class="Module">Data.Fin.Substitution</a> <a id="520" class="Keyword">where</a>

<a id="527" class="Keyword">open</a> <a id="532" class="Keyword">import</a> <a id="539" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="553" class="Keyword">hiding</a> <a id="560" class="Symbol">(</a><a id="561" href="Data.Nat.Base.html#3412" class="Function Operator">_⊔_</a><a id="564" class="Symbol">;</a> <a id="566" href="Data.Nat.Base.html#4061" class="Function Operator">_/_</a><a id="569" class="Symbol">)</a>
<a id="571" class="Keyword">open</a> <a id="576" class="Keyword">import</a> <a id="583" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a> <a id="597" class="Keyword">using</a> <a id="603" class="Symbol">(</a><a id="604" href="Data.Fin.Base.html#1212" class="Datatype">Fin</a><a id="607" class="Symbol">;</a> <a id="609" href="Data.Fin.Base.html#1234" class="InductiveConstructor">zero</a><a id="613" class="Symbol">;</a> <a id="615" href="Data.Fin.Base.html#1255" class="InductiveConstructor">suc</a><a id="618" class="Symbol">)</a>
<a id="620" class="Keyword">open</a> <a id="625" class="Keyword">import</a> <a id="632" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a>
<a id="646" class="Keyword">open</a> <a id="651" class="Keyword">import</a> <a id="658" href="Function.Base.html" class="Module">Function.Base</a> <a id="672" class="Symbol">as</a> <a id="675" class="Module">Fun</a> <a id="679" class="Keyword">using</a> <a id="685" class="Symbol">(</a><a id="686" href="Function.Base.html#1638" class="Function">flip</a><a id="690" class="Symbol">)</a>
<a id="692" class="Keyword">open</a> <a id="697" class="Keyword">import</a> <a id="704" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html" class="Module">Relation.Binary.Construct.Closure.ReflexiveTransitive</a>
  <a id="760" class="Symbol">as</a> <a id="763" class="Module">Star</a> <a id="768" class="Keyword">using</a> <a id="774" class="Symbol">(</a><a id="775" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#499" class="Datatype">Star</a><a id="779" class="Symbol">;</a> <a id="781" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#560" class="InductiveConstructor">ε</a><a id="782" class="Symbol">;</a> <a id="784" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#587" class="InductiveConstructor Operator">_◅_</a><a id="787" class="Symbol">)</a>
<a id="789" class="Keyword">open</a> <a id="794" class="Keyword">import</a> <a id="801" href="Level.html" class="Module">Level</a> <a id="807" class="Keyword">using</a> <a id="813" class="Symbol">(</a><a id="814" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="819" class="Symbol">;</a> <a id="821" href="Agda.Primitive.html#804" class="Primitive Operator">_⊔_</a><a id="824" class="Symbol">;</a> <a id="826" href="Level.html#521" class="Function">0ℓ</a><a id="828" class="Symbol">)</a>
<a id="830" class="Keyword">open</a> <a id="835" class="Keyword">import</a> <a id="842" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="857" class="Keyword">using</a> <a id="863" class="Symbol">(</a><a id="864" href="Relation.Unary.html#1110" class="Function">Pred</a><a id="868" class="Symbol">)</a>

<a id="871" class="Comment">------------------------------------------------------------------------</a>
<a id="944" class="Comment">-- General functionality</a>

<a id="970" class="Comment">-- A Sub T m n is a substitution which, when applied to something with</a>
<a id="1041" class="Comment">-- at most m variables, yields something with at most n variables.</a>

<a id="Sub"></a><a id="1109" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="1113" class="Symbol">:</a> <a id="1115" class="Symbol">∀</a> <a id="1117" class="Symbol">{</a><a id="1118" href="Data.Fin.Substitution.html#1118" class="Bound">ℓ</a><a id="1119" class="Symbol">}</a> <a id="1121" class="Symbol">→</a> <a id="1123" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="1128" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1130" href="Data.Fin.Substitution.html#1118" class="Bound">ℓ</a> <a id="1132" class="Symbol">→</a> <a id="1134" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1136" class="Symbol">→</a> <a id="1138" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1140" class="Symbol">→</a> <a id="1142" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1146" href="Data.Fin.Substitution.html#1118" class="Bound">ℓ</a>
<a id="1148" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="1152" href="Data.Fin.Substitution.html#1152" class="Bound">T</a> <a id="1154" href="Data.Fin.Substitution.html#1154" class="Bound">m</a> <a id="1156" href="Data.Fin.Substitution.html#1156" class="Bound">n</a> <a id="1158" class="Symbol">=</a> <a id="1160" href="Data.Vec.Base.html#1066" class="Datatype">Vec</a> <a id="1164" class="Symbol">(</a><a id="1165" href="Data.Fin.Substitution.html#1152" class="Bound">T</a> <a id="1167" href="Data.Fin.Substitution.html#1156" class="Bound">n</a><a id="1168" class="Symbol">)</a> <a id="1170" href="Data.Fin.Substitution.html#1154" class="Bound">m</a>

<a id="1173" class="Comment">-- A /reversed/ sequence of matching substitutions.</a>

<a id="Subs"></a><a id="1226" href="Data.Fin.Substitution.html#1226" class="Function">Subs</a> <a id="1231" class="Symbol">:</a> <a id="1233" class="Symbol">∀</a> <a id="1235" class="Symbol">{</a><a id="1236" href="Data.Fin.Substitution.html#1236" class="Bound">ℓ</a><a id="1237" class="Symbol">}</a> <a id="1239" class="Symbol">→</a> <a id="1241" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="1246" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1248" href="Data.Fin.Substitution.html#1236" class="Bound">ℓ</a> <a id="1250" class="Symbol">→</a> <a id="1252" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1254" class="Symbol">→</a> <a id="1256" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1258" class="Symbol">→</a> <a id="1260" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1264" href="Data.Fin.Substitution.html#1236" class="Bound">ℓ</a>
<a id="1266" href="Data.Fin.Substitution.html#1226" class="Function">Subs</a> <a id="1271" href="Data.Fin.Substitution.html#1271" class="Bound">T</a> <a id="1273" class="Symbol">=</a> <a id="1275" href="Function.Base.html#1638" class="Function">flip</a> <a id="1280" class="Symbol">(</a><a id="1281" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#499" class="Datatype">Star</a> <a id="1286" class="Symbol">(</a><a id="1287" href="Function.Base.html#1638" class="Function">flip</a> <a id="1292" class="Symbol">(</a><a id="1293" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="1297" href="Data.Fin.Substitution.html#1271" class="Bound">T</a><a id="1298" class="Symbol">)))</a>

<a id="1303" class="Comment">-- Some simple substitutions.</a>

<a id="1334" class="Keyword">record</a> <a id="Simple"></a><a id="1341" href="Data.Fin.Substitution.html#1341" class="Record">Simple</a> <a id="1348" class="Symbol">{</a><a id="1349" href="Data.Fin.Substitution.html#1349" class="Bound">ℓ</a> <a id="1351" class="Symbol">:</a> <a id="1353" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="1358" class="Symbol">}</a> <a id="1360" class="Symbol">(</a><a id="1361" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="1363" class="Symbol">:</a> <a id="1365" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="1370" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1372" href="Data.Fin.Substitution.html#1349" class="Bound">ℓ</a><a id="1373" class="Symbol">)</a> <a id="1375" class="Symbol">:</a> <a id="1377" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1381" href="Data.Fin.Substitution.html#1349" class="Bound">ℓ</a> <a id="1383" class="Keyword">where</a>
  <a id="1391" class="Keyword">infix</a>  <a id="1398" class="Number">10</a> <a id="1401" href="Data.Fin.Substitution.html#1570" class="Function Operator">_↑</a>
  <a id="1406" class="Keyword">infixl</a> <a id="1413" class="Number">10</a> <a id="1416" href="Data.Fin.Substitution.html#1654" class="Function Operator">_↑⋆_</a> <a id="1421" href="Data.Fin.Substitution.html#1757" class="Function Operator">_↑✶_</a>

  <a id="1429" class="Keyword">field</a>
    <a id="Simple.var"></a><a id="1439" href="Data.Fin.Substitution.html#1439" class="Field">var</a>    <a id="1446" class="Symbol">:</a> <a id="1448" class="Symbol">∀</a> <a id="1450" class="Symbol">{</a><a id="1451" href="Data.Fin.Substitution.html#1451" class="Bound">n</a><a id="1452" class="Symbol">}</a> <a id="1454" class="Symbol">→</a> <a id="1456" href="Data.Fin.Base.html#1212" class="Datatype">Fin</a> <a id="1460" href="Data.Fin.Substitution.html#1451" class="Bound">n</a> <a id="1462" class="Symbol">→</a> <a id="1464" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="1466" href="Data.Fin.Substitution.html#1451" class="Bound">n</a>      <a id="1473" class="Comment">-- Takes variables to Ts.</a>
    <a id="Simple.weaken"></a><a id="1503" href="Data.Fin.Substitution.html#1503" class="Field">weaken</a> <a id="1510" class="Symbol">:</a> <a id="1512" class="Symbol">∀</a> <a id="1514" class="Symbol">{</a><a id="1515" href="Data.Fin.Substitution.html#1515" class="Bound">n</a><a id="1516" class="Symbol">}</a> <a id="1518" class="Symbol">→</a> <a id="1520" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="1522" href="Data.Fin.Substitution.html#1515" class="Bound">n</a> <a id="1524" class="Symbol">→</a> <a id="1526" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="1528" class="Symbol">(</a><a id="1529" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1533" href="Data.Fin.Substitution.html#1515" class="Bound">n</a><a id="1534" class="Symbol">)</a>  <a id="1537" class="Comment">-- Weakens Ts.</a>

  <a id="1555" class="Comment">-- Lifting.</a>

  <a id="Simple._↑"></a><a id="1570" href="Data.Fin.Substitution.html#1570" class="Function Operator">_↑</a> <a id="1573" class="Symbol">:</a> <a id="1575" class="Symbol">∀</a> <a id="1577" class="Symbol">{</a><a id="1578" href="Data.Fin.Substitution.html#1578" class="Bound">m</a> <a id="1580" href="Data.Fin.Substitution.html#1580" class="Bound">n</a><a id="1581" class="Symbol">}</a> <a id="1583" class="Symbol">→</a> <a id="1585" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="1589" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="1591" href="Data.Fin.Substitution.html#1578" class="Bound">m</a> <a id="1593" href="Data.Fin.Substitution.html#1580" class="Bound">n</a> <a id="1595" class="Symbol">→</a> <a id="1597" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="1601" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="1603" class="Symbol">(</a><a id="1604" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1608" href="Data.Fin.Substitution.html#1578" class="Bound">m</a><a id="1609" class="Symbol">)</a> <a id="1611" class="Symbol">(</a><a id="1612" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1616" href="Data.Fin.Substitution.html#1580" class="Bound">n</a><a id="1617" class="Symbol">)</a>
  <a id="1621" href="Data.Fin.Substitution.html#1621" class="Bound">ρ</a> <a id="1623" href="Data.Fin.Substitution.html#1570" class="Function Operator">↑</a> <a id="1625" class="Symbol">=</a> <a id="1627" href="Data.Fin.Substitution.html#1439" class="Field">var</a> <a id="1631" href="Data.Fin.Base.html#1234" class="InductiveConstructor">zero</a> <a id="1636" href="Data.Vec.Base.html#1121" class="InductiveConstructor Operator">∷</a> <a id="1638" href="Data.Vec.Base.html#2792" class="Function">map</a> <a id="1642" href="Data.Fin.Substitution.html#1503" class="Field">weaken</a> <a id="1649" href="Data.Fin.Substitution.html#1621" class="Bound">ρ</a>

  <a id="Simple._↑⋆_"></a><a id="1654" href="Data.Fin.Substitution.html#1654" class="Function Operator">_↑⋆_</a> <a id="1659" class="Symbol">:</a> <a id="1661" class="Symbol">∀</a> <a id="1663" class="Symbol">{</a><a id="1664" href="Data.Fin.Substitution.html#1664" class="Bound">m</a> <a id="1666" href="Data.Fin.Substitution.html#1666" class="Bound">n</a><a id="1667" class="Symbol">}</a> <a id="1669" class="Symbol">→</a> <a id="1671" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="1675" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="1677" href="Data.Fin.Substitution.html#1664" class="Bound">m</a> <a id="1679" href="Data.Fin.Substitution.html#1666" class="Bound">n</a> <a id="1681" class="Symbol">→</a> <a id="1683" class="Symbol">∀</a> <a id="1685" href="Data.Fin.Substitution.html#1685" class="Bound">k</a> <a id="1687" class="Symbol">→</a> <a id="1689" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="1693" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="1695" class="Symbol">(</a><a id="1696" href="Data.Fin.Substitution.html#1685" class="Bound">k</a> <a id="1698" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="1700" href="Data.Fin.Substitution.html#1664" class="Bound">m</a><a id="1701" class="Symbol">)</a> <a id="1703" class="Symbol">(</a><a id="1704" href="Data.Fin.Substitution.html#1685" class="Bound">k</a> <a id="1706" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="1708" href="Data.Fin.Substitution.html#1666" class="Bound">n</a><a id="1709" class="Symbol">)</a>
  <a id="1713" href="Data.Fin.Substitution.html#1713" class="Bound">ρ</a> <a id="1715" href="Data.Fin.Substitution.html#1654" class="Function Operator">↑⋆</a> <a id="1718" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a>  <a id="1724" class="Symbol">=</a> <a id="1726" href="Data.Fin.Substitution.html#1713" class="Bound">ρ</a>
  <a id="1730" href="Data.Fin.Substitution.html#1730" class="Bound">ρ</a> <a id="1732" href="Data.Fin.Substitution.html#1654" class="Function Operator">↑⋆</a> <a id="1735" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1739" href="Data.Fin.Substitution.html#1739" class="Bound">k</a> <a id="1741" class="Symbol">=</a> <a id="1743" class="Symbol">(</a><a id="1744" href="Data.Fin.Substitution.html#1730" class="Bound">ρ</a> <a id="1746" href="Data.Fin.Substitution.html#1654" class="Function Operator">↑⋆</a> <a id="1749" href="Data.Fin.Substitution.html#1739" class="Bound">k</a><a id="1750" class="Symbol">)</a> <a id="1752" href="Data.Fin.Substitution.html#1570" class="Function Operator">↑</a>

  <a id="Simple._↑✶_"></a><a id="1757" href="Data.Fin.Substitution.html#1757" class="Function Operator">_↑✶_</a> <a id="1762" class="Symbol">:</a> <a id="1764" class="Symbol">∀</a> <a id="1766" class="Symbol">{</a><a id="1767" href="Data.Fin.Substitution.html#1767" class="Bound">m</a> <a id="1769" href="Data.Fin.Substitution.html#1769" class="Bound">n</a><a id="1770" class="Symbol">}</a> <a id="1772" class="Symbol">→</a> <a id="1774" href="Data.Fin.Substitution.html#1226" class="Function">Subs</a> <a id="1779" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="1781" href="Data.Fin.Substitution.html#1767" class="Bound">m</a> <a id="1783" href="Data.Fin.Substitution.html#1769" class="Bound">n</a> <a id="1785" class="Symbol">→</a> <a id="1787" class="Symbol">∀</a> <a id="1789" href="Data.Fin.Substitution.html#1789" class="Bound">k</a> <a id="1791" class="Symbol">→</a> <a id="1793" href="Data.Fin.Substitution.html#1226" class="Function">Subs</a> <a id="1798" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="1800" class="Symbol">(</a><a id="1801" href="Data.Fin.Substitution.html#1789" class="Bound">k</a> <a id="1803" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="1805" href="Data.Fin.Substitution.html#1767" class="Bound">m</a><a id="1806" class="Symbol">)</a> <a id="1808" class="Symbol">(</a><a id="1809" href="Data.Fin.Substitution.html#1789" class="Bound">k</a> <a id="1811" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="1813" href="Data.Fin.Substitution.html#1769" class="Bound">n</a><a id="1814" class="Symbol">)</a>
  <a id="1818" href="Data.Fin.Substitution.html#1818" class="Bound">ρs</a> <a id="1821" href="Data.Fin.Substitution.html#1757" class="Function Operator">↑✶</a> <a id="1824" href="Data.Fin.Substitution.html#1824" class="Bound">k</a> <a id="1826" class="Symbol">=</a> <a id="1828" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1539" class="Function">Star.gmap</a> <a id="1838" class="Symbol">(</a><a id="1839" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a> <a id="1843" href="Data.Fin.Substitution.html#1824" class="Bound">k</a><a id="1844" class="Symbol">)</a> <a id="1846" class="Symbol">(λ</a> <a id="1849" href="Data.Fin.Substitution.html#1849" class="Bound">ρ</a> <a id="1851" class="Symbol">→</a> <a id="1853" href="Data.Fin.Substitution.html#1849" class="Bound">ρ</a> <a id="1855" href="Data.Fin.Substitution.html#1654" class="Function Operator">↑⋆</a> <a id="1858" href="Data.Fin.Substitution.html#1824" class="Bound">k</a><a id="1859" class="Symbol">)</a> <a id="1861" href="Data.Fin.Substitution.html#1818" class="Bound">ρs</a>

  <a id="1867" class="Comment">-- The identity substitution.</a>

  <a id="Simple.id"></a><a id="1900" href="Data.Fin.Substitution.html#1900" class="Function">id</a> <a id="1903" class="Symbol">:</a> <a id="1905" class="Symbol">∀</a> <a id="1907" class="Symbol">{</a><a id="1908" href="Data.Fin.Substitution.html#1908" class="Bound">n</a><a id="1909" class="Symbol">}</a> <a id="1911" class="Symbol">→</a> <a id="1913" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="1917" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="1919" href="Data.Fin.Substitution.html#1908" class="Bound">n</a> <a id="1921" href="Data.Fin.Substitution.html#1908" class="Bound">n</a>
  <a id="1925" href="Data.Fin.Substitution.html#1900" class="Function">id</a> <a id="1928" class="Symbol">{</a><a id="1929" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="1933" class="Symbol">}</a>  <a id="1936" class="Symbol">=</a> <a id="1938" href="Data.Vec.Base.html#1102" class="InductiveConstructor">[]</a>
  <a id="1943" href="Data.Fin.Substitution.html#1900" class="Function">id</a> <a id="1946" class="Symbol">{</a><a id="1947" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="1951" href="Data.Fin.Substitution.html#1951" class="Bound">n</a><a id="1952" class="Symbol">}</a> <a id="1954" class="Symbol">=</a> <a id="1956" href="Data.Fin.Substitution.html#1900" class="Function">id</a> <a id="1959" href="Data.Fin.Substitution.html#1570" class="Function Operator">↑</a>

  <a id="1964" class="Comment">-- Weakening.</a>

  <a id="Simple.wk⋆"></a><a id="1981" href="Data.Fin.Substitution.html#1981" class="Function">wk⋆</a> <a id="1985" class="Symbol">:</a> <a id="1987" class="Symbol">∀</a> <a id="1989" href="Data.Fin.Substitution.html#1989" class="Bound">k</a> <a id="1991" class="Symbol">{</a><a id="1992" href="Data.Fin.Substitution.html#1992" class="Bound">n</a><a id="1993" class="Symbol">}</a> <a id="1995" class="Symbol">→</a> <a id="1997" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="2001" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="2003" href="Data.Fin.Substitution.html#1992" class="Bound">n</a> <a id="2005" class="Symbol">(</a><a id="2006" href="Data.Fin.Substitution.html#1989" class="Bound">k</a> <a id="2008" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="2010" href="Data.Fin.Substitution.html#1992" class="Bound">n</a><a id="2011" class="Symbol">)</a>
  <a id="2015" href="Data.Fin.Substitution.html#1981" class="Function">wk⋆</a> <a id="2019" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a>    <a id="2027" class="Symbol">=</a> <a id="2029" href="Data.Fin.Substitution.html#1900" class="Function">id</a>
  <a id="2034" href="Data.Fin.Substitution.html#1981" class="Function">wk⋆</a> <a id="2038" class="Symbol">(</a><a id="2039" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="2043" href="Data.Fin.Substitution.html#2043" class="Bound">k</a><a id="2044" class="Symbol">)</a> <a id="2046" class="Symbol">=</a> <a id="2048" href="Data.Vec.Base.html#2792" class="Function">map</a> <a id="2052" href="Data.Fin.Substitution.html#1503" class="Field">weaken</a> <a id="2059" class="Symbol">(</a><a id="2060" href="Data.Fin.Substitution.html#1981" class="Function">wk⋆</a> <a id="2064" href="Data.Fin.Substitution.html#2043" class="Bound">k</a><a id="2065" class="Symbol">)</a>

  <a id="Simple.wk"></a><a id="2070" href="Data.Fin.Substitution.html#2070" class="Function">wk</a> <a id="2073" class="Symbol">:</a> <a id="2075" class="Symbol">∀</a> <a id="2077" class="Symbol">{</a><a id="2078" href="Data.Fin.Substitution.html#2078" class="Bound">n</a><a id="2079" class="Symbol">}</a> <a id="2081" class="Symbol">→</a> <a id="2083" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="2087" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="2089" href="Data.Fin.Substitution.html#2078" class="Bound">n</a> <a id="2091" class="Symbol">(</a><a id="2092" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="2096" href="Data.Fin.Substitution.html#2078" class="Bound">n</a><a id="2097" class="Symbol">)</a>
  <a id="2101" href="Data.Fin.Substitution.html#2070" class="Function">wk</a> <a id="2104" class="Symbol">=</a> <a id="2106" href="Data.Fin.Substitution.html#1981" class="Function">wk⋆</a> <a id="2110" class="Number">1</a>

  <a id="2115" class="Comment">-- A substitution which only replaces the first variable.</a>

  <a id="Simple.sub"></a><a id="2176" href="Data.Fin.Substitution.html#2176" class="Function">sub</a> <a id="2180" class="Symbol">:</a> <a id="2182" class="Symbol">∀</a> <a id="2184" class="Symbol">{</a><a id="2185" href="Data.Fin.Substitution.html#2185" class="Bound">n</a><a id="2186" class="Symbol">}</a> <a id="2188" class="Symbol">→</a> <a id="2190" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="2192" href="Data.Fin.Substitution.html#2185" class="Bound">n</a> <a id="2194" class="Symbol">→</a> <a id="2196" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="2200" href="Data.Fin.Substitution.html#1361" class="Bound">T</a> <a id="2202" class="Symbol">(</a><a id="2203" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="2207" href="Data.Fin.Substitution.html#2185" class="Bound">n</a><a id="2208" class="Symbol">)</a> <a id="2210" href="Data.Fin.Substitution.html#2185" class="Bound">n</a>
  <a id="2214" href="Data.Fin.Substitution.html#2176" class="Function">sub</a> <a id="2218" href="Data.Fin.Substitution.html#2218" class="Bound">t</a> <a id="2220" class="Symbol">=</a> <a id="2222" href="Data.Fin.Substitution.html#2218" class="Bound">t</a> <a id="2224" href="Data.Vec.Base.html#1121" class="InductiveConstructor Operator">∷</a> <a id="2226" href="Data.Fin.Substitution.html#1900" class="Function">id</a>

<a id="2230" class="Comment">-- Application of substitutions.</a>

<a id="2264" class="Keyword">record</a> <a id="Application"></a><a id="2271" href="Data.Fin.Substitution.html#2271" class="Record">Application</a> <a id="2283" class="Symbol">{</a><a id="2284" href="Data.Fin.Substitution.html#2284" class="Bound">ℓ₁</a> <a id="2287" href="Data.Fin.Substitution.html#2287" class="Bound">ℓ₂</a> <a id="2290" class="Symbol">:</a> <a id="2292" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="2297" class="Symbol">}</a> <a id="2299" class="Symbol">(</a><a id="2300" href="Data.Fin.Substitution.html#2300" class="Bound">T₁</a> <a id="2303" class="Symbol">:</a> <a id="2305" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="2310" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="2312" href="Data.Fin.Substitution.html#2284" class="Bound">ℓ₁</a><a id="2314" class="Symbol">)</a> <a id="2316" class="Symbol">(</a><a id="2317" href="Data.Fin.Substitution.html#2317" class="Bound">T₂</a> <a id="2320" class="Symbol">:</a> <a id="2322" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="2327" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="2329" href="Data.Fin.Substitution.html#2287" class="Bound">ℓ₂</a><a id="2331" class="Symbol">)</a> <a id="2333" class="Symbol">:</a>
    <a id="2339" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2343" class="Symbol">(</a><a id="2344" href="Data.Fin.Substitution.html#2284" class="Bound">ℓ₁</a> <a id="2347" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="2349" href="Data.Fin.Substitution.html#2287" class="Bound">ℓ₂</a><a id="2351" class="Symbol">)</a> <a id="2353" class="Keyword">where</a>
  <a id="2361" class="Keyword">infixl</a> <a id="2368" class="Number">8</a> <a id="2370" href="Data.Fin.Substitution.html#2454" class="Field Operator">_/_</a> <a id="2374" href="Data.Fin.Substitution.html#2697" class="Function Operator">_/✶_</a>
  <a id="2381" class="Keyword">infixl</a> <a id="2388" class="Number">9</a> <a id="2390" href="Data.Fin.Substitution.html#2560" class="Function Operator">_⊙_</a>

  <a id="2397" class="Comment">-- Post-application of substitutions to things.</a>

  <a id="2448" class="Keyword">field</a> <a id="Application._/_"></a><a id="2454" href="Data.Fin.Substitution.html#2454" class="Field Operator">_/_</a> <a id="2458" class="Symbol">:</a> <a id="2460" class="Symbol">∀</a> <a id="2462" class="Symbol">{</a><a id="2463" href="Data.Fin.Substitution.html#2463" class="Bound">m</a> <a id="2465" href="Data.Fin.Substitution.html#2465" class="Bound">n</a><a id="2466" class="Symbol">}</a> <a id="2468" class="Symbol">→</a> <a id="2470" href="Data.Fin.Substitution.html#2300" class="Bound">T₁</a> <a id="2473" href="Data.Fin.Substitution.html#2463" class="Bound">m</a> <a id="2475" class="Symbol">→</a> <a id="2477" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="2481" href="Data.Fin.Substitution.html#2317" class="Bound">T₂</a> <a id="2484" href="Data.Fin.Substitution.html#2463" class="Bound">m</a> <a id="2486" href="Data.Fin.Substitution.html#2465" class="Bound">n</a> <a id="2488" class="Symbol">→</a> <a id="2490" href="Data.Fin.Substitution.html#2300" class="Bound">T₁</a> <a id="2493" href="Data.Fin.Substitution.html#2465" class="Bound">n</a>

  <a id="2498" class="Comment">-- Reverse composition. (Fits well with post-application.)</a>

  <a id="Application._⊙_"></a><a id="2560" href="Data.Fin.Substitution.html#2560" class="Function Operator">_⊙_</a> <a id="2564" class="Symbol">:</a> <a id="2566" class="Symbol">∀</a> <a id="2568" class="Symbol">{</a><a id="2569" href="Data.Fin.Substitution.html#2569" class="Bound">m</a> <a id="2571" href="Data.Fin.Substitution.html#2571" class="Bound">n</a> <a id="2573" href="Data.Fin.Substitution.html#2573" class="Bound">k</a><a id="2574" class="Symbol">}</a> <a id="2576" class="Symbol">→</a> <a id="2578" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="2582" href="Data.Fin.Substitution.html#2300" class="Bound">T₁</a> <a id="2585" href="Data.Fin.Substitution.html#2569" class="Bound">m</a> <a id="2587" href="Data.Fin.Substitution.html#2571" class="Bound">n</a> <a id="2589" class="Symbol">→</a> <a id="2591" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="2595" href="Data.Fin.Substitution.html#2317" class="Bound">T₂</a> <a id="2598" href="Data.Fin.Substitution.html#2571" class="Bound">n</a> <a id="2600" href="Data.Fin.Substitution.html#2573" class="Bound">k</a> <a id="2602" class="Symbol">→</a> <a id="2604" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="2608" href="Data.Fin.Substitution.html#2300" class="Bound">T₁</a> <a id="2611" href="Data.Fin.Substitution.html#2569" class="Bound">m</a> <a id="2613" href="Data.Fin.Substitution.html#2573" class="Bound">k</a>
  <a id="2617" href="Data.Fin.Substitution.html#2617" class="Bound">ρ₁</a> <a id="2620" href="Data.Fin.Substitution.html#2560" class="Function Operator">⊙</a> <a id="2622" href="Data.Fin.Substitution.html#2622" class="Bound">ρ₂</a> <a id="2625" class="Symbol">=</a> <a id="2627" href="Data.Vec.Base.html#2792" class="Function">map</a> <a id="2631" class="Symbol">(λ</a> <a id="2634" href="Data.Fin.Substitution.html#2634" class="Bound">t</a> <a id="2636" class="Symbol">→</a> <a id="2638" href="Data.Fin.Substitution.html#2634" class="Bound">t</a> <a id="2640" href="Data.Fin.Substitution.html#2454" class="Field Operator">/</a> <a id="2642" href="Data.Fin.Substitution.html#2622" class="Bound">ρ₂</a><a id="2644" class="Symbol">)</a> <a id="2646" href="Data.Fin.Substitution.html#2617" class="Bound">ρ₁</a>

  <a id="2652" class="Comment">-- Application of multiple substitutions.</a>

  <a id="Application._/✶_"></a><a id="2697" href="Data.Fin.Substitution.html#2697" class="Function Operator">_/✶_</a> <a id="2702" class="Symbol">:</a> <a id="2704" class="Symbol">∀</a> <a id="2706" class="Symbol">{</a><a id="2707" href="Data.Fin.Substitution.html#2707" class="Bound">m</a> <a id="2709" href="Data.Fin.Substitution.html#2709" class="Bound">n</a><a id="2710" class="Symbol">}</a> <a id="2712" class="Symbol">→</a> <a id="2714" href="Data.Fin.Substitution.html#2300" class="Bound">T₁</a> <a id="2717" href="Data.Fin.Substitution.html#2707" class="Bound">m</a> <a id="2719" class="Symbol">→</a> <a id="2721" href="Data.Fin.Substitution.html#1226" class="Function">Subs</a> <a id="2726" href="Data.Fin.Substitution.html#2317" class="Bound">T₂</a> <a id="2729" href="Data.Fin.Substitution.html#2707" class="Bound">m</a> <a id="2731" href="Data.Fin.Substitution.html#2709" class="Bound">n</a> <a id="2733" class="Symbol">→</a> <a id="2735" href="Data.Fin.Substitution.html#2300" class="Bound">T₁</a> <a id="2738" href="Data.Fin.Substitution.html#2709" class="Bound">n</a>
  <a id="2742" href="Data.Fin.Substitution.html#2697" class="Function Operator">_/✶_</a> <a id="2747" class="Symbol">=</a> <a id="2749" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1868" class="Function">Star.gfold</a> <a id="2760" href="Function.Base.html#704" class="Function">Fun.id</a> <a id="2767" class="Symbol">_</a> <a id="2769" class="Symbol">(</a><a id="2770" href="Function.Base.html#1638" class="Function">flip</a> <a id="2775" href="Data.Fin.Substitution.html#2454" class="Field Operator">_/_</a><a id="2778" class="Symbol">)</a> <a id="2780" class="Symbol">{</a><a id="2781" class="Argument">k</a> <a id="2783" class="Symbol">=</a> <a id="2785" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="2789" class="Symbol">}</a>

<a id="2792" class="Comment">-- A combination of the two records above.</a>

<a id="2836" class="Keyword">record</a> <a id="Subst"></a><a id="2843" href="Data.Fin.Substitution.html#2843" class="Record">Subst</a> <a id="2849" class="Symbol">{</a><a id="2850" href="Data.Fin.Substitution.html#2850" class="Bound">ℓ</a> <a id="2852" class="Symbol">:</a> <a id="2854" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="2859" class="Symbol">}</a> <a id="2861" class="Symbol">(</a><a id="2862" href="Data.Fin.Substitution.html#2862" class="Bound">T</a> <a id="2864" class="Symbol">:</a> <a id="2866" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="2871" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="2873" href="Data.Fin.Substitution.html#2850" class="Bound">ℓ</a><a id="2874" class="Symbol">)</a> <a id="2876" class="Symbol">:</a> <a id="2878" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2882" href="Data.Fin.Substitution.html#2850" class="Bound">ℓ</a> <a id="2884" class="Keyword">where</a>
  <a id="2892" class="Keyword">field</a>
    <a id="Subst.simple"></a><a id="2902" href="Data.Fin.Substitution.html#2902" class="Field">simple</a>      <a id="2914" class="Symbol">:</a> <a id="2916" href="Data.Fin.Substitution.html#1341" class="Record">Simple</a>      <a id="2928" href="Data.Fin.Substitution.html#2862" class="Bound">T</a>
    <a id="Subst.application"></a><a id="2934" href="Data.Fin.Substitution.html#2934" class="Field">application</a> <a id="2946" class="Symbol">:</a> <a id="2948" href="Data.Fin.Substitution.html#2271" class="Record">Application</a> <a id="2960" href="Data.Fin.Substitution.html#2862" class="Bound">T</a> <a id="2962" href="Data.Fin.Substitution.html#2862" class="Bound">T</a>

  <a id="2967" class="Keyword">open</a> <a id="2972" href="Data.Fin.Substitution.html#1341" class="Module">Simple</a>      <a id="2984" href="Data.Fin.Substitution.html#2902" class="Field">simple</a>      <a id="2996" class="Keyword">public</a>
  <a id="3005" class="Keyword">open</a> <a id="3010" href="Data.Fin.Substitution.html#2271" class="Module">Application</a> <a id="3022" href="Data.Fin.Substitution.html#2934" class="Field">application</a> <a id="3034" class="Keyword">public</a>

  <a id="3044" class="Comment">-- Composition of multiple substitutions.</a>

  <a id="Subst.⨀"></a><a id="3089" href="Data.Fin.Substitution.html#3089" class="Function">⨀</a> <a id="3091" class="Symbol">:</a> <a id="3093" class="Symbol">∀</a> <a id="3095" class="Symbol">{</a><a id="3096" href="Data.Fin.Substitution.html#3096" class="Bound">m</a> <a id="3098" href="Data.Fin.Substitution.html#3098" class="Bound">n</a><a id="3099" class="Symbol">}</a> <a id="3101" class="Symbol">→</a> <a id="3103" href="Data.Fin.Substitution.html#1226" class="Function">Subs</a> <a id="3108" href="Data.Fin.Substitution.html#2862" class="Bound">T</a> <a id="3110" href="Data.Fin.Substitution.html#3096" class="Bound">m</a> <a id="3112" href="Data.Fin.Substitution.html#3098" class="Bound">n</a> <a id="3114" class="Symbol">→</a> <a id="3116" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="3120" href="Data.Fin.Substitution.html#2862" class="Bound">T</a> <a id="3122" href="Data.Fin.Substitution.html#3096" class="Bound">m</a> <a id="3124" href="Data.Fin.Substitution.html#3098" class="Bound">n</a>
  <a id="3128" href="Data.Fin.Substitution.html#3089" class="Function">⨀</a> <a id="3130" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#560" class="InductiveConstructor">ε</a>        <a id="3139" class="Symbol">=</a> <a id="3141" href="Data.Fin.Substitution.html#1900" class="Function">id</a>
  <a id="3146" href="Data.Fin.Substitution.html#3089" class="Function">⨀</a> <a id="3148" class="Symbol">(</a><a id="3149" href="Data.Fin.Substitution.html#3149" class="Bound">ρ</a> <a id="3151" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#587" class="InductiveConstructor Operator">◅</a> <a id="3153" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#560" class="InductiveConstructor">ε</a><a id="3154" class="Symbol">)</a>  <a id="3157" class="Symbol">=</a> <a id="3159" href="Data.Fin.Substitution.html#3149" class="Bound">ρ</a>  <a id="3162" class="Comment">-- Convenient optimisation; simplifies some proofs.</a>
  <a id="3216" href="Data.Fin.Substitution.html#3089" class="CatchallClause Function">⨀</a><a id="3217" class="CatchallClause"> </a><a id="3218" class="CatchallClause Symbol">(</a><a id="3219" href="Data.Fin.Substitution.html#3219" class="CatchallClause Bound">ρ</a><a id="3220" class="CatchallClause"> </a><a id="3221" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#587" class="CatchallClause InductiveConstructor Operator">◅</a><a id="3222" class="CatchallClause"> </a><a id="3223" href="Data.Fin.Substitution.html#3223" class="CatchallClause Bound">ρs</a><a id="3225" class="CatchallClause Symbol">)</a> <a id="3227" class="Symbol">=</a> <a id="3229" href="Data.Fin.Substitution.html#3089" class="Function">⨀</a> <a id="3231" href="Data.Fin.Substitution.html#3223" class="Bound">ρs</a> <a id="3234" href="Data.Fin.Substitution.html#2560" class="Function Operator">⊙</a> <a id="3236" href="Data.Fin.Substitution.html#3219" class="Bound">ρ</a>

<a id="3239" class="Comment">------------------------------------------------------------------------</a>
<a id="3312" class="Comment">-- Instantiations and code for facilitating instantiations</a>

<a id="3372" class="Comment">-- Liftings from T₁ to T₂.</a>

<a id="3400" class="Keyword">record</a> <a id="Lift"></a><a id="3407" href="Data.Fin.Substitution.html#3407" class="Record">Lift</a> <a id="3412" class="Symbol">{</a><a id="3413" href="Data.Fin.Substitution.html#3413" class="Bound">ℓ₁</a> <a id="3416" href="Data.Fin.Substitution.html#3416" class="Bound">ℓ₂</a> <a id="3419" class="Symbol">:</a> <a id="3421" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="3426" class="Symbol">}</a> <a id="3428" class="Symbol">(</a><a id="3429" href="Data.Fin.Substitution.html#3429" class="Bound">T₁</a> <a id="3432" class="Symbol">:</a> <a id="3434" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="3439" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="3441" href="Data.Fin.Substitution.html#3413" class="Bound">ℓ₁</a><a id="3443" class="Symbol">)</a> <a id="3445" class="Symbol">(</a><a id="3446" href="Data.Fin.Substitution.html#3446" class="Bound">T₂</a> <a id="3449" class="Symbol">:</a> <a id="3451" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="3456" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="3458" href="Data.Fin.Substitution.html#3416" class="Bound">ℓ₂</a><a id="3460" class="Symbol">)</a> <a id="3462" class="Symbol">:</a>
    <a id="3468" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3472" class="Symbol">(</a><a id="3473" href="Data.Fin.Substitution.html#3413" class="Bound">ℓ₁</a> <a id="3476" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="3478" href="Data.Fin.Substitution.html#3416" class="Bound">ℓ₂</a><a id="3480" class="Symbol">)</a> <a id="3482" class="Keyword">where</a>
  <a id="3490" class="Keyword">field</a>
    <a id="Lift.simple"></a><a id="3500" href="Data.Fin.Substitution.html#3500" class="Field">simple</a> <a id="3507" class="Symbol">:</a> <a id="3509" href="Data.Fin.Substitution.html#1341" class="Record">Simple</a> <a id="3516" href="Data.Fin.Substitution.html#3429" class="Bound">T₁</a>
    <a id="Lift.lift"></a><a id="3523" href="Data.Fin.Substitution.html#3523" class="Field">lift</a>   <a id="3530" class="Symbol">:</a> <a id="3532" class="Symbol">∀</a> <a id="3534" class="Symbol">{</a><a id="3535" href="Data.Fin.Substitution.html#3535" class="Bound">n</a><a id="3536" class="Symbol">}</a> <a id="3538" class="Symbol">→</a> <a id="3540" href="Data.Fin.Substitution.html#3429" class="Bound">T₁</a> <a id="3543" href="Data.Fin.Substitution.html#3535" class="Bound">n</a> <a id="3545" class="Symbol">→</a> <a id="3547" href="Data.Fin.Substitution.html#3446" class="Bound">T₂</a> <a id="3550" href="Data.Fin.Substitution.html#3535" class="Bound">n</a>

  <a id="3555" class="Keyword">open</a> <a id="3560" href="Data.Fin.Substitution.html#1341" class="Module">Simple</a> <a id="3567" href="Data.Fin.Substitution.html#3500" class="Field">simple</a> <a id="3574" class="Keyword">public</a>

<a id="3582" class="Comment">-- Variable substitutions (renamings).</a>

<a id="3622" class="Keyword">module</a> <a id="VarSubst"></a><a id="3629" href="Data.Fin.Substitution.html#3629" class="Module">VarSubst</a> <a id="3638" class="Keyword">where</a>

  <a id="VarSubst.subst"></a><a id="3647" href="Data.Fin.Substitution.html#3647" class="Function">subst</a> <a id="3653" class="Symbol">:</a> <a id="3655" href="Data.Fin.Substitution.html#2843" class="Record">Subst</a> <a id="3661" href="Data.Fin.Base.html#1212" class="Datatype">Fin</a>
  <a id="3667" href="Data.Fin.Substitution.html#3647" class="Function">subst</a> <a id="3673" class="Symbol">=</a> <a id="3675" class="Keyword">record</a>
    <a id="3686" class="Symbol">{</a> <a id="3688" href="Data.Fin.Substitution.html#2902" class="Field">simple</a>      <a id="3700" class="Symbol">=</a> <a id="3702" class="Keyword">record</a> <a id="3709" class="Symbol">{</a> <a id="3711" href="Data.Fin.Substitution.html#1439" class="Field">var</a> <a id="3715" class="Symbol">=</a> <a id="3717" href="Function.Base.html#704" class="Function">Fun.id</a><a id="3723" class="Symbol">;</a> <a id="3725" href="Data.Fin.Substitution.html#1503" class="Field">weaken</a> <a id="3732" class="Symbol">=</a> <a id="3734" href="Data.Fin.Base.html#1255" class="InductiveConstructor">suc</a> <a id="3738" class="Symbol">}</a>
    <a id="3744" class="Symbol">;</a> <a id="3746" href="Data.Fin.Substitution.html#2934" class="Field">application</a> <a id="3758" class="Symbol">=</a> <a id="3760" class="Keyword">record</a> <a id="3767" class="Symbol">{</a> <a id="3769" href="Data.Fin.Substitution.html#2454" class="Field Operator">_/_</a> <a id="3773" class="Symbol">=</a> <a id="3775" href="Function.Base.html#1638" class="Function">flip</a> <a id="3780" href="Data.Vec.Base.html#1623" class="Function">lookup</a> <a id="3787" class="Symbol">}</a>
    <a id="3793" class="Symbol">}</a>

  <a id="3798" class="Keyword">open</a> <a id="3803" href="Data.Fin.Substitution.html#2843" class="Module">Subst</a> <a id="3809" href="Data.Fin.Substitution.html#3647" class="Function">subst</a> <a id="3815" class="Keyword">public</a>

<a id="3823" class="Comment">-- &quot;Term&quot; substitutions.</a>

<a id="3849" class="Keyword">record</a> <a id="TermSubst"></a><a id="3856" href="Data.Fin.Substitution.html#3856" class="Record">TermSubst</a> <a id="3866" class="Symbol">(</a><a id="3867" href="Data.Fin.Substitution.html#3867" class="Bound">T</a> <a id="3869" class="Symbol">:</a> <a id="3871" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="3876" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="3878" href="Level.html#521" class="Function">0ℓ</a><a id="3880" class="Symbol">)</a> <a id="3882" class="Symbol">:</a> <a id="3884" href="Agda.Primitive.html#320" class="Primitive">Set₁</a> <a id="3889" class="Keyword">where</a>
  <a id="3897" class="Keyword">field</a>
    <a id="TermSubst.var"></a><a id="3907" href="Data.Fin.Substitution.html#3907" class="Field">var</a> <a id="3911" class="Symbol">:</a> <a id="3913" class="Symbol">∀</a> <a id="3915" class="Symbol">{</a><a id="3916" href="Data.Fin.Substitution.html#3916" class="Bound">n</a><a id="3917" class="Symbol">}</a> <a id="3919" class="Symbol">→</a> <a id="3921" href="Data.Fin.Base.html#1212" class="Datatype">Fin</a> <a id="3925" href="Data.Fin.Substitution.html#3916" class="Bound">n</a> <a id="3927" class="Symbol">→</a> <a id="3929" href="Data.Fin.Substitution.html#3867" class="Bound">T</a> <a id="3931" href="Data.Fin.Substitution.html#3916" class="Bound">n</a>
    <a id="TermSubst.app"></a><a id="3937" href="Data.Fin.Substitution.html#3937" class="Field">app</a> <a id="3941" class="Symbol">:</a> <a id="3943" class="Symbol">∀</a> <a id="3945" class="Symbol">{</a><a id="3946" href="Data.Fin.Substitution.html#3946" class="Bound">T′</a> <a id="3949" class="Symbol">:</a> <a id="3951" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="3956" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="3958" href="Level.html#521" class="Function">0ℓ</a><a id="3960" class="Symbol">}</a> <a id="3962" class="Symbol">→</a> <a id="3964" href="Data.Fin.Substitution.html#3407" class="Record">Lift</a> <a id="3969" href="Data.Fin.Substitution.html#3946" class="Bound">T′</a> <a id="3972" href="Data.Fin.Substitution.html#3867" class="Bound">T</a> <a id="3974" class="Symbol">→</a> <a id="3976" class="Symbol">∀</a> <a id="3978" class="Symbol">{</a><a id="3979" href="Data.Fin.Substitution.html#3979" class="Bound">m</a> <a id="3981" href="Data.Fin.Substitution.html#3981" class="Bound">n</a><a id="3982" class="Symbol">}</a> <a id="3984" class="Symbol">→</a> <a id="3986" href="Data.Fin.Substitution.html#3867" class="Bound">T</a> <a id="3988" href="Data.Fin.Substitution.html#3979" class="Bound">m</a> <a id="3990" class="Symbol">→</a> <a id="3992" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="3996" href="Data.Fin.Substitution.html#3946" class="Bound">T′</a> <a id="3999" href="Data.Fin.Substitution.html#3979" class="Bound">m</a> <a id="4001" href="Data.Fin.Substitution.html#3981" class="Bound">n</a> <a id="4003" class="Symbol">→</a> <a id="4005" href="Data.Fin.Substitution.html#3867" class="Bound">T</a> <a id="4007" href="Data.Fin.Substitution.html#3981" class="Bound">n</a>

  <a id="4012" class="Keyword">module</a> <a id="TermSubst.Lifted"></a><a id="4019" href="Data.Fin.Substitution.html#4019" class="Module">Lifted</a> <a id="4026" class="Symbol">{</a><a id="4027" href="Data.Fin.Substitution.html#4027" class="Bound">T′</a> <a id="4030" class="Symbol">:</a> <a id="4032" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="4037" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="4039" href="Level.html#521" class="Function">0ℓ</a><a id="4041" class="Symbol">}</a> <a id="4043" class="Symbol">(</a><a id="4044" href="Data.Fin.Substitution.html#4044" class="Bound">lift</a> <a id="4049" class="Symbol">:</a> <a id="4051" href="Data.Fin.Substitution.html#3407" class="Record">Lift</a> <a id="4056" href="Data.Fin.Substitution.html#4027" class="Bound">T′</a> <a id="4059" href="Data.Fin.Substitution.html#3867" class="Bound">T</a><a id="4060" class="Symbol">)</a> <a id="4062" class="Keyword">where</a>
    <a id="TermSubst.Lifted.application"></a><a id="4072" href="Data.Fin.Substitution.html#4072" class="Function">application</a> <a id="4084" class="Symbol">:</a> <a id="4086" href="Data.Fin.Substitution.html#2271" class="Record">Application</a> <a id="4098" href="Data.Fin.Substitution.html#3867" class="Bound">T</a> <a id="4100" href="Data.Fin.Substitution.html#4027" class="Bound">T′</a>
    <a id="4107" href="Data.Fin.Substitution.html#4072" class="Function">application</a> <a id="4119" class="Symbol">=</a> <a id="4121" class="Keyword">record</a> <a id="4128" class="Symbol">{</a> <a id="4130" href="Data.Fin.Substitution.html#2454" class="Field Operator">_/_</a> <a id="4134" class="Symbol">=</a> <a id="4136" href="Data.Fin.Substitution.html#3937" class="Field">app</a> <a id="4140" href="Data.Fin.Substitution.html#4044" class="Bound">lift</a> <a id="4145" class="Symbol">}</a>

    <a id="4152" class="Keyword">open</a> <a id="4157" href="Data.Fin.Substitution.html#3407" class="Module">Lift</a> <a id="4162" href="Data.Fin.Substitution.html#4044" class="Bound">lift</a> <a id="4167" class="Keyword">public</a>
    <a id="4178" class="Keyword">open</a> <a id="4183" href="Data.Fin.Substitution.html#2271" class="Module">Application</a> <a id="4195" href="Data.Fin.Substitution.html#4072" class="Function">application</a> <a id="4207" class="Keyword">public</a>

  <a id="TermSubst.varLift"></a><a id="4217" href="Data.Fin.Substitution.html#4217" class="Function">varLift</a> <a id="4225" class="Symbol">:</a> <a id="4227" href="Data.Fin.Substitution.html#3407" class="Record">Lift</a> <a id="4232" href="Data.Fin.Base.html#1212" class="Datatype">Fin</a> <a id="4236" href="Data.Fin.Substitution.html#3867" class="Bound">T</a>
  <a id="4240" href="Data.Fin.Substitution.html#4217" class="Function">varLift</a> <a id="4248" class="Symbol">=</a> <a id="4250" class="Keyword">record</a> <a id="4257" class="Symbol">{</a> <a id="4259" href="Data.Fin.Substitution.html#3500" class="Field">simple</a> <a id="4266" class="Symbol">=</a> <a id="4268" href="Data.Fin.Substitution.html#2902" class="Function">VarSubst.simple</a><a id="4283" class="Symbol">;</a> <a id="4285" href="Data.Fin.Substitution.html#3523" class="Field">lift</a> <a id="4290" class="Symbol">=</a> <a id="4292" href="Data.Fin.Substitution.html#3907" class="Field">var</a> <a id="4296" class="Symbol">}</a>

  <a id="4301" class="Keyword">infix</a> <a id="4307" class="Number">8</a> <a id="4309" href="Data.Fin.Substitution.html#4319" class="Function Operator">_/Var_</a>

  <a id="TermSubst._/Var_"></a><a id="4319" href="Data.Fin.Substitution.html#4319" class="Function Operator">_/Var_</a> <a id="4326" class="Symbol">:</a> <a id="4328" class="Symbol">∀</a> <a id="4330" class="Symbol">{</a><a id="4331" href="Data.Fin.Substitution.html#4331" class="Bound">m</a> <a id="4333" href="Data.Fin.Substitution.html#4333" class="Bound">n</a><a id="4334" class="Symbol">}</a> <a id="4336" class="Symbol">→</a> <a id="4338" href="Data.Fin.Substitution.html#3867" class="Bound">T</a> <a id="4340" href="Data.Fin.Substitution.html#4331" class="Bound">m</a> <a id="4342" class="Symbol">→</a> <a id="4344" href="Data.Fin.Substitution.html#1109" class="Function">Sub</a> <a id="4348" href="Data.Fin.Base.html#1212" class="Datatype">Fin</a> <a id="4352" href="Data.Fin.Substitution.html#4331" class="Bound">m</a> <a id="4354" href="Data.Fin.Substitution.html#4333" class="Bound">n</a> <a id="4356" class="Symbol">→</a> <a id="4358" href="Data.Fin.Substitution.html#3867" class="Bound">T</a> <a id="4360" href="Data.Fin.Substitution.html#4333" class="Bound">n</a>
  <a id="4364" href="Data.Fin.Substitution.html#4319" class="Function Operator">_/Var_</a> <a id="4371" class="Symbol">=</a> <a id="4373" href="Data.Fin.Substitution.html#3937" class="Field">app</a> <a id="4377" href="Data.Fin.Substitution.html#4217" class="Function">varLift</a>

  <a id="TermSubst.simple"></a><a id="4388" href="Data.Fin.Substitution.html#4388" class="Function">simple</a> <a id="4395" class="Symbol">:</a> <a id="4397" href="Data.Fin.Substitution.html#1341" class="Record">Simple</a> <a id="4404" href="Data.Fin.Substitution.html#3867" class="Bound">T</a>
  <a id="4408" href="Data.Fin.Substitution.html#4388" class="Function">simple</a> <a id="4415" class="Symbol">=</a> <a id="4417" class="Keyword">record</a>
    <a id="4428" class="Symbol">{</a> <a id="4430" href="Data.Fin.Substitution.html#1439" class="Field">var</a>    <a id="4437" class="Symbol">=</a> <a id="4439" href="Data.Fin.Substitution.html#3907" class="Field">var</a>
    <a id="4447" class="Symbol">;</a> <a id="4449" href="Data.Fin.Substitution.html#1503" class="Field">weaken</a> <a id="4456" class="Symbol">=</a> <a id="4458" class="Symbol">λ</a> <a id="4460" href="Data.Fin.Substitution.html#4460" class="Bound">t</a> <a id="4462" class="Symbol">→</a> <a id="4464" href="Data.Fin.Substitution.html#4460" class="Bound">t</a> <a id="4466" href="Data.Fin.Substitution.html#4319" class="Function Operator">/Var</a> <a id="4471" href="Data.Fin.Substitution.html#2070" class="Function">VarSubst.wk</a>
    <a id="4487" class="Symbol">}</a>

  <a id="TermSubst.termLift"></a><a id="4492" href="Data.Fin.Substitution.html#4492" class="Function">termLift</a> <a id="4501" class="Symbol">:</a> <a id="4503" href="Data.Fin.Substitution.html#3407" class="Record">Lift</a> <a id="4508" href="Data.Fin.Substitution.html#3867" class="Bound">T</a> <a id="4510" href="Data.Fin.Substitution.html#3867" class="Bound">T</a>
  <a id="4514" href="Data.Fin.Substitution.html#4492" class="Function">termLift</a> <a id="4523" class="Symbol">=</a> <a id="4525" class="Keyword">record</a> <a id="4532" class="Symbol">{</a> <a id="4534" href="Data.Fin.Substitution.html#3500" class="Field">simple</a> <a id="4541" class="Symbol">=</a> <a id="4543" href="Data.Fin.Substitution.html#4388" class="Function">simple</a><a id="4549" class="Symbol">;</a> <a id="4551" href="Data.Fin.Substitution.html#3523" class="Field">lift</a> <a id="4556" class="Symbol">=</a> <a id="4558" href="Function.Base.html#704" class="Function">Fun.id</a> <a id="4565" class="Symbol">}</a>

  <a id="TermSubst.subst"></a><a id="4570" href="Data.Fin.Substitution.html#4570" class="Function">subst</a> <a id="4576" class="Symbol">:</a> <a id="4578" href="Data.Fin.Substitution.html#2843" class="Record">Subst</a> <a id="4584" href="Data.Fin.Substitution.html#3867" class="Bound">T</a>
  <a id="4588" href="Data.Fin.Substitution.html#4570" class="Function">subst</a> <a id="4594" class="Symbol">=</a> <a id="4596" class="Keyword">record</a>
    <a id="4607" class="Symbol">{</a> <a id="4609" href="Data.Fin.Substitution.html#2902" class="Field">simple</a>      <a id="4621" class="Symbol">=</a> <a id="4623" href="Data.Fin.Substitution.html#4388" class="Function">simple</a>
    <a id="4634" class="Symbol">;</a> <a id="4636" href="Data.Fin.Substitution.html#2934" class="Field">application</a> <a id="4648" class="Symbol">=</a> <a id="4650" href="Data.Fin.Substitution.html#4072" class="Function">Lifted.application</a> <a id="4669" href="Data.Fin.Substitution.html#4492" class="Function">termLift</a>
    <a id="4682" class="Symbol">}</a>

  <a id="4687" class="Keyword">open</a> <a id="4692" href="Data.Fin.Substitution.html#2843" class="Module">Subst</a> <a id="4698" href="Data.Fin.Substitution.html#4570" class="Function">subst</a> <a id="4704" class="Keyword">public</a> <a id="4711" class="Keyword">hiding</a> <a id="4718" class="Symbol">(</a><a id="4719" href="Data.Fin.Substitution.html#1439" class="Function">var</a><a id="4722" class="Symbol">;</a> <a id="4724" href="Data.Fin.Substitution.html#2902" class="Field">simple</a><a id="4730" class="Symbol">)</a>
</pre></body></html>