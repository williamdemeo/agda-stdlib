<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Trie</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Trie, basic type and operations</a>
<a id="141" class="Comment">------------------------------------------------------------------------</a>

<a id="215" class="Comment">-- See README.Data.Trie.NonDependent for an example of using a trie to</a>
<a id="286" class="Comment">-- build a lexer.</a>

<a id="305" class="Symbol">{-#</a> <a id="309" class="Keyword">OPTIONS</a> <a id="317" class="Pragma">--cubical-compatible</a> <a id="338" class="Pragma">--sized-types</a> <a id="352" class="Symbol">#-}</a>

<a id="357" class="Keyword">open</a> <a id="362" class="Keyword">import</a> <a id="369" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="385" class="Keyword">using</a> <a id="391" class="Symbol">(</a><a id="392" href="Relation.Binary.Core.html#891" class="Function">Rel</a><a id="395" class="Symbol">;</a> <a id="397" href="Relation.Binary.Bundles.html#6937" class="Record">StrictTotalOrder</a><a id="413" class="Symbol">)</a>

<a id="416" class="Keyword">module</a> <a id="423" href="Data.Trie.html" class="Module">Data.Trie</a> <a id="433" class="Symbol">{</a><a id="434" href="Data.Trie.html#434" class="Bound">k</a> <a id="436" href="Data.Trie.html#436" class="Bound">e</a> <a id="438" href="Data.Trie.html#438" class="Bound">r</a><a id="439" class="Symbol">}</a> <a id="441" class="Symbol">(</a><a id="442" href="Data.Trie.html#442" class="Bound">S</a> <a id="444" class="Symbol">:</a> <a id="446" href="Relation.Binary.Bundles.html#6937" class="Record">StrictTotalOrder</a> <a id="463" href="Data.Trie.html#434" class="Bound">k</a> <a id="465" href="Data.Trie.html#436" class="Bound">e</a> <a id="467" href="Data.Trie.html#438" class="Bound">r</a><a id="468" class="Symbol">)</a> <a id="470" class="Keyword">where</a>

<a id="477" class="Keyword">open</a> <a id="482" class="Keyword">import</a> <a id="489" href="Level.html" class="Module">Level</a>
<a id="495" class="Keyword">open</a> <a id="500" class="Keyword">import</a> <a id="507" href="Size.html" class="Module">Size</a>
<a id="512" class="Keyword">open</a> <a id="517" class="Keyword">import</a> <a id="524" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="539" class="Keyword">using</a> <a id="545" class="Symbol">(</a><a id="546" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="550" class="Symbol">;</a> <a id="552" href="Data.List.Base.html#7191" class="InductiveConstructor">[]</a><a id="554" class="Symbol">;</a> <a id="556" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="559" class="Symbol">;</a> <a id="561" href="Data.List.Base.html#1834" class="Function Operator">_++_</a><a id="565" class="Symbol">)</a>
<a id="567" class="Keyword">import</a> <a id="574" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="593" class="Symbol">as</a> <a id="596" class="Module">List⁺</a>
<a id="602" class="Keyword">open</a> <a id="607" class="Keyword">import</a> <a id="614" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="630" class="Symbol">as</a> <a id="633" class="Module">Maybe</a> <a id="639" class="Keyword">using</a> <a id="645" class="Symbol">(</a><a id="646" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a><a id="651" class="Symbol">;</a> <a id="653" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a><a id="657" class="Symbol">;</a> <a id="659" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a><a id="666" class="Symbol">;</a> <a id="668" href="Data.Maybe.Base.html#1563" class="Function">maybe′</a><a id="674" class="Symbol">)</a>
<a id="676" class="Keyword">open</a> <a id="681" class="Keyword">import</a> <a id="688" href="Data.Product.html" class="Module">Data.Product</a> <a id="701" class="Symbol">as</a> <a id="704" class="Module">Prod</a> <a id="709" class="Keyword">using</a> <a id="715" class="Symbol">(</a><a id="716" href="Data.Product.html#1378" class="Function">∃</a><a id="717" class="Symbol">)</a>
<a id="719" class="Keyword">open</a> <a id="724" class="Keyword">import</a> <a id="731" href="Data.These.Base.html" class="Module">Data.These.Base</a> <a id="747" class="Symbol">as</a> <a id="750" class="Module">These</a> <a id="756" class="Keyword">using</a> <a id="762" class="Symbol">(</a><a id="763" href="Data.These.Base.html#537" class="Datatype">These</a><a id="768" class="Symbol">)</a>
<a id="770" class="Keyword">open</a> <a id="775" class="Keyword">import</a> <a id="782" href="Function.html" class="Module">Function</a>
<a id="791" class="Keyword">open</a> <a id="796" class="Keyword">import</a> <a id="803" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="818" class="Keyword">using</a> <a id="824" class="Symbol">(</a><a id="825" href="Relation.Unary.html#3507" class="Function">IUniversal</a><a id="835" class="Symbol">;</a> <a id="837" href="Relation.Unary.html#4499" class="Function Operator">_⇒_</a><a id="840" class="Symbol">)</a>

<a id="843" class="Keyword">open</a> <a id="848" href="Relation.Binary.Bundles.html#6937" class="Module">StrictTotalOrder</a> <a id="865" href="Data.Trie.html#442" class="Bound">S</a>
  <a id="869" class="Keyword">using</a> <a id="875" class="Symbol">(</a><a id="876" class="Keyword">module</a> <a id="883" href="Relation.Binary.Bundles.html#4465" class="Module">Eq</a><a id="885" class="Symbol">)</a>
  <a id="889" class="Keyword">renaming</a> <a id="898" class="Symbol">(</a><a id="899" href="Relation.Binary.Bundles.html#7024" class="Field">Carrier</a> <a id="907" class="Symbol">to</a> <a id="910" class="Field">Key</a><a id="913" class="Symbol">)</a>

<a id="916" class="Keyword">open</a> <a id="921" class="Keyword">import</a> <a id="928" href="Data.List.Relation.Binary.Equality.Setoid.html" class="Module">Data.List.Relation.Binary.Equality.Setoid</a> <a id="970" href="Relation.Binary.Bundles.html#4478" class="Function">Eq.setoid</a>
<a id="980" class="Keyword">open</a> <a id="985" class="Keyword">import</a> <a id="992" href="Data.Tree.AVL.Value.html" class="Module">Data.Tree.AVL.Value</a> <a id="1012" href="Data.List.Relation.Binary.Equality.Setoid.html#1726" class="Function">≋-setoid</a> <a id="1021" class="Keyword">using</a> <a id="1027" class="Symbol">(</a><a id="1028" href="Data.Tree.AVL.Value.html#647" class="Record">Value</a><a id="1033" class="Symbol">)</a>

<a id="1036" class="Comment">------------------------------------------------------------------------</a>
<a id="1109" class="Comment">-- Definition</a>

<a id="1124" class="Comment">-- Trie is defined in terms of Trie⁺, the type of non-empty trie. This</a>
<a id="1195" class="Comment">-- guarantees that the trie is minimal: each path in the tree leads to</a>
<a id="1266" class="Comment">-- either a value or a number of non-empty sub-tries.</a>

<a id="1321" class="Keyword">open</a> <a id="1326" class="Keyword">import</a> <a id="1333" href="Data.Trie.NonEmpty.html" class="Module">Data.Trie.NonEmpty</a> <a id="1352" href="Data.Trie.html#442" class="Bound">S</a> as <a id="Trie⁺"></a><a id="1357" href="Data.Trie.html#1357" class="Module">Trie⁺</a> <a id="1363" class="Keyword">public</a>
  <a id="1372" class="Keyword">using</a> <a id="1378" class="Symbol">(</a><a id="1379" href="Data.Trie.NonEmpty.html#1777" class="Datatype">Trie⁺</a><a id="1384" class="Symbol">;</a> <a id="1386" href="Data.Trie.NonEmpty.html#1830" class="Function">Tries⁺</a><a id="1392" class="Symbol">;</a> <a id="1394" href="Data.Trie.NonEmpty.html#1610" class="Function">Word</a><a id="1398" class="Symbol">;</a> <a id="1400" href="Data.Trie.NonEmpty.html#1640" class="Function">eat</a><a id="1403" class="Symbol">)</a>

<a id="Trie"></a><a id="1406" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="1411" class="Symbol">:</a> <a id="1413" class="Symbol">∀</a> <a id="1415" class="Symbol">{</a><a id="1416" href="Data.Trie.html#1416" class="Bound">v</a><a id="1417" class="Symbol">}</a> <a id="1419" class="Symbol">(</a><a id="1420" href="Data.Trie.html#1420" class="Bound">V</a> <a id="1422" class="Symbol">:</a> <a id="1424" href="Data.Tree.AVL.Value.html#647" class="Record">Value</a> <a id="1430" href="Data.Trie.html#1416" class="Bound">v</a><a id="1431" class="Symbol">)</a> <a id="1433" class="Symbol">→</a> <a id="1435" href="Agda.Builtin.Size.html#196" class="Postulate">Size</a> <a id="1440" class="Symbol">→</a> <a id="1442" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1446" class="Symbol">(</a><a id="1447" href="Data.Trie.html#1416" class="Bound">v</a> <a id="1449" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="1451" href="Data.Trie.html#434" class="Bound">k</a> <a id="1453" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="1455" href="Data.Trie.html#436" class="Bound">e</a> <a id="1457" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="1459" href="Data.Trie.html#438" class="Bound">r</a><a id="1460" class="Symbol">)</a>
<a id="1462" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="1467" href="Data.Trie.html#1467" class="Bound">V</a> <a id="1469" href="Data.Trie.html#1469" class="Bound">i</a> <a id="1471" class="Symbol">=</a> <a id="1473" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="1479" class="Symbol">(</a><a id="1480" href="Data.Trie.NonEmpty.html#1777" class="Datatype">Trie⁺</a> <a id="1486" href="Data.Trie.html#1467" class="Bound">V</a> <a id="1488" href="Data.Trie.html#1469" class="Bound">i</a><a id="1489" class="Symbol">)</a>

<a id="1492" class="Comment">------------------------------------------------------------------------</a>
<a id="1565" class="Comment">-- Operations</a>

<a id="1580" class="Comment">-- Functions acting on Trie are wrappers for functions acting on Tries.</a>
<a id="1652" class="Comment">-- Sometimes the empty case is handled in a special way (e.g. insertWith</a>
<a id="1725" class="Comment">-- calls singleton when faced with an empty Trie).</a>

<a id="1777" class="Keyword">module</a> <a id="1784" href="Data.Trie.html#1784" class="Module">_</a> <a id="1786" class="Symbol">{</a><a id="1787" href="Data.Trie.html#1787" class="Bound">v</a><a id="1788" class="Symbol">}</a> <a id="1790" class="Symbol">{</a><a id="1791" href="Data.Trie.html#1791" class="Bound">V</a> <a id="1793" class="Symbol">:</a> <a id="1795" href="Data.Tree.AVL.Value.html#647" class="Record">Value</a> <a id="1801" href="Data.Trie.html#1787" class="Bound">v</a><a id="1802" class="Symbol">}</a> <a id="1804" class="Keyword">where</a>

  <a id="1813" class="Keyword">private</a> <a id="1821" href="Data.Trie.html#1821" class="Function">Val</a> <a id="1825" class="Symbol">=</a> <a id="1827" href="Data.Tree.AVL.Value.html#717" class="Field">Value.family</a> <a id="1840" href="Data.Trie.html#1791" class="Bound">V</a>

<a id="1843" class="Comment">------------------------------------------------------------------------</a>
<a id="1916" class="Comment">-- Lookup</a>

  <a id="1929" href="Data.Trie.html#1929" class="Function">lookup</a> <a id="1936" class="Symbol">:</a> <a id="1938" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="1943" href="Data.Trie.html#1791" class="Bound">V</a> <a id="1945" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="1947" class="Symbol">→</a> <a id="1949" class="Symbol">∀</a> <a id="1951" href="Data.Trie.html#1951" class="Bound">ks</a> <a id="1954" class="Symbol">→</a> <a id="1956" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="1962" class="Symbol">(</a><a id="1963" href="Data.These.Base.html#537" class="Datatype">These</a> <a id="1969" class="Symbol">(</a><a id="1970" href="Data.Trie.html#1821" class="Function">Val</a> <a id="1974" href="Data.Trie.html#1951" class="Bound">ks</a><a id="1976" class="Symbol">)</a> <a id="1978" class="Symbol">(</a><a id="1979" href="Data.Trie.NonEmpty.html#1830" class="Function">Tries⁺</a> <a id="1986" class="Symbol">(</a><a id="1987" href="Data.Trie.NonEmpty.html#1640" class="Function">eat</a> <a id="1991" href="Data.Trie.html#1791" class="Bound">V</a> <a id="1993" href="Data.Trie.html#1951" class="Bound">ks</a><a id="1995" class="Symbol">)</a> <a id="1997" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a><a id="1998" class="Symbol">))</a>
  <a id="2003" href="Data.Trie.html#1929" class="Function">lookup</a> <a id="2010" href="Data.Trie.html#2010" class="Bound">t</a> <a id="2012" href="Data.Trie.html#2012" class="Bound">ks</a> <a id="2015" class="Symbol">=</a> <a id="2017" href="Data.Trie.html#2010" class="Bound">t</a> <a id="2019" href="Data.Maybe.Base.html#2236" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2029" class="Symbol">λ</a> <a id="2031" href="Data.Trie.html#2031" class="Bound">ts</a> <a id="2034" class="Symbol">→</a> <a id="2036" href="Data.Trie.NonEmpty.html#2365" class="Function">Trie⁺.lookup</a> <a id="2049" href="Data.Trie.html#2031" class="Bound">ts</a> <a id="2052" href="Data.Trie.html#2012" class="Bound">ks</a>

  <a id="2058" href="Data.Trie.html#2058" class="Function">lookupValue</a> <a id="2070" class="Symbol">:</a> <a id="2072" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="2077" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2079" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2081" class="Symbol">→</a> <a id="2083" class="Symbol">∀</a> <a id="2085" href="Data.Trie.html#2085" class="Bound">ks</a> <a id="2088" class="Symbol">→</a> <a id="2090" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="2096" class="Symbol">(</a><a id="2097" href="Data.Trie.html#1821" class="Function">Val</a> <a id="2101" href="Data.Trie.html#2085" class="Bound">ks</a><a id="2103" class="Symbol">)</a>
  <a id="2107" href="Data.Trie.html#2058" class="Function">lookupValue</a> <a id="2119" href="Data.Trie.html#2119" class="Bound">t</a> <a id="2121" href="Data.Trie.html#2121" class="Bound">ks</a> <a id="2124" class="Symbol">=</a> <a id="2126" href="Data.Trie.html#2119" class="Bound">t</a> <a id="2128" href="Data.Maybe.Base.html#2236" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2138" class="Symbol">λ</a> <a id="2140" href="Data.Trie.html#2140" class="Bound">ts</a> <a id="2143" class="Symbol">→</a> <a id="2145" href="Data.Trie.NonEmpty.html#2688" class="Function">Trie⁺.lookupValue</a> <a id="2163" href="Data.Trie.html#2140" class="Bound">ts</a> <a id="2166" href="Data.Trie.html#2121" class="Bound">ks</a>

  <a id="2172" href="Data.Trie.html#2172" class="Function">lookupTries⁺</a> <a id="2185" class="Symbol">:</a> <a id="2187" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="2192" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2194" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2196" class="Symbol">→</a> <a id="2198" class="Symbol">∀</a> <a id="2200" href="Data.Trie.html#2200" class="Bound">ks</a> <a id="2203" class="Symbol">→</a> <a id="2205" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="2211" class="Symbol">(</a><a id="2212" href="Data.Trie.NonEmpty.html#1830" class="Function">Tries⁺</a> <a id="2219" class="Symbol">(</a><a id="2220" href="Data.Trie.NonEmpty.html#1640" class="Function">eat</a> <a id="2224" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2226" href="Data.Trie.html#2200" class="Bound">ks</a><a id="2228" class="Symbol">)</a> <a id="2230" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a><a id="2231" class="Symbol">)</a>
  <a id="2235" href="Data.Trie.html#2172" class="Function">lookupTries⁺</a> <a id="2248" href="Data.Trie.html#2248" class="Bound">t</a> <a id="2250" href="Data.Trie.html#2250" class="Bound">ks</a> <a id="2253" class="Symbol">=</a> <a id="2255" href="Data.Trie.html#2248" class="Bound">t</a> <a id="2257" href="Data.Maybe.Base.html#2236" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2267" class="Symbol">λ</a> <a id="2269" href="Data.Trie.html#2269" class="Bound">ts</a> <a id="2272" class="Symbol">→</a> <a id="2274" href="Data.Trie.NonEmpty.html#2809" class="Function">Trie⁺.lookupTries⁺</a> <a id="2293" href="Data.Trie.html#2269" class="Bound">ts</a> <a id="2296" href="Data.Trie.html#2250" class="Bound">ks</a>

  <a id="2302" href="Data.Trie.html#2302" class="Function">lookupTrie</a> <a id="2313" class="Symbol">:</a> <a id="2315" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="2320" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2322" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2324" class="Symbol">→</a> <a id="2326" class="Symbol">∀</a> <a id="2328" href="Data.Trie.html#2328" class="Bound">k</a> <a id="2330" class="Symbol">→</a> <a id="2332" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="2337" class="Symbol">(</a><a id="2338" href="Data.Trie.NonEmpty.html#1640" class="Function">eat</a> <a id="2342" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2344" class="Symbol">(</a><a id="2345" href="Data.Trie.html#2328" class="Bound">k</a> <a id="2347" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2349" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="2351" class="Symbol">))</a> <a id="2354" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2358" href="Data.Trie.html#2302" class="Function">lookupTrie</a> <a id="2369" href="Data.Trie.html#2369" class="Bound">t</a> <a id="2371" href="Data.Trie.html#2371" class="Bound">k</a> <a id="2373" class="Symbol">=</a> <a id="2375" href="Data.Trie.html#2369" class="Bound">t</a> <a id="2377" href="Data.Maybe.Base.html#2236" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2387" class="Symbol">λ</a> <a id="2389" href="Data.Trie.html#2389" class="Bound">ts</a> <a id="2392" class="Symbol">→</a> <a id="2394" href="Data.Trie.NonEmpty.html#2933" class="Function">Trie⁺.lookupTrie⁺</a> <a id="2412" href="Data.Trie.html#2389" class="Bound">ts</a> <a id="2415" href="Data.Trie.html#2371" class="Bound">k</a>

<a id="2418" class="Comment">------------------------------------------------------------------------</a>
<a id="2491" class="Comment">-- Construction</a>

  <a id="2510" href="Data.Trie.html#2510" class="Function">empty</a> <a id="2516" class="Symbol">:</a> <a id="2518" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="2523" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2525" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2529" href="Data.Trie.html#2510" class="Function">empty</a> <a id="2535" class="Symbol">=</a> <a id="2537" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>

  <a id="2548" href="Data.Trie.html#2548" class="Function">singleton</a> <a id="2558" class="Symbol">:</a> <a id="2560" class="Symbol">∀</a> <a id="2562" href="Data.Trie.html#2562" class="Bound">ks</a> <a id="2565" class="Symbol">→</a> <a id="2567" href="Data.Trie.html#1821" class="Function">Val</a> <a id="2571" href="Data.Trie.html#2562" class="Bound">ks</a> <a id="2574" class="Symbol">→</a> <a id="2576" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="2581" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2583" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2587" href="Data.Trie.html#2548" class="Function">singleton</a> <a id="2597" href="Data.Trie.html#2597" class="Bound">ks</a> <a id="2600" href="Data.Trie.html#2600" class="Bound">v</a> <a id="2602" class="Symbol">=</a> <a id="2604" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2609" class="Symbol">(</a><a id="2610" href="Data.Trie.NonEmpty.html#3162" class="Function">Trie⁺.singleton</a> <a id="2626" href="Data.Trie.html#2597" class="Bound">ks</a> <a id="2629" href="Data.Trie.html#2600" class="Bound">v</a><a id="2630" class="Symbol">)</a>

  <a id="2635" href="Data.Trie.html#2635" class="Function">insertWith</a> <a id="2646" class="Symbol">:</a> <a id="2648" class="Symbol">∀</a> <a id="2650" href="Data.Trie.html#2650" class="Bound">ks</a> <a id="2653" class="Symbol">→</a> <a id="2655" class="Symbol">(</a><a id="2656" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="2662" class="Symbol">(</a><a id="2663" href="Data.Trie.html#1821" class="Function">Val</a> <a id="2667" href="Data.Trie.html#2650" class="Bound">ks</a><a id="2669" class="Symbol">)</a> <a id="2671" class="Symbol">→</a> <a id="2673" href="Data.Trie.html#1821" class="Function">Val</a> <a id="2677" href="Data.Trie.html#2650" class="Bound">ks</a><a id="2679" class="Symbol">)</a> <a id="2681" class="Symbol">→</a> <a id="2683" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="2688" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2690" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2692" class="Symbol">→</a> <a id="2694" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="2699" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2701" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2705" href="Data.Trie.html#2635" class="Function">insertWith</a> <a id="2716" href="Data.Trie.html#2716" class="Bound">ks</a> <a id="2719" href="Data.Trie.html#2719" class="Bound">f</a> <a id="2721" class="Symbol">(</a><a id="2722" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2727" href="Data.Trie.html#2727" class="Bound">t</a><a id="2728" class="Symbol">)</a> <a id="2730" class="Symbol">=</a> <a id="2732" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2737" class="Symbol">(</a><a id="2738" href="Data.Trie.NonEmpty.html#3333" class="Function">Trie⁺.insertWith</a> <a id="2755" href="Data.Trie.html#2716" class="Bound">ks</a> <a id="2758" href="Data.Trie.html#2719" class="Bound">f</a> <a id="2760" href="Data.Trie.html#2727" class="Bound">t</a><a id="2761" class="Symbol">)</a>
  <a id="2765" href="Data.Trie.html#2635" class="Function">insertWith</a> <a id="2776" href="Data.Trie.html#2776" class="Bound">ks</a> <a id="2779" href="Data.Trie.html#2779" class="Bound">f</a> <a id="2781" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>  <a id="2790" class="Symbol">=</a> <a id="2792" href="Data.Trie.html#2548" class="Function">singleton</a> <a id="2802" href="Data.Trie.html#2776" class="Bound">ks</a> <a id="2805" class="Symbol">(</a><a id="2806" href="Data.Trie.html#2779" class="Bound">f</a> <a id="2808" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a><a id="2815" class="Symbol">)</a>

  <a id="2820" href="Data.Trie.html#2820" class="Function">insert</a> <a id="2827" class="Symbol">:</a> <a id="2829" class="Symbol">∀</a> <a id="2831" href="Data.Trie.html#2831" class="Bound">ks</a> <a id="2834" class="Symbol">→</a> <a id="2836" href="Data.Trie.html#1821" class="Function">Val</a> <a id="2840" href="Data.Trie.html#2831" class="Bound">ks</a> <a id="2843" class="Symbol">→</a> <a id="2845" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="2850" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2852" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2854" class="Symbol">→</a> <a id="2856" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="2861" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2863" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2867" href="Data.Trie.html#2820" class="Function">insert</a> <a id="2874" href="Data.Trie.html#2874" class="Bound">ks</a> <a id="2877" class="Symbol">=</a> <a id="2879" href="Data.Trie.html#2635" class="Function">insertWith</a> <a id="2890" href="Data.Trie.html#2874" class="Bound">ks</a> <a id="2893" href="Function.Base.html#3646" class="Function Operator">∘′</a> <a id="2896" href="Function.Base.html#725" class="Function">const</a>

  <a id="2905" href="Data.Trie.html#2905" class="Function">fromList</a> <a id="2914" class="Symbol">:</a> <a id="2916" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="2921" class="Symbol">(</a><a id="2922" href="Data.Product.html#1378" class="Function">∃</a> <a id="2924" href="Data.Trie.html#1821" class="Function">Val</a><a id="2927" class="Symbol">)</a> <a id="2929" class="Symbol">→</a> <a id="2931" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="2936" href="Data.Trie.html#1791" class="Bound">V</a> <a id="2938" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2942" href="Data.Trie.html#2905" class="Function">fromList</a> <a id="2951" class="Symbol">=</a> <a id="2953" href="Data.Maybe.Base.html#2029" class="Function">Maybe.map</a> <a id="2963" href="Data.Trie.NonEmpty.html#4061" class="Function">Trie⁺.fromList⁺</a> <a id="2979" href="Function.Base.html#3646" class="Function Operator">∘′</a> <a id="2982" href="Data.List.NonEmpty.Base.html#1833" class="Function">List⁺.fromList</a>

  <a id="3000" href="Data.Trie.html#3000" class="Function">toList</a> <a id="3007" class="Symbol">:</a> <a id="3009" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="3014" href="Data.Trie.html#1791" class="Bound">V</a> <a id="3016" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="3018" class="Symbol">→</a> <a id="3020" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="3025" class="Symbol">(</a><a id="3026" href="Data.Product.html#1378" class="Function">∃</a> <a id="3028" href="Data.Trie.html#1821" class="Function">Val</a><a id="3031" class="Symbol">)</a>
  <a id="3035" href="Data.Trie.html#3000" class="Function">toList</a> <a id="3042" class="Symbol">(</a><a id="3043" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="3048" href="Data.Trie.html#3048" class="Bound">t</a><a id="3049" class="Symbol">)</a> <a id="3051" class="Symbol">=</a> <a id="3053" href="Data.List.NonEmpty.Base.html#1781" class="Function">List⁺.toList</a> <a id="3066" class="Symbol">(</a><a id="3067" href="Data.Trie.NonEmpty.html#4163" class="Function">Trie⁺.toList⁺</a> <a id="3081" href="Data.Trie.html#3048" class="Bound">t</a><a id="3082" class="Symbol">)</a>
  <a id="3086" href="Data.Trie.html#3000" class="Function">toList</a> <a id="3093" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>  <a id="3102" class="Symbol">=</a> <a id="3104" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

<a id="3108" class="Comment">------------------------------------------------------------------------</a>
<a id="3181" class="Comment">-- Modification</a>

<a id="3198" class="Keyword">module</a> <a id="3205" href="Data.Trie.html#3205" class="Module">_</a> <a id="3207" class="Symbol">{</a><a id="3208" href="Data.Trie.html#3208" class="Bound">v</a> <a id="3210" href="Data.Trie.html#3210" class="Bound">w</a><a id="3211" class="Symbol">}</a> <a id="3213" class="Symbol">{</a><a id="3214" href="Data.Trie.html#3214" class="Bound">V</a> <a id="3216" class="Symbol">:</a> <a id="3218" href="Data.Tree.AVL.Value.html#647" class="Record">Value</a> <a id="3224" href="Data.Trie.html#3208" class="Bound">v</a><a id="3225" class="Symbol">}</a> <a id="3227" class="Symbol">{</a><a id="3228" href="Data.Trie.html#3228" class="Bound">W</a> <a id="3230" class="Symbol">:</a> <a id="3232" href="Data.Tree.AVL.Value.html#647" class="Record">Value</a> <a id="3238" href="Data.Trie.html#3210" class="Bound">w</a><a id="3239" class="Symbol">}</a> <a id="3241" class="Keyword">where</a>

  <a id="3250" class="Keyword">private</a>
    <a id="3262" href="Data.Trie.html#3262" class="Function">Val</a> <a id="3266" class="Symbol">=</a> <a id="3268" href="Data.Tree.AVL.Value.html#717" class="Field">Value.family</a> <a id="3281" href="Data.Trie.html#3214" class="Bound">V</a>
    <a id="3287" href="Data.Trie.html#3287" class="Function">Wal</a> <a id="3291" class="Symbol">=</a> <a id="3293" href="Data.Tree.AVL.Value.html#717" class="Field">Value.family</a> <a id="3306" href="Data.Trie.html#3228" class="Bound">W</a>

  <a id="3311" href="Data.Trie.html#3311" class="Function">map</a> <a id="3315" class="Symbol">:</a> <a id="3317" class="Symbol">∀</a> <a id="3319" class="Symbol">{</a><a id="3320" href="Data.Trie.html#3320" class="Bound">i</a><a id="3321" class="Symbol">}</a> <a id="3323" class="Symbol">→</a> <a id="3325" href="Relation.Unary.html#3507" class="Function">∀[</a> <a id="3328" href="Data.Trie.html#3262" class="Function">Val</a> <a id="3332" href="Relation.Unary.html#4499" class="Function Operator">⇒</a> <a id="3334" href="Data.Trie.html#3287" class="Function">Wal</a> <a id="3338" href="Relation.Unary.html#3507" class="Function">]</a> <a id="3340" class="Symbol">→</a> <a id="3342" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="3347" href="Data.Trie.html#3214" class="Bound">V</a> <a id="3349" href="Data.Trie.html#3320" class="Bound">i</a> <a id="3351" class="Symbol">→</a> <a id="3353" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="3358" href="Data.Trie.html#3228" class="Bound">W</a> <a id="3360" href="Data.Trie.html#3320" class="Bound">i</a>
  <a id="3364" href="Data.Trie.html#3311" class="Function">map</a> <a id="3368" class="Symbol">=</a> <a id="3370" href="Data.Maybe.Base.html#2029" class="Function">Maybe.map</a> <a id="3380" href="Function.Base.html#3646" class="Function Operator">∘′</a> <a id="3383" href="Data.Trie.NonEmpty.html#1893" class="Function">Trie⁺.map</a> <a id="3393" href="Data.Trie.html#3214" class="Bound">V</a> <a id="3395" href="Data.Trie.html#3228" class="Bound">W</a>

<a id="3398" class="Comment">-- Deletion</a>

<a id="3411" class="Keyword">module</a> <a id="3418" href="Data.Trie.html#3418" class="Module">_</a> <a id="3420" class="Symbol">{</a><a id="3421" href="Data.Trie.html#3421" class="Bound">v</a><a id="3422" class="Symbol">}</a> <a id="3424" class="Symbol">{</a><a id="3425" href="Data.Trie.html#3425" class="Bound">V</a> <a id="3427" class="Symbol">:</a> <a id="3429" href="Data.Tree.AVL.Value.html#647" class="Record">Value</a> <a id="3435" href="Data.Trie.html#3421" class="Bound">v</a><a id="3436" class="Symbol">}</a> <a id="3438" class="Keyword">where</a>

  <a id="3447" class="Comment">-- Use a function to decide how to modify the sub-Trie⁺ whose root is</a>
  <a id="3519" class="Comment">-- at the end of path ks.</a>
  <a id="3547" href="Data.Trie.html#3547" class="Function">deleteWith</a> <a id="3558" class="Symbol">:</a> <a id="3560" class="Symbol">∀</a> <a id="3562" class="Symbol">{</a><a id="3563" href="Data.Trie.html#3563" class="Bound">i</a><a id="3564" class="Symbol">}</a> <a id="3566" class="Symbol">(</a><a id="3567" href="Data.Trie.html#3567" class="Bound">ks</a> <a id="3570" class="Symbol">:</a> <a id="3572" href="Data.Trie.NonEmpty.html#1610" class="Function">Word</a><a id="3576" class="Symbol">)</a> <a id="3578" class="Symbol">→</a>
     <a id="3585" class="Symbol">(∀</a> <a id="3588" class="Symbol">{</a><a id="3589" href="Data.Trie.html#3589" class="Bound">i</a><a id="3590" class="Symbol">}</a> <a id="3592" class="Symbol">→</a> <a id="3594" href="Data.Trie.NonEmpty.html#1777" class="Datatype">Trie⁺</a> <a id="3600" class="Symbol">(</a><a id="3601" href="Data.Trie.NonEmpty.html#1640" class="Function">eat</a> <a id="3605" href="Data.Trie.html#3425" class="Bound">V</a> <a id="3607" href="Data.Trie.html#3567" class="Bound">ks</a><a id="3609" class="Symbol">)</a> <a id="3611" href="Data.Trie.html#3589" class="Bound">i</a> <a id="3613" class="Symbol">→</a> <a id="3615" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="3621" class="Symbol">(</a><a id="3622" href="Data.Trie.NonEmpty.html#1777" class="Datatype">Trie⁺</a> <a id="3628" class="Symbol">(</a><a id="3629" href="Data.Trie.NonEmpty.html#1640" class="Function">eat</a> <a id="3633" href="Data.Trie.html#3425" class="Bound">V</a> <a id="3635" href="Data.Trie.html#3567" class="Bound">ks</a><a id="3637" class="Symbol">)</a> <a id="3639" href="Data.Trie.html#3589" class="Bound">i</a><a id="3640" class="Symbol">))</a> <a id="3643" class="Symbol">→</a>
     <a id="3650" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="3655" href="Data.Trie.html#3425" class="Bound">V</a> <a id="3657" href="Data.Trie.html#3563" class="Bound">i</a> <a id="3659" class="Symbol">→</a> <a id="3661" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="3666" href="Data.Trie.html#3425" class="Bound">V</a> <a id="3668" href="Data.Trie.html#3563" class="Bound">i</a>
  <a id="3672" href="Data.Trie.html#3547" class="Function">deleteWith</a> <a id="3683" href="Data.Trie.html#3683" class="Bound">ks</a> <a id="3686" href="Data.Trie.html#3686" class="Bound">f</a> <a id="3688" href="Data.Trie.html#3688" class="Bound">t</a> <a id="3690" class="Symbol">=</a> <a id="3692" href="Data.Trie.html#3688" class="Bound">t</a> <a id="3694" href="Data.Maybe.Base.html#2236" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="3704" href="Data.Trie.NonEmpty.html#4628" class="Function">Trie⁺.deleteWith</a> <a id="3721" href="Data.Trie.html#3683" class="Bound">ks</a> <a id="3724" href="Data.Trie.html#3686" class="Bound">f</a>

  <a id="3729" class="Comment">-- Remove the whole node</a>
  <a id="3756" href="Data.Trie.html#3756" class="Function">deleteTrie⁺</a> <a id="3768" class="Symbol">:</a> <a id="3770" class="Symbol">∀</a> <a id="3772" class="Symbol">{</a><a id="3773" href="Data.Trie.html#3773" class="Bound">i</a><a id="3774" class="Symbol">}</a> <a id="3776" class="Symbol">(</a><a id="3777" href="Data.Trie.html#3777" class="Bound">ks</a> <a id="3780" class="Symbol">:</a> <a id="3782" href="Data.Trie.NonEmpty.html#1610" class="Function">Word</a><a id="3786" class="Symbol">)</a> <a id="3788" class="Symbol">→</a> <a id="3790" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="3795" href="Data.Trie.html#3425" class="Bound">V</a> <a id="3797" href="Data.Trie.html#3773" class="Bound">i</a> <a id="3799" class="Symbol">→</a> <a id="3801" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="3806" href="Data.Trie.html#3425" class="Bound">V</a> <a id="3808" href="Data.Trie.html#3773" class="Bound">i</a>
  <a id="3812" href="Data.Trie.html#3756" class="Function">deleteTrie⁺</a> <a id="3824" href="Data.Trie.html#3824" class="Bound">ks</a> <a id="3827" href="Data.Trie.html#3827" class="Bound">t</a> <a id="3829" class="Symbol">=</a> <a id="3831" href="Data.Trie.html#3827" class="Bound">t</a> <a id="3833" href="Data.Maybe.Base.html#2236" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="3843" href="Data.Trie.NonEmpty.html#5467" class="Function">Trie⁺.deleteTrie⁺</a> <a id="3861" href="Data.Trie.html#3824" class="Bound">ks</a>

  <a id="3867" class="Comment">-- Remove the value and keep the sub-Tries (if any)</a>
  <a id="3921" href="Data.Trie.html#3921" class="Function">deleteValue</a> <a id="3933" class="Symbol">:</a> <a id="3935" class="Symbol">∀</a> <a id="3937" class="Symbol">{</a><a id="3938" href="Data.Trie.html#3938" class="Bound">i</a><a id="3939" class="Symbol">}</a> <a id="3941" class="Symbol">(</a><a id="3942" href="Data.Trie.html#3942" class="Bound">ks</a> <a id="3945" class="Symbol">:</a> <a id="3947" href="Data.Trie.NonEmpty.html#1610" class="Function">Word</a><a id="3951" class="Symbol">)</a> <a id="3953" class="Symbol">→</a> <a id="3955" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="3960" href="Data.Trie.html#3425" class="Bound">V</a> <a id="3962" href="Data.Trie.html#3938" class="Bound">i</a> <a id="3964" class="Symbol">→</a> <a id="3966" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="3971" href="Data.Trie.html#3425" class="Bound">V</a> <a id="3973" href="Data.Trie.html#3938" class="Bound">i</a>
  <a id="3977" href="Data.Trie.html#3921" class="Function">deleteValue</a> <a id="3989" href="Data.Trie.html#3989" class="Bound">ks</a> <a id="3992" href="Data.Trie.html#3992" class="Bound">t</a> <a id="3994" class="Symbol">=</a> <a id="3996" href="Data.Trie.html#3992" class="Bound">t</a> <a id="3998" href="Data.Maybe.Base.html#2236" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="4008" href="Data.Trie.NonEmpty.html#5585" class="Function">Trie⁺.deleteValue</a> <a id="4026" href="Data.Trie.html#3989" class="Bound">ks</a>

  <a id="4032" class="Comment">-- Remove the sub-Tries and keep the value (if any)</a>
  <a id="4086" href="Data.Trie.html#4086" class="Function">deleteTries⁺</a> <a id="4099" class="Symbol">:</a> <a id="4101" class="Symbol">∀</a> <a id="4103" class="Symbol">{</a><a id="4104" href="Data.Trie.html#4104" class="Bound">i</a><a id="4105" class="Symbol">}</a> <a id="4107" class="Symbol">(</a><a id="4108" href="Data.Trie.html#4108" class="Bound">ks</a> <a id="4111" class="Symbol">:</a> <a id="4113" href="Data.Trie.NonEmpty.html#1610" class="Function">Word</a><a id="4117" class="Symbol">)</a> <a id="4119" class="Symbol">→</a> <a id="4121" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="4126" href="Data.Trie.html#3425" class="Bound">V</a> <a id="4128" href="Data.Trie.html#4104" class="Bound">i</a> <a id="4130" class="Symbol">→</a> <a id="4132" href="Data.Trie.html#1406" class="Function">Trie</a> <a id="4137" href="Data.Trie.html#3425" class="Bound">V</a> <a id="4139" href="Data.Trie.html#4104" class="Bound">i</a>
  <a id="4143" href="Data.Trie.html#4086" class="Function">deleteTries⁺</a> <a id="4156" href="Data.Trie.html#4156" class="Bound">ks</a> <a id="4159" href="Data.Trie.html#4159" class="Bound">t</a> <a id="4161" class="Symbol">=</a> <a id="4163" href="Data.Trie.html#4159" class="Bound">t</a> <a id="4165" href="Data.Maybe.Base.html#2236" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="4175" href="Data.Trie.NonEmpty.html#5749" class="Function">Trie⁺.deleteTries⁺</a> <a id="4194" href="Data.Trie.html#4156" class="Bound">ks</a>
</pre></body></html>