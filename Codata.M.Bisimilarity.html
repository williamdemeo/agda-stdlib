<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.M.Bisimilarity</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Bisimilarity for M-types</a>
<a id="134" class="Comment">------------------------------------------------------------------------</a>

<a id="208" class="Symbol">{-#</a> <a id="212" class="Keyword">OPTIONS</a> <a id="220" class="Pragma">--without-K</a> <a id="232" class="Pragma">--sized-types</a> <a id="246" class="Symbol">#-}</a>

<a id="251" class="Keyword">module</a> <a id="258" href="Codata.M.Bisimilarity.html" class="Module">Codata.M.Bisimilarity</a> <a id="280" class="Keyword">where</a>

<a id="287" class="Keyword">open</a> <a id="292" class="Keyword">import</a> <a id="299" href="Level.html" class="Module">Level</a>
<a id="305" class="Keyword">open</a> <a id="310" class="Keyword">import</a> <a id="317" href="Size.html" class="Module">Size</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Codata.Thunk.html" class="Module">Codata.Thunk</a>
<a id="347" class="Keyword">open</a> <a id="352" class="Keyword">import</a> <a id="359" href="Codata.M.html" class="Module">Codata.M</a>
<a id="368" class="Keyword">open</a> <a id="373" class="Keyword">import</a> <a id="380" href="Data.Container.Core.html" class="Module">Data.Container.Core</a>
<a id="400" class="Keyword">open</a> <a id="405" class="Keyword">import</a> <a id="412" href="Data.Container.Relation.Binary.Pointwise.html" class="Module">Data.Container.Relation.Binary.Pointwise</a> <a id="453" class="Keyword">using</a> <a id="459" class="Symbol">(</a><a id="460" href="Data.Container.Relation.Binary.Pointwise.html#714" class="Record">Pointwise</a><a id="469" class="Symbol">;</a> <a id="471" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">_,_</a><a id="474" class="Symbol">)</a>
<a id="476" class="Keyword">open</a> <a id="481" class="Keyword">import</a> <a id="488" href="Data.Product.html" class="Module">Data.Product</a> <a id="501" class="Keyword">using</a> <a id="507" class="Symbol">(</a><a id="508" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a><a id="511" class="Symbol">)</a>
<a id="513" class="Keyword">open</a> <a id="518" class="Keyword">import</a> <a id="525" href="Function.Base.html" class="Module">Function.Base</a> <a id="539" class="Keyword">using</a> <a id="545" class="Symbol">(</a><a id="546" href="Function.Base.html#4414" class="Function Operator">_∋_</a><a id="549" class="Symbol">)</a>
<a id="551" class="Keyword">open</a> <a id="556" class="Keyword">import</a> <a id="563" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="579" class="Keyword">import</a> <a id="586" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="624" class="Symbol">as</a> <a id="627" class="Module">P</a>

<a id="630" class="Keyword">data</a> <a id="Bisim"></a><a id="635" href="Codata.M.Bisimilarity.html#635" class="Datatype">Bisim</a> <a id="641" class="Symbol">{</a><a id="642" href="Codata.M.Bisimilarity.html#642" class="Bound">s</a> <a id="644" href="Codata.M.Bisimilarity.html#644" class="Bound">p</a><a id="645" class="Symbol">}</a> <a id="647" class="Symbol">(</a><a id="648" href="Codata.M.Bisimilarity.html#648" class="Bound">C</a> <a id="650" class="Symbol">:</a> <a id="652" href="Data.Container.Core.html#558" class="Record">Container</a> <a id="662" href="Codata.M.Bisimilarity.html#642" class="Bound">s</a> <a id="664" href="Codata.M.Bisimilarity.html#644" class="Bound">p</a><a id="665" class="Symbol">)</a> <a id="667" class="Symbol">(</a><a id="668" href="Codata.M.Bisimilarity.html#668" class="Bound">i</a> <a id="670" class="Symbol">:</a> <a id="672" href="Agda.Builtin.Size.html#202" class="Postulate">Size</a><a id="676" class="Symbol">)</a> <a id="678" class="Symbol">:</a> <a id="680" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="684" class="Symbol">(</a><a id="685" href="Codata.M.html#454" class="Datatype">M</a> <a id="687" href="Codata.M.Bisimilarity.html#648" class="Bound">C</a> <a id="689" href="Agda.Builtin.Size.html#304" class="Postulate">∞</a><a id="690" class="Symbol">)</a> <a id="692" class="Symbol">(</a><a id="693" href="Codata.M.Bisimilarity.html#642" class="Bound">s</a> <a id="695" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="697" href="Codata.M.Bisimilarity.html#644" class="Bound">p</a><a id="698" class="Symbol">)</a> <a id="700" class="Keyword">where</a>
  <a id="Bisim.inf"></a><a id="708" href="Codata.M.Bisimilarity.html#708" class="InductiveConstructor">inf</a> <a id="712" class="Symbol">:</a> <a id="714" class="Symbol">∀</a> <a id="716" class="Symbol">{</a><a id="717" href="Codata.M.Bisimilarity.html#717" class="Bound">t</a> <a id="719" href="Codata.M.Bisimilarity.html#719" class="Bound">u</a><a id="720" class="Symbol">}</a> <a id="722" class="Symbol">→</a> <a id="724" href="Data.Container.Relation.Binary.Pointwise.html#714" class="Record">Pointwise</a> <a id="734" href="Codata.M.Bisimilarity.html#648" class="Bound">C</a> <a id="736" class="Symbol">(</a><a id="737" href="Codata.Thunk.html#744" class="Function">Thunk^R</a> <a id="745" class="Symbol">(</a><a id="746" href="Codata.M.Bisimilarity.html#635" class="Datatype">Bisim</a> <a id="752" href="Codata.M.Bisimilarity.html#648" class="Bound">C</a><a id="753" class="Symbol">)</a> <a id="755" href="Codata.M.Bisimilarity.html#668" class="Bound">i</a><a id="756" class="Symbol">)</a> <a id="758" href="Codata.M.Bisimilarity.html#717" class="Bound">t</a> <a id="760" href="Codata.M.Bisimilarity.html#719" class="Bound">u</a> <a id="762" class="Symbol">→</a> <a id="764" href="Codata.M.Bisimilarity.html#635" class="Datatype">Bisim</a> <a id="770" href="Codata.M.Bisimilarity.html#648" class="Bound">C</a> <a id="772" href="Codata.M.Bisimilarity.html#668" class="Bound">i</a> <a id="774" class="Symbol">(</a><a id="775" href="Codata.M.html#515" class="InductiveConstructor">inf</a> <a id="779" href="Codata.M.Bisimilarity.html#717" class="Bound">t</a><a id="780" class="Symbol">)</a> <a id="782" class="Symbol">(</a><a id="783" href="Codata.M.html#515" class="InductiveConstructor">inf</a> <a id="787" href="Codata.M.Bisimilarity.html#719" class="Bound">u</a><a id="788" class="Symbol">)</a>

<a id="791" class="Keyword">module</a> <a id="798" href="Codata.M.Bisimilarity.html#798" class="Module">_</a> <a id="800" class="Symbol">{</a><a id="801" href="Codata.M.Bisimilarity.html#801" class="Bound">s</a> <a id="803" href="Codata.M.Bisimilarity.html#803" class="Bound">p</a><a id="804" class="Symbol">}</a> <a id="806" class="Symbol">{</a><a id="807" href="Codata.M.Bisimilarity.html#807" class="Bound">C</a> <a id="809" class="Symbol">:</a> <a id="811" href="Data.Container.Core.html#558" class="Record">Container</a> <a id="821" href="Codata.M.Bisimilarity.html#801" class="Bound">s</a> <a id="823" href="Codata.M.Bisimilarity.html#803" class="Bound">p</a><a id="824" class="Symbol">}</a> <a id="826" class="Keyword">where</a>

  <a id="835" class="Comment">-- unfortunately the proofs are a lot nicer if we do not use the combinators</a>
  <a id="914" class="Comment">-- C.refl, C.sym and C.trans</a>

  <a id="946" href="Codata.M.Bisimilarity.html#946" class="Function">refl</a> <a id="951" class="Symbol">:</a> <a id="953" class="Symbol">∀</a> <a id="955" class="Symbol">{</a><a id="956" href="Codata.M.Bisimilarity.html#956" class="Bound">i</a><a id="957" class="Symbol">}</a> <a id="959" class="Symbol">→</a> <a id="961" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="971" class="Symbol">(</a><a id="972" href="Codata.M.Bisimilarity.html#635" class="Datatype">Bisim</a> <a id="978" href="Codata.M.Bisimilarity.html#807" class="Bound">C</a> <a id="980" href="Codata.M.Bisimilarity.html#956" class="Bound">i</a><a id="981" class="Symbol">)</a>
  <a id="985" href="Codata.M.Bisimilarity.html#946" class="Function">refl</a> <a id="990" class="Symbol">{</a><a id="991" class="Argument">x</a> <a id="993" class="Symbol">=</a> <a id="995" href="Codata.M.html#515" class="InductiveConstructor">inf</a> <a id="999" href="Codata.M.Bisimilarity.html#999" class="Bound">t</a><a id="1000" class="Symbol">}</a> <a id="1002" class="Symbol">=</a> <a id="1004" href="Codata.M.Bisimilarity.html#708" class="InductiveConstructor">inf</a> <a id="1008" class="Symbol">(</a><a id="1009" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1016" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1018" class="Symbol">λ</a> <a id="1020" class="Keyword">where</a> <a id="1026" href="Codata.M.Bisimilarity.html#1026" class="Bound">p</a> <a id="1028" class="Symbol">.</a><a id="1029" href="Codata.Thunk.html#541" class="Field">force</a> <a id="1035" class="Symbol">→</a> <a id="1037" href="Codata.M.Bisimilarity.html#946" class="Function">refl</a><a id="1041" class="Symbol">)</a>

  <a id="1046" href="Codata.M.Bisimilarity.html#1046" class="Function">sym</a> <a id="1050" class="Symbol">:</a> <a id="1052" class="Symbol">∀</a> <a id="1054" class="Symbol">{</a><a id="1055" href="Codata.M.Bisimilarity.html#1055" class="Bound">i</a><a id="1056" class="Symbol">}</a> <a id="1058" class="Symbol">→</a> <a id="1060" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a> <a id="1070" class="Symbol">(</a><a id="1071" href="Codata.M.Bisimilarity.html#635" class="Datatype">Bisim</a> <a id="1077" href="Codata.M.Bisimilarity.html#807" class="Bound">C</a> <a id="1079" href="Codata.M.Bisimilarity.html#1055" class="Bound">i</a><a id="1080" class="Symbol">)</a>
  <a id="1084" href="Codata.M.Bisimilarity.html#1046" class="Function">sym</a>  <a id="1089" class="Symbol">(</a><a id="1090" href="Codata.M.Bisimilarity.html#708" class="InductiveConstructor">inf</a> <a id="1094" class="Symbol">(</a><a id="1095" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1102" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1104" href="Codata.M.Bisimilarity.html#1104" class="Bound">f</a><a id="1105" class="Symbol">))</a> <a id="1108" class="Symbol">=</a> <a id="1110" href="Codata.M.Bisimilarity.html#708" class="InductiveConstructor">inf</a> <a id="1114" class="Symbol">(</a><a id="1115" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1122" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1124" class="Symbol">λ</a> <a id="1126" class="Keyword">where</a> <a id="1132" href="Codata.M.Bisimilarity.html#1132" class="Bound">p</a> <a id="1134" class="Symbol">.</a><a id="1135" href="Codata.Thunk.html#541" class="Field">force</a> <a id="1141" class="Symbol">→</a> <a id="1143" href="Codata.M.Bisimilarity.html#1046" class="Function">sym</a> <a id="1147" class="Symbol">(</a><a id="1148" href="Codata.M.Bisimilarity.html#1104" class="Bound">f</a> <a id="1150" href="Codata.M.Bisimilarity.html#1132" class="Bound">p</a> <a id="1152" class="Symbol">.</a><a id="1153" href="Codata.Thunk.html#541" class="Field">force</a><a id="1158" class="Symbol">))</a>

  <a id="1164" href="Codata.M.Bisimilarity.html#1164" class="Function">trans</a> <a id="1170" class="Symbol">:</a> <a id="1172" class="Symbol">∀</a> <a id="1174" class="Symbol">{</a><a id="1175" href="Codata.M.Bisimilarity.html#1175" class="Bound">i</a><a id="1176" class="Symbol">}</a> <a id="1178" class="Symbol">→</a> <a id="1180" href="Relation.Binary.Definitions.html#1866" class="Function">Transitive</a> <a id="1191" class="Symbol">(</a><a id="1192" href="Codata.M.Bisimilarity.html#635" class="Datatype">Bisim</a> <a id="1198" href="Codata.M.Bisimilarity.html#807" class="Bound">C</a> <a id="1200" href="Codata.M.Bisimilarity.html#1175" class="Bound">i</a><a id="1201" class="Symbol">)</a>
  <a id="1205" href="Codata.M.Bisimilarity.html#1164" class="Function">trans</a> <a id="1211" class="Symbol">(</a><a id="1212" href="Codata.M.Bisimilarity.html#708" class="InductiveConstructor">inf</a> <a id="1216" class="Symbol">(</a><a id="1217" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1224" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1226" href="Codata.M.Bisimilarity.html#1226" class="Bound">f</a><a id="1227" class="Symbol">))</a> <a id="1230" class="Symbol">(</a><a id="1231" href="Codata.M.Bisimilarity.html#708" class="InductiveConstructor">inf</a> <a id="1235" class="Symbol">(</a><a id="1236" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1243" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1245" href="Codata.M.Bisimilarity.html#1245" class="Bound">g</a><a id="1246" class="Symbol">))</a> <a id="1249" class="Symbol">=</a>
    <a id="1255" href="Codata.M.Bisimilarity.html#708" class="InductiveConstructor">inf</a> <a id="1259" class="Symbol">(</a><a id="1260" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1267" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1269" class="Symbol">λ</a> <a id="1271" class="Keyword">where</a> <a id="1277" href="Codata.M.Bisimilarity.html#1277" class="Bound">p</a> <a id="1279" class="Symbol">.</a><a id="1280" href="Codata.Thunk.html#541" class="Field">force</a> <a id="1286" class="Symbol">→</a> <a id="1288" href="Codata.M.Bisimilarity.html#1164" class="Function">trans</a> <a id="1294" class="Symbol">(</a><a id="1295" href="Codata.M.Bisimilarity.html#1226" class="Bound">f</a> <a id="1297" href="Codata.M.Bisimilarity.html#1277" class="Bound">p</a> <a id="1299" class="Symbol">.</a><a id="1300" href="Codata.Thunk.html#541" class="Field">force</a><a id="1305" class="Symbol">)</a> <a id="1307" class="Symbol">(</a><a id="1308" href="Codata.M.Bisimilarity.html#1245" class="Bound">g</a> <a id="1310" href="Codata.M.Bisimilarity.html#1277" class="Bound">p</a> <a id="1312" class="Symbol">.</a><a id="1313" href="Codata.Thunk.html#541" class="Field">force</a><a id="1318" class="Symbol">))</a>

  <a id="1324" href="Codata.M.Bisimilarity.html#1324" class="Function">isEquivalence</a> <a id="1338" class="Symbol">:</a> <a id="1340" class="Symbol">∀</a> <a id="1342" class="Symbol">{</a><a id="1343" href="Codata.M.Bisimilarity.html#1343" class="Bound">i</a><a id="1344" class="Symbol">}</a> <a id="1346" class="Symbol">→</a> <a id="1348" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="1362" class="Symbol">(</a><a id="1363" href="Codata.M.Bisimilarity.html#635" class="Datatype">Bisim</a> <a id="1369" href="Codata.M.Bisimilarity.html#807" class="Bound">C</a> <a id="1371" href="Codata.M.Bisimilarity.html#1343" class="Bound">i</a><a id="1372" class="Symbol">)</a>
  <a id="1376" href="Codata.M.Bisimilarity.html#1324" class="Function">isEquivalence</a> <a id="1390" class="Symbol">=</a> <a id="1392" class="Keyword">record</a>
    <a id="1403" class="Symbol">{</a> <a id="1405" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>  <a id="1411" class="Symbol">=</a> <a id="1413" href="Codata.M.Bisimilarity.html#946" class="Function">refl</a>
    <a id="1422" class="Symbol">;</a> <a id="1424" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>   <a id="1430" class="Symbol">=</a> <a id="1432" href="Codata.M.Bisimilarity.html#1046" class="Function">sym</a>
    <a id="1440" class="Symbol">;</a> <a id="1442" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="1448" class="Symbol">=</a> <a id="1450" href="Codata.M.Bisimilarity.html#1164" class="Function">trans</a>
    <a id="1460" class="Symbol">}</a>

  <a id="1465" href="Codata.M.Bisimilarity.html#1465" class="Function">setoid</a> <a id="1472" class="Symbol">:</a> <a id="1474" class="Symbol">{</a><a id="1475" href="Codata.M.Bisimilarity.html#1475" class="Bound">i</a> <a id="1477" class="Symbol">:</a> <a id="1479" href="Agda.Builtin.Size.html#202" class="Postulate">Size</a><a id="1483" class="Symbol">}</a> <a id="1485" class="Symbol">→</a> <a id="1487" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="1494" class="Symbol">(</a><a id="1495" href="Codata.M.Bisimilarity.html#801" class="Bound">s</a> <a id="1497" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="1499" href="Codata.M.Bisimilarity.html#803" class="Bound">p</a><a id="1500" class="Symbol">)</a> <a id="1502" class="Symbol">(</a><a id="1503" href="Codata.M.Bisimilarity.html#801" class="Bound">s</a> <a id="1505" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="1507" href="Codata.M.Bisimilarity.html#803" class="Bound">p</a><a id="1508" class="Symbol">)</a>
  <a id="1512" href="Codata.M.Bisimilarity.html#1465" class="Function">setoid</a> <a id="1519" class="Symbol">{</a><a id="1520" href="Codata.M.Bisimilarity.html#1520" class="Bound">i</a><a id="1521" class="Symbol">}</a> <a id="1523" class="Symbol">=</a> <a id="1525" class="Keyword">record</a>
    <a id="1536" class="Symbol">{</a> <a id="1538" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="1552" class="Symbol">=</a> <a id="1554" href="Codata.M.Bisimilarity.html#1324" class="Function">isEquivalence</a> <a id="1568" class="Symbol">{</a><a id="1569" href="Codata.M.Bisimilarity.html#1520" class="Bound">i</a><a id="1570" class="Symbol">}</a>
    <a id="1576" class="Symbol">}</a>
</pre></body></html>