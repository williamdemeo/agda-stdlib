<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Nat.Logarithm</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">-----------------------------------------------------------------------</a>
<a id="73" class="Comment">-- The Agda standard library</a>
<a id="102" class="Comment">--</a>
<a id="105" class="Comment">-- Logarithm base 2 and respective properties</a>
<a id="151" class="Comment">------------------------------------------------------------------------</a>

<a id="225" class="Symbol">{-#</a> <a id="229" class="Keyword">OPTIONS</a> <a id="237" class="Pragma">--without-K</a> <a id="249" class="Pragma">--safe</a> <a id="256" class="Symbol">#-}</a>

<a id="261" class="Keyword">module</a> <a id="268" href="Data.Nat.Logarithm.html" class="Module">Data.Nat.Logarithm</a> <a id="287" class="Keyword">where</a>

<a id="294" class="Keyword">open</a> <a id="299" class="Keyword">import</a> <a id="306" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Data.Nat.Induction.html" class="Module">Data.Nat.Induction</a> <a id="346" class="Keyword">using</a> <a id="352" class="Symbol">(</a><a id="353" href="Data.Nat.Induction.html#2191" class="Function">&lt;-wellFounded</a><a id="366" class="Symbol">)</a>
<a id="368" class="Keyword">open</a> <a id="373" class="Keyword">import</a> <a id="380" href="Data.Nat.Logarithm.Core.html" class="Module">Data.Nat.Logarithm.Core</a>
<a id="404" class="Keyword">open</a> <a id="409" class="Keyword">import</a> <a id="416" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="454" class="Keyword">using</a> <a id="460" class="Symbol">(</a><a id="461" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="464" class="Symbol">)</a>

<a id="467" class="Comment">------------------------------------------------------------------------</a>
<a id="540" class="Comment">-- Logarithm base 2</a>

<a id="561" class="Comment">-- Floor version</a>

<a id="⌊log₂_⌋"></a><a id="579" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂_⌋</a> <a id="587" class="Symbol">:</a> <a id="589" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="591" class="Symbol">→</a> <a id="593" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="595" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="601" href="Data.Nat.Logarithm.html#601" class="Bound">n</a> <a id="603" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a> <a id="605" class="Symbol">=</a> <a id="607" href="Data.Nat.Logarithm.Core.html#652" class="Function">⌊log2⌋</a> <a id="614" href="Data.Nat.Logarithm.html#601" class="Bound">n</a> <a id="616" class="Symbol">(</a><a id="617" href="Data.Nat.Induction.html#2191" class="Function">&lt;-wellFounded</a> <a id="631" href="Data.Nat.Logarithm.html#601" class="Bound">n</a><a id="632" class="Symbol">)</a>

<a id="635" class="Comment">-- Ceil version</a>

<a id="⌈log₂_⌉"></a><a id="652" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂_⌉</a> <a id="660" class="Symbol">:</a> <a id="662" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="664" class="Symbol">→</a> <a id="666" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="668" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="674" href="Data.Nat.Logarithm.html#674" class="Bound">n</a> <a id="676" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="678" class="Symbol">=</a> <a id="680" href="Data.Nat.Logarithm.Core.html#842" class="Function">⌈log2⌉</a> <a id="687" href="Data.Nat.Logarithm.html#674" class="Bound">n</a> <a id="689" class="Symbol">(</a><a id="690" href="Data.Nat.Induction.html#2191" class="Function">&lt;-wellFounded</a> <a id="704" href="Data.Nat.Logarithm.html#674" class="Bound">n</a><a id="705" class="Symbol">)</a>

<a id="708" class="Comment">------------------------------------------------------------------------</a>
<a id="781" class="Comment">-- Properties of ⌊log₂_⌋</a>

<a id="⌊log₂⌋-mono-≤"></a><a id="807" href="Data.Nat.Logarithm.html#807" class="Function">⌊log₂⌋-mono-≤</a> <a id="821" class="Symbol">:</a> <a id="823" class="Symbol">∀</a> <a id="825" class="Symbol">{</a><a id="826" href="Data.Nat.Logarithm.html#826" class="Bound">m</a> <a id="828" href="Data.Nat.Logarithm.html#828" class="Bound">n</a><a id="829" class="Symbol">}</a> <a id="831" class="Symbol">→</a> <a id="833" href="Data.Nat.Logarithm.html#826" class="Bound">m</a> <a id="835" href="Data.Nat.Base.html#1535" class="Datatype Operator">≤</a> <a id="837" href="Data.Nat.Logarithm.html#828" class="Bound">n</a> <a id="839" class="Symbol">→</a> <a id="841" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="847" href="Data.Nat.Logarithm.html#826" class="Bound">m</a> <a id="849" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a> <a id="851" href="Data.Nat.Base.html#1535" class="Datatype Operator">≤</a> <a id="853" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="859" href="Data.Nat.Logarithm.html#828" class="Bound">n</a> <a id="861" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a>
<a id="863" href="Data.Nat.Logarithm.html#807" class="Function">⌊log₂⌋-mono-≤</a> <a id="877" href="Data.Nat.Logarithm.html#877" class="Bound">p</a> <a id="879" class="Symbol">=</a> <a id="881" href="Data.Nat.Logarithm.Core.html#1581" class="Function">⌊log2⌋-mono-≤</a> <a id="895" href="Data.Nat.Logarithm.html#877" class="Bound">p</a>

<a id="⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1"></a><a id="898" href="Data.Nat.Logarithm.html#898" class="Function">⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1</a> <a id="920" class="Symbol">:</a> <a id="922" class="Symbol">∀</a> <a id="924" href="Data.Nat.Logarithm.html#924" class="Bound">n</a> <a id="926" class="Symbol">→</a> <a id="928" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="934" href="Data.Nat.Base.html#4353" class="Function Operator">⌊</a> <a id="936" href="Data.Nat.Logarithm.html#924" class="Bound">n</a> <a id="938" href="Data.Nat.Base.html#4353" class="Function Operator">/2⌋</a> <a id="942" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a> <a id="944" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="946" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="952" href="Data.Nat.Logarithm.html#924" class="Bound">n</a> <a id="954" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a> <a id="956" href="Data.Nat.Base.html#3202" class="Primitive Operator">∸</a> <a id="958" class="Number">1</a>
<a id="960" href="Data.Nat.Logarithm.html#898" class="Function">⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1</a> <a id="982" href="Data.Nat.Logarithm.html#982" class="Bound">n</a> <a id="984" class="Symbol">=</a> <a id="986" href="Data.Nat.Logarithm.Core.html#1863" class="Function">⌊log2⌋⌊n/2⌋≡⌊log2⌋n∸1</a> <a id="1008" href="Data.Nat.Logarithm.html#982" class="Bound">n</a>

<a id="⌊log₂[2*b]⌋≡1+⌊log₂b⌋"></a><a id="1011" href="Data.Nat.Logarithm.html#1011" class="Function">⌊log₂[2*b]⌋≡1+⌊log₂b⌋</a> <a id="1033" class="Symbol">:</a> <a id="1035" class="Symbol">∀</a> <a id="1037" href="Data.Nat.Logarithm.html#1037" class="Bound">n</a> <a id="1039" class="Symbol">.{{</a><a id="1042" href="Data.Nat.Logarithm.html#1042" class="Bound">_</a> <a id="1044" class="Symbol">:</a> <a id="1046" href="Data.Nat.Base.html#2561" class="Record">NonZero</a> <a id="1054" href="Data.Nat.Logarithm.html#1037" class="Bound">n</a><a id="1055" class="Symbol">}}</a> <a id="1058" class="Symbol">→</a> <a id="1060" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="1066" class="Symbol">(</a><a id="1067" class="Number">2</a> <a id="1069" href="Agda.Builtin.Nat.html#528" class="Primitive Operator">*</a> <a id="1071" href="Data.Nat.Logarithm.html#1037" class="Bound">n</a><a id="1072" class="Symbol">)</a> <a id="1074" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a> <a id="1076" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1078" class="Number">1</a> <a id="1080" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1082" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="1088" href="Data.Nat.Logarithm.html#1037" class="Bound">n</a> <a id="1090" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a>
<a id="1092" href="Data.Nat.Logarithm.html#1011" class="Function">⌊log₂[2*b]⌋≡1+⌊log₂b⌋</a> <a id="1114" href="Data.Nat.Logarithm.html#1114" class="Bound">n</a> <a id="1116" class="Symbol">=</a> <a id="1118" href="Data.Nat.Logarithm.Core.html#2189" class="Function">⌊log2⌋2*b≡1+⌊log2⌋b</a> <a id="1138" href="Data.Nat.Logarithm.html#1114" class="Bound">n</a>

<a id="⌊log₂[2^n]⌋≡n"></a><a id="1141" href="Data.Nat.Logarithm.html#1141" class="Function">⌊log₂[2^n]⌋≡n</a> <a id="1155" class="Symbol">:</a> <a id="1157" class="Symbol">∀</a> <a id="1159" href="Data.Nat.Logarithm.html#1159" class="Bound">n</a> <a id="1161" class="Symbol">→</a> <a id="1163" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="1169" class="Symbol">(</a><a id="1170" class="Number">2</a> <a id="1172" href="Data.Nat.Base.html#4542" class="Function Operator">^</a> <a id="1174" href="Data.Nat.Logarithm.html#1159" class="Bound">n</a><a id="1175" class="Symbol">)</a> <a id="1177" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a> <a id="1179" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1181" href="Data.Nat.Logarithm.html#1159" class="Bound">n</a>
<a id="1183" href="Data.Nat.Logarithm.html#1141" class="Function">⌊log₂[2^n]⌋≡n</a> <a id="1197" href="Data.Nat.Logarithm.html#1197" class="Bound">n</a> <a id="1199" class="Symbol">=</a> <a id="1201" href="Data.Nat.Logarithm.Core.html#2894" class="Function">⌊log2⌋2^n≡n</a> <a id="1213" href="Data.Nat.Logarithm.html#1197" class="Bound">n</a>

<a id="1216" class="Comment">------------------------------------------------------------------------</a>
<a id="1289" class="Comment">-- Properties of ⌈log₂_⌉</a>

<a id="⌈log₂⌉-mono-≤"></a><a id="1315" href="Data.Nat.Logarithm.html#1315" class="Function">⌈log₂⌉-mono-≤</a> <a id="1329" class="Symbol">:</a> <a id="1331" class="Symbol">∀</a> <a id="1333" class="Symbol">{</a><a id="1334" href="Data.Nat.Logarithm.html#1334" class="Bound">m</a> <a id="1336" href="Data.Nat.Logarithm.html#1336" class="Bound">n</a><a id="1337" class="Symbol">}</a> <a id="1339" class="Symbol">→</a> <a id="1341" href="Data.Nat.Logarithm.html#1334" class="Bound">m</a> <a id="1343" href="Data.Nat.Base.html#1535" class="Datatype Operator">≤</a> <a id="1345" href="Data.Nat.Logarithm.html#1336" class="Bound">n</a> <a id="1347" class="Symbol">→</a> <a id="1349" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1355" href="Data.Nat.Logarithm.html#1334" class="Bound">m</a> <a id="1357" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="1359" href="Data.Nat.Base.html#1535" class="Datatype Operator">≤</a> <a id="1361" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1367" href="Data.Nat.Logarithm.html#1336" class="Bound">n</a> <a id="1369" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a>
<a id="1371" href="Data.Nat.Logarithm.html#1315" class="Function">⌈log₂⌉-mono-≤</a> <a id="1385" href="Data.Nat.Logarithm.html#1385" class="Bound">p</a> <a id="1387" class="Symbol">=</a> <a id="1389" href="Data.Nat.Logarithm.Core.html#3800" class="Function">⌈log2⌉-mono-≤</a> <a id="1403" href="Data.Nat.Logarithm.html#1385" class="Bound">p</a>

<a id="⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1"></a><a id="1406" href="Data.Nat.Logarithm.html#1406" class="Function">⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1</a> <a id="1428" class="Symbol">:</a> <a id="1430" class="Symbol">∀</a> <a id="1432" href="Data.Nat.Logarithm.html#1432" class="Bound">n</a> <a id="1434" class="Symbol">→</a> <a id="1436" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1442" href="Data.Nat.Base.html#4480" class="Function Operator">⌈</a> <a id="1444" href="Data.Nat.Logarithm.html#1432" class="Bound">n</a> <a id="1446" href="Data.Nat.Base.html#4480" class="Function Operator">/2⌉</a> <a id="1450" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="1452" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1454" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1460" href="Data.Nat.Logarithm.html#1432" class="Bound">n</a> <a id="1462" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="1464" href="Data.Nat.Base.html#3202" class="Primitive Operator">∸</a> <a id="1466" class="Number">1</a>
<a id="1468" href="Data.Nat.Logarithm.html#1406" class="Function">⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1</a> <a id="1490" href="Data.Nat.Logarithm.html#1490" class="Bound">n</a> <a id="1492" class="Symbol">=</a> <a id="1494" href="Data.Nat.Logarithm.Core.html#4099" class="Function">⌈log2⌉⌈n/2⌉≡⌈log2⌉n∸1</a> <a id="1516" href="Data.Nat.Logarithm.html#1490" class="Bound">n</a>

<a id="⌈log₂2*n⌉≡1+⌈log₂n⌉"></a><a id="1519" href="Data.Nat.Logarithm.html#1519" class="Function">⌈log₂2*n⌉≡1+⌈log₂n⌉</a> <a id="1539" class="Symbol">:</a> <a id="1541" class="Symbol">∀</a> <a id="1543" href="Data.Nat.Logarithm.html#1543" class="Bound">n</a> <a id="1545" class="Symbol">.{{</a><a id="1548" href="Data.Nat.Logarithm.html#1548" class="Bound">_</a> <a id="1550" class="Symbol">:</a> <a id="1552" href="Data.Nat.Base.html#2561" class="Record">NonZero</a> <a id="1560" href="Data.Nat.Logarithm.html#1543" class="Bound">n</a><a id="1561" class="Symbol">}}</a> <a id="1564" class="Symbol">→</a> <a id="1566" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1572" class="Symbol">(</a><a id="1573" class="Number">2</a> <a id="1575" href="Agda.Builtin.Nat.html#528" class="Primitive Operator">*</a> <a id="1577" href="Data.Nat.Logarithm.html#1543" class="Bound">n</a><a id="1578" class="Symbol">)</a> <a id="1580" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="1582" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1584" class="Number">1</a> <a id="1586" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1588" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1594" href="Data.Nat.Logarithm.html#1543" class="Bound">n</a> <a id="1596" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a>
<a id="1598" href="Data.Nat.Logarithm.html#1519" class="Function">⌈log₂2*n⌉≡1+⌈log₂n⌉</a> <a id="1618" href="Data.Nat.Logarithm.html#1618" class="Bound">n</a> <a id="1620" class="Symbol">=</a> <a id="1622" href="Data.Nat.Logarithm.Core.html#4429" class="Function">⌈log2⌉2*n≡1+⌈log2⌉n</a> <a id="1642" href="Data.Nat.Logarithm.html#1618" class="Bound">n</a>

<a id="⌈log₂2^n⌉≡n"></a><a id="1645" href="Data.Nat.Logarithm.html#1645" class="Function">⌈log₂2^n⌉≡n</a> <a id="1657" class="Symbol">:</a> <a id="1659" class="Symbol">∀</a> <a id="1661" href="Data.Nat.Logarithm.html#1661" class="Bound">n</a> <a id="1663" class="Symbol">→</a> <a id="1665" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1671" class="Symbol">(</a><a id="1672" class="Number">2</a> <a id="1674" href="Data.Nat.Base.html#4542" class="Function Operator">^</a> <a id="1676" href="Data.Nat.Logarithm.html#1661" class="Bound">n</a><a id="1677" class="Symbol">)</a> <a id="1679" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="1681" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1683" href="Data.Nat.Logarithm.html#1661" class="Bound">n</a>
<a id="1685" href="Data.Nat.Logarithm.html#1645" class="Function">⌈log₂2^n⌉≡n</a> <a id="1697" href="Data.Nat.Logarithm.html#1697" class="Bound">n</a> <a id="1699" class="Symbol">=</a> <a id="1701" href="Data.Nat.Logarithm.Core.html#5133" class="Function">⌈log2⌉2^n≡n</a> <a id="1713" href="Data.Nat.Logarithm.html#1697" class="Bound">n</a>
</pre></body></html>