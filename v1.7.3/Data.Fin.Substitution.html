<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Fin.Substitution</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Substitutions</a>
<a id="123" class="Comment">------------------------------------------------------------------------</a>

<a id="197" class="Comment">-- Uses a variant of Conor McBride&#39;s technique from &quot;Type-Preserving</a>
<a id="266" class="Comment">-- Renaming and Substitution&quot;.</a>

<a id="298" class="Comment">-- See Data.Fin.Substitution.Example for an example of how this module</a>
<a id="369" class="Comment">-- can be used: a definition of substitution for the untyped</a>
<a id="430" class="Comment">-- λ-calculus.</a>

<a id="446" class="Symbol">{-#</a> <a id="450" class="Keyword">OPTIONS</a> <a id="458" class="Pragma">--cubical-compatible</a> <a id="479" class="Pragma">--safe</a> <a id="486" class="Symbol">#-}</a>

<a id="491" class="Keyword">module</a> <a id="498" href="Data.Fin.Substitution.html" class="Module">Data.Fin.Substitution</a> <a id="520" class="Keyword">where</a>

<a id="527" class="Keyword">open</a> <a id="532" class="Keyword">import</a> <a id="539" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="548" class="Keyword">hiding</a> <a id="555" class="Symbol">(</a><a id="556" href="Data.Nat.Base.html#3072" class="Function Operator">_⊔_</a><a id="559" class="Symbol">)</a>
<a id="561" class="Keyword">open</a> <a id="566" class="Keyword">import</a> <a id="573" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a> <a id="587" class="Keyword">using</a> <a id="593" class="Symbol">(</a><a id="594" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a><a id="597" class="Symbol">;</a> <a id="599" href="Data.Fin.Base.html#1157" class="InductiveConstructor">zero</a><a id="603" class="Symbol">;</a> <a id="605" href="Data.Fin.Base.html#1188" class="InductiveConstructor">suc</a><a id="608" class="Symbol">)</a>
<a id="610" class="Keyword">open</a> <a id="615" class="Keyword">import</a> <a id="622" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a>
<a id="636" class="Keyword">open</a> <a id="641" class="Keyword">import</a> <a id="648" href="Function.html" class="Module">Function</a> <a id="657" class="Symbol">as</a> <a id="660" class="Module">Fun</a> <a id="664" class="Keyword">using</a> <a id="670" class="Symbol">(</a><a id="671" href="Function.Base.html#1563" class="Function">flip</a><a id="675" class="Symbol">)</a>
<a id="677" class="Keyword">open</a> <a id="682" class="Keyword">import</a> <a id="689" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html" class="Module">Relation.Binary.Construct.Closure.ReflexiveTransitive</a>
  <a id="745" class="Symbol">as</a> <a id="748" class="Module">Star</a> <a id="753" class="Keyword">using</a> <a id="759" class="Symbol">(</a><a id="760" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#499" class="Datatype">Star</a><a id="764" class="Symbol">;</a> <a id="766" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#560" class="InductiveConstructor">ε</a><a id="767" class="Symbol">;</a> <a id="769" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#587" class="InductiveConstructor Operator">_◅_</a><a id="772" class="Symbol">)</a>
<a id="774" class="Keyword">open</a> <a id="779" class="Keyword">import</a> <a id="786" href="Level.html" class="Module">Level</a> <a id="792" class="Keyword">using</a> <a id="798" class="Symbol">(</a><a id="799" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="804" class="Symbol">;</a> <a id="806" href="Agda.Primitive.html#961" class="Primitive Operator">_⊔_</a><a id="809" class="Symbol">)</a>
<a id="811" class="Keyword">import</a> <a id="818" href="Level.html" class="Module">Level</a> <a id="824" class="Symbol">as</a> <a id="827" class="Module">L</a>
<a id="829" class="Keyword">open</a> <a id="834" class="Keyword">import</a> <a id="841" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="856" class="Keyword">using</a> <a id="862" class="Symbol">(</a><a id="863" href="Relation.Unary.html#1110" class="Function">Pred</a><a id="867" class="Symbol">)</a>

<a id="870" class="Comment">------------------------------------------------------------------------</a>
<a id="943" class="Comment">-- General functionality</a>

<a id="969" class="Comment">-- A Sub T m n is a substitution which, when applied to something with</a>
<a id="1040" class="Comment">-- at most m variables, yields something with at most n variables.</a>

<a id="Sub"></a><a id="1108" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="1112" class="Symbol">:</a> <a id="1114" class="Symbol">∀</a> <a id="1116" class="Symbol">{</a><a id="1117" href="Data.Fin.Substitution.html#1117" class="Bound">ℓ</a><a id="1118" class="Symbol">}</a> <a id="1120" class="Symbol">→</a> <a id="1122" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="1127" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1129" href="Data.Fin.Substitution.html#1117" class="Bound">ℓ</a> <a id="1131" class="Symbol">→</a> <a id="1133" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1135" class="Symbol">→</a> <a id="1137" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1139" class="Symbol">→</a> <a id="1141" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1145" href="Data.Fin.Substitution.html#1117" class="Bound">ℓ</a>
<a id="1147" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="1151" href="Data.Fin.Substitution.html#1151" class="Bound">T</a> <a id="1153" href="Data.Fin.Substitution.html#1153" class="Bound">m</a> <a id="1155" href="Data.Fin.Substitution.html#1155" class="Bound">n</a> <a id="1157" class="Symbol">=</a> <a id="1159" href="Data.Vec.Base.html#1007" class="Datatype">Vec</a> <a id="1163" class="Symbol">(</a><a id="1164" href="Data.Fin.Substitution.html#1151" class="Bound">T</a> <a id="1166" href="Data.Fin.Substitution.html#1155" class="Bound">n</a><a id="1167" class="Symbol">)</a> <a id="1169" href="Data.Fin.Substitution.html#1153" class="Bound">m</a>

<a id="1172" class="Comment">-- A /reversed/ sequence of matching substitutions.</a>

<a id="Subs"></a><a id="1225" href="Data.Fin.Substitution.html#1225" class="Function">Subs</a> <a id="1230" class="Symbol">:</a> <a id="1232" class="Symbol">∀</a> <a id="1234" class="Symbol">{</a><a id="1235" href="Data.Fin.Substitution.html#1235" class="Bound">ℓ</a><a id="1236" class="Symbol">}</a> <a id="1238" class="Symbol">→</a> <a id="1240" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="1245" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1247" href="Data.Fin.Substitution.html#1235" class="Bound">ℓ</a> <a id="1249" class="Symbol">→</a> <a id="1251" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1253" class="Symbol">→</a> <a id="1255" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1257" class="Symbol">→</a> <a id="1259" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1263" href="Data.Fin.Substitution.html#1235" class="Bound">ℓ</a>
<a id="1265" href="Data.Fin.Substitution.html#1225" class="Function">Subs</a> <a id="1270" href="Data.Fin.Substitution.html#1270" class="Bound">T</a> <a id="1272" class="Symbol">=</a> <a id="1274" href="Function.Base.html#1563" class="Function">flip</a> <a id="1279" class="Symbol">(</a><a id="1280" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#499" class="Datatype">Star</a> <a id="1285" class="Symbol">(</a><a id="1286" href="Function.Base.html#1563" class="Function">flip</a> <a id="1291" class="Symbol">(</a><a id="1292" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="1296" href="Data.Fin.Substitution.html#1270" class="Bound">T</a><a id="1297" class="Symbol">)))</a>

<a id="1302" class="Comment">-- Some simple substitutions.</a>

<a id="1333" class="Keyword">record</a> <a id="Simple"></a><a id="1340" href="Data.Fin.Substitution.html#1340" class="Record">Simple</a> <a id="1347" class="Symbol">{</a><a id="1348" href="Data.Fin.Substitution.html#1348" class="Bound">ℓ</a> <a id="1350" class="Symbol">:</a> <a id="1352" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="1357" class="Symbol">}</a> <a id="1359" class="Symbol">(</a><a id="1360" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="1362" class="Symbol">:</a> <a id="1364" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="1369" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1371" href="Data.Fin.Substitution.html#1348" class="Bound">ℓ</a><a id="1372" class="Symbol">)</a> <a id="1374" class="Symbol">:</a> <a id="1376" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1380" href="Data.Fin.Substitution.html#1348" class="Bound">ℓ</a> <a id="1382" class="Keyword">where</a>
  <a id="1390" class="Keyword">infix</a>  <a id="1397" class="Number">10</a> <a id="1400" href="Data.Fin.Substitution.html#1569" class="Function Operator">_↑</a>
  <a id="1405" class="Keyword">infixl</a> <a id="1412" class="Number">10</a> <a id="1415" href="Data.Fin.Substitution.html#1653" class="Function Operator">_↑⋆_</a> <a id="1420" href="Data.Fin.Substitution.html#1756" class="Function Operator">_↑✶_</a>

  <a id="1428" class="Keyword">field</a>
    <a id="Simple.var"></a><a id="1438" href="Data.Fin.Substitution.html#1438" class="Field">var</a>    <a id="1445" class="Symbol">:</a> <a id="1447" class="Symbol">∀</a> <a id="1449" class="Symbol">{</a><a id="1450" href="Data.Fin.Substitution.html#1450" class="Bound">n</a><a id="1451" class="Symbol">}</a> <a id="1453" class="Symbol">→</a> <a id="1455" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="1459" href="Data.Fin.Substitution.html#1450" class="Bound">n</a> <a id="1461" class="Symbol">→</a> <a id="1463" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="1465" href="Data.Fin.Substitution.html#1450" class="Bound">n</a>      <a id="1472" class="Comment">-- Takes variables to Ts.</a>
    <a id="Simple.weaken"></a><a id="1502" href="Data.Fin.Substitution.html#1502" class="Field">weaken</a> <a id="1509" class="Symbol">:</a> <a id="1511" class="Symbol">∀</a> <a id="1513" class="Symbol">{</a><a id="1514" href="Data.Fin.Substitution.html#1514" class="Bound">n</a><a id="1515" class="Symbol">}</a> <a id="1517" class="Symbol">→</a> <a id="1519" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="1521" href="Data.Fin.Substitution.html#1514" class="Bound">n</a> <a id="1523" class="Symbol">→</a> <a id="1525" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="1527" class="Symbol">(</a><a id="1528" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1532" href="Data.Fin.Substitution.html#1514" class="Bound">n</a><a id="1533" class="Symbol">)</a>  <a id="1536" class="Comment">-- Weakens Ts.</a>

  <a id="1554" class="Comment">-- Lifting.</a>

  <a id="Simple._↑"></a><a id="1569" href="Data.Fin.Substitution.html#1569" class="Function Operator">_↑</a> <a id="1572" class="Symbol">:</a> <a id="1574" class="Symbol">∀</a> <a id="1576" class="Symbol">{</a><a id="1577" href="Data.Fin.Substitution.html#1577" class="Bound">m</a> <a id="1579" href="Data.Fin.Substitution.html#1579" class="Bound">n</a><a id="1580" class="Symbol">}</a> <a id="1582" class="Symbol">→</a> <a id="1584" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="1588" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="1590" href="Data.Fin.Substitution.html#1577" class="Bound">m</a> <a id="1592" href="Data.Fin.Substitution.html#1579" class="Bound">n</a> <a id="1594" class="Symbol">→</a> <a id="1596" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="1600" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="1602" class="Symbol">(</a><a id="1603" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1607" href="Data.Fin.Substitution.html#1577" class="Bound">m</a><a id="1608" class="Symbol">)</a> <a id="1610" class="Symbol">(</a><a id="1611" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1615" href="Data.Fin.Substitution.html#1579" class="Bound">n</a><a id="1616" class="Symbol">)</a>
  <a id="1620" href="Data.Fin.Substitution.html#1620" class="Bound">ρ</a> <a id="1622" href="Data.Fin.Substitution.html#1569" class="Function Operator">↑</a> <a id="1624" class="Symbol">=</a> <a id="1626" href="Data.Fin.Substitution.html#1438" class="Field">var</a> <a id="1630" href="Data.Fin.Base.html#1157" class="InductiveConstructor">zero</a> <a id="1635" href="Data.Vec.Base.html#1062" class="InductiveConstructor Operator">∷</a> <a id="1637" href="Data.Vec.Base.html#2589" class="Function">map</a> <a id="1641" href="Data.Fin.Substitution.html#1502" class="Field">weaken</a> <a id="1648" href="Data.Fin.Substitution.html#1620" class="Bound">ρ</a>

  <a id="Simple._↑⋆_"></a><a id="1653" href="Data.Fin.Substitution.html#1653" class="Function Operator">_↑⋆_</a> <a id="1658" class="Symbol">:</a> <a id="1660" class="Symbol">∀</a> <a id="1662" class="Symbol">{</a><a id="1663" href="Data.Fin.Substitution.html#1663" class="Bound">m</a> <a id="1665" href="Data.Fin.Substitution.html#1665" class="Bound">n</a><a id="1666" class="Symbol">}</a> <a id="1668" class="Symbol">→</a> <a id="1670" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="1674" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="1676" href="Data.Fin.Substitution.html#1663" class="Bound">m</a> <a id="1678" href="Data.Fin.Substitution.html#1665" class="Bound">n</a> <a id="1680" class="Symbol">→</a> <a id="1682" class="Symbol">∀</a> <a id="1684" href="Data.Fin.Substitution.html#1684" class="Bound">k</a> <a id="1686" class="Symbol">→</a> <a id="1688" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="1692" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="1694" class="Symbol">(</a><a id="1695" href="Data.Fin.Substitution.html#1684" class="Bound">k</a> <a id="1697" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="1699" href="Data.Fin.Substitution.html#1663" class="Bound">m</a><a id="1700" class="Symbol">)</a> <a id="1702" class="Symbol">(</a><a id="1703" href="Data.Fin.Substitution.html#1684" class="Bound">k</a> <a id="1705" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="1707" href="Data.Fin.Substitution.html#1665" class="Bound">n</a><a id="1708" class="Symbol">)</a>
  <a id="1712" href="Data.Fin.Substitution.html#1712" class="Bound">ρ</a> <a id="1714" href="Data.Fin.Substitution.html#1653" class="Function Operator">↑⋆</a> <a id="1717" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>  <a id="1723" class="Symbol">=</a> <a id="1725" href="Data.Fin.Substitution.html#1712" class="Bound">ρ</a>
  <a id="1729" href="Data.Fin.Substitution.html#1729" class="Bound">ρ</a> <a id="1731" href="Data.Fin.Substitution.html#1653" class="Function Operator">↑⋆</a> <a id="1734" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1738" href="Data.Fin.Substitution.html#1738" class="Bound">k</a> <a id="1740" class="Symbol">=</a> <a id="1742" class="Symbol">(</a><a id="1743" href="Data.Fin.Substitution.html#1729" class="Bound">ρ</a> <a id="1745" href="Data.Fin.Substitution.html#1653" class="Function Operator">↑⋆</a> <a id="1748" href="Data.Fin.Substitution.html#1738" class="Bound">k</a><a id="1749" class="Symbol">)</a> <a id="1751" href="Data.Fin.Substitution.html#1569" class="Function Operator">↑</a>

  <a id="Simple._↑✶_"></a><a id="1756" href="Data.Fin.Substitution.html#1756" class="Function Operator">_↑✶_</a> <a id="1761" class="Symbol">:</a> <a id="1763" class="Symbol">∀</a> <a id="1765" class="Symbol">{</a><a id="1766" href="Data.Fin.Substitution.html#1766" class="Bound">m</a> <a id="1768" href="Data.Fin.Substitution.html#1768" class="Bound">n</a><a id="1769" class="Symbol">}</a> <a id="1771" class="Symbol">→</a> <a id="1773" href="Data.Fin.Substitution.html#1225" class="Function">Subs</a> <a id="1778" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="1780" href="Data.Fin.Substitution.html#1766" class="Bound">m</a> <a id="1782" href="Data.Fin.Substitution.html#1768" class="Bound">n</a> <a id="1784" class="Symbol">→</a> <a id="1786" class="Symbol">∀</a> <a id="1788" href="Data.Fin.Substitution.html#1788" class="Bound">k</a> <a id="1790" class="Symbol">→</a> <a id="1792" href="Data.Fin.Substitution.html#1225" class="Function">Subs</a> <a id="1797" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="1799" class="Symbol">(</a><a id="1800" href="Data.Fin.Substitution.html#1788" class="Bound">k</a> <a id="1802" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="1804" href="Data.Fin.Substitution.html#1766" class="Bound">m</a><a id="1805" class="Symbol">)</a> <a id="1807" class="Symbol">(</a><a id="1808" href="Data.Fin.Substitution.html#1788" class="Bound">k</a> <a id="1810" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="1812" href="Data.Fin.Substitution.html#1768" class="Bound">n</a><a id="1813" class="Symbol">)</a>
  <a id="1817" href="Data.Fin.Substitution.html#1817" class="Bound">ρs</a> <a id="1820" href="Data.Fin.Substitution.html#1756" class="Function Operator">↑✶</a> <a id="1823" href="Data.Fin.Substitution.html#1823" class="Bound">k</a> <a id="1825" class="Symbol">=</a> <a id="1827" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1539" class="Function">Star.gmap</a> <a id="1837" class="Symbol">(</a><a id="1838" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">_+_</a> <a id="1842" href="Data.Fin.Substitution.html#1823" class="Bound">k</a><a id="1843" class="Symbol">)</a> <a id="1845" class="Symbol">(λ</a> <a id="1848" href="Data.Fin.Substitution.html#1848" class="Bound">ρ</a> <a id="1850" class="Symbol">→</a> <a id="1852" href="Data.Fin.Substitution.html#1848" class="Bound">ρ</a> <a id="1854" href="Data.Fin.Substitution.html#1653" class="Function Operator">↑⋆</a> <a id="1857" href="Data.Fin.Substitution.html#1823" class="Bound">k</a><a id="1858" class="Symbol">)</a> <a id="1860" href="Data.Fin.Substitution.html#1817" class="Bound">ρs</a>

  <a id="1866" class="Comment">-- The identity substitution.</a>

  <a id="Simple.id"></a><a id="1899" href="Data.Fin.Substitution.html#1899" class="Function">id</a> <a id="1902" class="Symbol">:</a> <a id="1904" class="Symbol">∀</a> <a id="1906" class="Symbol">{</a><a id="1907" href="Data.Fin.Substitution.html#1907" class="Bound">n</a><a id="1908" class="Symbol">}</a> <a id="1910" class="Symbol">→</a> <a id="1912" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="1916" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="1918" href="Data.Fin.Substitution.html#1907" class="Bound">n</a> <a id="1920" href="Data.Fin.Substitution.html#1907" class="Bound">n</a>
  <a id="1924" href="Data.Fin.Substitution.html#1899" class="Function">id</a> <a id="1927" class="Symbol">{</a><a id="1928" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="1932" class="Symbol">}</a>  <a id="1935" class="Symbol">=</a> <a id="1937" href="Data.Vec.Base.html#1043" class="InductiveConstructor">[]</a>
  <a id="1942" href="Data.Fin.Substitution.html#1899" class="Function">id</a> <a id="1945" class="Symbol">{</a><a id="1946" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1950" href="Data.Fin.Substitution.html#1950" class="Bound">n</a><a id="1951" class="Symbol">}</a> <a id="1953" class="Symbol">=</a> <a id="1955" href="Data.Fin.Substitution.html#1899" class="Function">id</a> <a id="1958" href="Data.Fin.Substitution.html#1569" class="Function Operator">↑</a>

  <a id="1963" class="Comment">-- Weakening.</a>

  <a id="Simple.wk⋆"></a><a id="1980" href="Data.Fin.Substitution.html#1980" class="Function">wk⋆</a> <a id="1984" class="Symbol">:</a> <a id="1986" class="Symbol">∀</a> <a id="1988" href="Data.Fin.Substitution.html#1988" class="Bound">k</a> <a id="1990" class="Symbol">{</a><a id="1991" href="Data.Fin.Substitution.html#1991" class="Bound">n</a><a id="1992" class="Symbol">}</a> <a id="1994" class="Symbol">→</a> <a id="1996" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="2000" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="2002" href="Data.Fin.Substitution.html#1991" class="Bound">n</a> <a id="2004" class="Symbol">(</a><a id="2005" href="Data.Fin.Substitution.html#1988" class="Bound">k</a> <a id="2007" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="2009" href="Data.Fin.Substitution.html#1991" class="Bound">n</a><a id="2010" class="Symbol">)</a>
  <a id="2014" href="Data.Fin.Substitution.html#1980" class="Function">wk⋆</a> <a id="2018" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>    <a id="2026" class="Symbol">=</a> <a id="2028" href="Data.Fin.Substitution.html#1899" class="Function">id</a>
  <a id="2033" href="Data.Fin.Substitution.html#1980" class="Function">wk⋆</a> <a id="2037" class="Symbol">(</a><a id="2038" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="2042" href="Data.Fin.Substitution.html#2042" class="Bound">k</a><a id="2043" class="Symbol">)</a> <a id="2045" class="Symbol">=</a> <a id="2047" href="Data.Vec.Base.html#2589" class="Function">map</a> <a id="2051" href="Data.Fin.Substitution.html#1502" class="Field">weaken</a> <a id="2058" class="Symbol">(</a><a id="2059" href="Data.Fin.Substitution.html#1980" class="Function">wk⋆</a> <a id="2063" href="Data.Fin.Substitution.html#2042" class="Bound">k</a><a id="2064" class="Symbol">)</a>

  <a id="Simple.wk"></a><a id="2069" href="Data.Fin.Substitution.html#2069" class="Function">wk</a> <a id="2072" class="Symbol">:</a> <a id="2074" class="Symbol">∀</a> <a id="2076" class="Symbol">{</a><a id="2077" href="Data.Fin.Substitution.html#2077" class="Bound">n</a><a id="2078" class="Symbol">}</a> <a id="2080" class="Symbol">→</a> <a id="2082" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="2086" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="2088" href="Data.Fin.Substitution.html#2077" class="Bound">n</a> <a id="2090" class="Symbol">(</a><a id="2091" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="2095" href="Data.Fin.Substitution.html#2077" class="Bound">n</a><a id="2096" class="Symbol">)</a>
  <a id="2100" href="Data.Fin.Substitution.html#2069" class="Function">wk</a> <a id="2103" class="Symbol">=</a> <a id="2105" href="Data.Fin.Substitution.html#1980" class="Function">wk⋆</a> <a id="2109" class="Number">1</a>

  <a id="2114" class="Comment">-- A substitution which only replaces the first variable.</a>

  <a id="Simple.sub"></a><a id="2175" href="Data.Fin.Substitution.html#2175" class="Function">sub</a> <a id="2179" class="Symbol">:</a> <a id="2181" class="Symbol">∀</a> <a id="2183" class="Symbol">{</a><a id="2184" href="Data.Fin.Substitution.html#2184" class="Bound">n</a><a id="2185" class="Symbol">}</a> <a id="2187" class="Symbol">→</a> <a id="2189" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="2191" href="Data.Fin.Substitution.html#2184" class="Bound">n</a> <a id="2193" class="Symbol">→</a> <a id="2195" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="2199" href="Data.Fin.Substitution.html#1360" class="Bound">T</a> <a id="2201" class="Symbol">(</a><a id="2202" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="2206" href="Data.Fin.Substitution.html#2184" class="Bound">n</a><a id="2207" class="Symbol">)</a> <a id="2209" href="Data.Fin.Substitution.html#2184" class="Bound">n</a>
  <a id="2213" href="Data.Fin.Substitution.html#2175" class="Function">sub</a> <a id="2217" href="Data.Fin.Substitution.html#2217" class="Bound">t</a> <a id="2219" class="Symbol">=</a> <a id="2221" href="Data.Fin.Substitution.html#2217" class="Bound">t</a> <a id="2223" href="Data.Vec.Base.html#1062" class="InductiveConstructor Operator">∷</a> <a id="2225" href="Data.Fin.Substitution.html#1899" class="Function">id</a>

<a id="2229" class="Comment">-- Application of substitutions.</a>

<a id="2263" class="Keyword">record</a> <a id="Application"></a><a id="2270" href="Data.Fin.Substitution.html#2270" class="Record">Application</a> <a id="2282" class="Symbol">{</a><a id="2283" href="Data.Fin.Substitution.html#2283" class="Bound">ℓ₁</a> <a id="2286" href="Data.Fin.Substitution.html#2286" class="Bound">ℓ₂</a> <a id="2289" class="Symbol">:</a> <a id="2291" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="2296" class="Symbol">}</a> <a id="2298" class="Symbol">(</a><a id="2299" href="Data.Fin.Substitution.html#2299" class="Bound">T₁</a> <a id="2302" class="Symbol">:</a> <a id="2304" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="2309" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2311" href="Data.Fin.Substitution.html#2283" class="Bound">ℓ₁</a><a id="2313" class="Symbol">)</a> <a id="2315" class="Symbol">(</a><a id="2316" href="Data.Fin.Substitution.html#2316" class="Bound">T₂</a> <a id="2319" class="Symbol">:</a> <a id="2321" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="2326" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2328" href="Data.Fin.Substitution.html#2286" class="Bound">ℓ₂</a><a id="2330" class="Symbol">)</a> <a id="2332" class="Symbol">:</a>
    <a id="2338" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="2342" class="Symbol">(</a><a id="2343" href="Data.Fin.Substitution.html#2283" class="Bound">ℓ₁</a> <a id="2346" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="2348" href="Data.Fin.Substitution.html#2286" class="Bound">ℓ₂</a><a id="2350" class="Symbol">)</a> <a id="2352" class="Keyword">where</a>
  <a id="2360" class="Keyword">infixl</a> <a id="2367" class="Number">8</a> <a id="2369" href="Data.Fin.Substitution.html#2453" class="Field Operator">_/_</a> <a id="2373" href="Data.Fin.Substitution.html#2696" class="Function Operator">_/✶_</a>
  <a id="2380" class="Keyword">infixl</a> <a id="2387" class="Number">9</a> <a id="2389" href="Data.Fin.Substitution.html#2559" class="Function Operator">_⊙_</a>

  <a id="2396" class="Comment">-- Post-application of substitutions to things.</a>

  <a id="2447" class="Keyword">field</a> <a id="Application._/_"></a><a id="2453" href="Data.Fin.Substitution.html#2453" class="Field Operator">_/_</a> <a id="2457" class="Symbol">:</a> <a id="2459" class="Symbol">∀</a> <a id="2461" class="Symbol">{</a><a id="2462" href="Data.Fin.Substitution.html#2462" class="Bound">m</a> <a id="2464" href="Data.Fin.Substitution.html#2464" class="Bound">n</a><a id="2465" class="Symbol">}</a> <a id="2467" class="Symbol">→</a> <a id="2469" href="Data.Fin.Substitution.html#2299" class="Bound">T₁</a> <a id="2472" href="Data.Fin.Substitution.html#2462" class="Bound">m</a> <a id="2474" class="Symbol">→</a> <a id="2476" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="2480" href="Data.Fin.Substitution.html#2316" class="Bound">T₂</a> <a id="2483" href="Data.Fin.Substitution.html#2462" class="Bound">m</a> <a id="2485" href="Data.Fin.Substitution.html#2464" class="Bound">n</a> <a id="2487" class="Symbol">→</a> <a id="2489" href="Data.Fin.Substitution.html#2299" class="Bound">T₁</a> <a id="2492" href="Data.Fin.Substitution.html#2464" class="Bound">n</a>

  <a id="2497" class="Comment">-- Reverse composition. (Fits well with post-application.)</a>

  <a id="Application._⊙_"></a><a id="2559" href="Data.Fin.Substitution.html#2559" class="Function Operator">_⊙_</a> <a id="2563" class="Symbol">:</a> <a id="2565" class="Symbol">∀</a> <a id="2567" class="Symbol">{</a><a id="2568" href="Data.Fin.Substitution.html#2568" class="Bound">m</a> <a id="2570" href="Data.Fin.Substitution.html#2570" class="Bound">n</a> <a id="2572" href="Data.Fin.Substitution.html#2572" class="Bound">k</a><a id="2573" class="Symbol">}</a> <a id="2575" class="Symbol">→</a> <a id="2577" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="2581" href="Data.Fin.Substitution.html#2299" class="Bound">T₁</a> <a id="2584" href="Data.Fin.Substitution.html#2568" class="Bound">m</a> <a id="2586" href="Data.Fin.Substitution.html#2570" class="Bound">n</a> <a id="2588" class="Symbol">→</a> <a id="2590" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="2594" href="Data.Fin.Substitution.html#2316" class="Bound">T₂</a> <a id="2597" href="Data.Fin.Substitution.html#2570" class="Bound">n</a> <a id="2599" href="Data.Fin.Substitution.html#2572" class="Bound">k</a> <a id="2601" class="Symbol">→</a> <a id="2603" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="2607" href="Data.Fin.Substitution.html#2299" class="Bound">T₁</a> <a id="2610" href="Data.Fin.Substitution.html#2568" class="Bound">m</a> <a id="2612" href="Data.Fin.Substitution.html#2572" class="Bound">k</a>
  <a id="2616" href="Data.Fin.Substitution.html#2616" class="Bound">ρ₁</a> <a id="2619" href="Data.Fin.Substitution.html#2559" class="Function Operator">⊙</a> <a id="2621" href="Data.Fin.Substitution.html#2621" class="Bound">ρ₂</a> <a id="2624" class="Symbol">=</a> <a id="2626" href="Data.Vec.Base.html#2589" class="Function">map</a> <a id="2630" class="Symbol">(λ</a> <a id="2633" href="Data.Fin.Substitution.html#2633" class="Bound">t</a> <a id="2635" class="Symbol">→</a> <a id="2637" href="Data.Fin.Substitution.html#2633" class="Bound">t</a> <a id="2639" href="Data.Fin.Substitution.html#2453" class="Field Operator">/</a> <a id="2641" href="Data.Fin.Substitution.html#2621" class="Bound">ρ₂</a><a id="2643" class="Symbol">)</a> <a id="2645" href="Data.Fin.Substitution.html#2616" class="Bound">ρ₁</a>

  <a id="2651" class="Comment">-- Application of multiple substitutions.</a>

  <a id="Application._/✶_"></a><a id="2696" href="Data.Fin.Substitution.html#2696" class="Function Operator">_/✶_</a> <a id="2701" class="Symbol">:</a> <a id="2703" class="Symbol">∀</a> <a id="2705" class="Symbol">{</a><a id="2706" href="Data.Fin.Substitution.html#2706" class="Bound">m</a> <a id="2708" href="Data.Fin.Substitution.html#2708" class="Bound">n</a><a id="2709" class="Symbol">}</a> <a id="2711" class="Symbol">→</a> <a id="2713" href="Data.Fin.Substitution.html#2299" class="Bound">T₁</a> <a id="2716" href="Data.Fin.Substitution.html#2706" class="Bound">m</a> <a id="2718" class="Symbol">→</a> <a id="2720" href="Data.Fin.Substitution.html#1225" class="Function">Subs</a> <a id="2725" href="Data.Fin.Substitution.html#2316" class="Bound">T₂</a> <a id="2728" href="Data.Fin.Substitution.html#2706" class="Bound">m</a> <a id="2730" href="Data.Fin.Substitution.html#2708" class="Bound">n</a> <a id="2732" class="Symbol">→</a> <a id="2734" href="Data.Fin.Substitution.html#2299" class="Bound">T₁</a> <a id="2737" href="Data.Fin.Substitution.html#2708" class="Bound">n</a>
  <a id="2741" href="Data.Fin.Substitution.html#2696" class="Function Operator">_/✶_</a> <a id="2746" class="Symbol">=</a> <a id="2748" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1868" class="Function">Star.gfold</a> <a id="2759" href="Function.Base.html#624" class="Function">Fun.id</a> <a id="2766" class="Symbol">_</a> <a id="2768" class="Symbol">(</a><a id="2769" href="Function.Base.html#1563" class="Function">flip</a> <a id="2774" href="Data.Fin.Substitution.html#2453" class="Field Operator">_/_</a><a id="2777" class="Symbol">)</a> <a id="2779" class="Symbol">{</a><a id="2780" class="Argument">k</a> <a id="2782" class="Symbol">=</a> <a id="2784" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="2788" class="Symbol">}</a>

<a id="2791" class="Comment">-- A combination of the two records above.</a>

<a id="2835" class="Keyword">record</a> <a id="Subst"></a><a id="2842" href="Data.Fin.Substitution.html#2842" class="Record">Subst</a> <a id="2848" class="Symbol">{</a><a id="2849" href="Data.Fin.Substitution.html#2849" class="Bound">ℓ</a> <a id="2851" class="Symbol">:</a> <a id="2853" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="2858" class="Symbol">}</a> <a id="2860" class="Symbol">(</a><a id="2861" href="Data.Fin.Substitution.html#2861" class="Bound">T</a> <a id="2863" class="Symbol">:</a> <a id="2865" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="2870" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2872" href="Data.Fin.Substitution.html#2849" class="Bound">ℓ</a><a id="2873" class="Symbol">)</a> <a id="2875" class="Symbol">:</a> <a id="2877" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="2881" href="Data.Fin.Substitution.html#2849" class="Bound">ℓ</a> <a id="2883" class="Keyword">where</a>
  <a id="2891" class="Keyword">field</a>
    <a id="Subst.simple"></a><a id="2901" href="Data.Fin.Substitution.html#2901" class="Field">simple</a>      <a id="2913" class="Symbol">:</a> <a id="2915" href="Data.Fin.Substitution.html#1340" class="Record">Simple</a>      <a id="2927" href="Data.Fin.Substitution.html#2861" class="Bound">T</a>
    <a id="Subst.application"></a><a id="2933" href="Data.Fin.Substitution.html#2933" class="Field">application</a> <a id="2945" class="Symbol">:</a> <a id="2947" href="Data.Fin.Substitution.html#2270" class="Record">Application</a> <a id="2959" href="Data.Fin.Substitution.html#2861" class="Bound">T</a> <a id="2961" href="Data.Fin.Substitution.html#2861" class="Bound">T</a>

  <a id="2966" class="Keyword">open</a> <a id="2971" href="Data.Fin.Substitution.html#1340" class="Module">Simple</a>      <a id="2983" href="Data.Fin.Substitution.html#2901" class="Field">simple</a>      <a id="2995" class="Keyword">public</a>
  <a id="3004" class="Keyword">open</a> <a id="3009" href="Data.Fin.Substitution.html#2270" class="Module">Application</a> <a id="3021" href="Data.Fin.Substitution.html#2933" class="Field">application</a> <a id="3033" class="Keyword">public</a>

  <a id="3043" class="Comment">-- Composition of multiple substitutions.</a>

  <a id="Subst.⨀"></a><a id="3088" href="Data.Fin.Substitution.html#3088" class="Function">⨀</a> <a id="3090" class="Symbol">:</a> <a id="3092" class="Symbol">∀</a> <a id="3094" class="Symbol">{</a><a id="3095" href="Data.Fin.Substitution.html#3095" class="Bound">m</a> <a id="3097" href="Data.Fin.Substitution.html#3097" class="Bound">n</a><a id="3098" class="Symbol">}</a> <a id="3100" class="Symbol">→</a> <a id="3102" href="Data.Fin.Substitution.html#1225" class="Function">Subs</a> <a id="3107" href="Data.Fin.Substitution.html#2861" class="Bound">T</a> <a id="3109" href="Data.Fin.Substitution.html#3095" class="Bound">m</a> <a id="3111" href="Data.Fin.Substitution.html#3097" class="Bound">n</a> <a id="3113" class="Symbol">→</a> <a id="3115" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="3119" href="Data.Fin.Substitution.html#2861" class="Bound">T</a> <a id="3121" href="Data.Fin.Substitution.html#3095" class="Bound">m</a> <a id="3123" href="Data.Fin.Substitution.html#3097" class="Bound">n</a>
  <a id="3127" href="Data.Fin.Substitution.html#3088" class="Function">⨀</a> <a id="3129" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#560" class="InductiveConstructor">ε</a>        <a id="3138" class="Symbol">=</a> <a id="3140" href="Data.Fin.Substitution.html#1899" class="Function">id</a>
  <a id="3145" href="Data.Fin.Substitution.html#3088" class="Function">⨀</a> <a id="3147" class="Symbol">(</a><a id="3148" href="Data.Fin.Substitution.html#3148" class="Bound">ρ</a> <a id="3150" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#587" class="InductiveConstructor Operator">◅</a> <a id="3152" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#560" class="InductiveConstructor">ε</a><a id="3153" class="Symbol">)</a>  <a id="3156" class="Symbol">=</a> <a id="3158" href="Data.Fin.Substitution.html#3148" class="Bound">ρ</a>  <a id="3161" class="Comment">-- Convenient optimisation; simplifies some proofs.</a>
  <a id="3215" href="Data.Fin.Substitution.html#3088" class="CatchallClause Function">⨀</a><a id="3216" class="CatchallClause"> </a><a id="3217" class="CatchallClause Symbol">(</a><a id="3218" href="Data.Fin.Substitution.html#3218" class="CatchallClause Bound">ρ</a><a id="3219" class="CatchallClause"> </a><a id="3220" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#587" class="CatchallClause InductiveConstructor Operator">◅</a><a id="3221" class="CatchallClause"> </a><a id="3222" href="Data.Fin.Substitution.html#3222" class="CatchallClause Bound">ρs</a><a id="3224" class="CatchallClause Symbol">)</a> <a id="3226" class="Symbol">=</a> <a id="3228" href="Data.Fin.Substitution.html#3088" class="Function">⨀</a> <a id="3230" href="Data.Fin.Substitution.html#3222" class="Bound">ρs</a> <a id="3233" href="Data.Fin.Substitution.html#2559" class="Function Operator">⊙</a> <a id="3235" href="Data.Fin.Substitution.html#3218" class="Bound">ρ</a>

<a id="3238" class="Comment">------------------------------------------------------------------------</a>
<a id="3311" class="Comment">-- Instantiations and code for facilitating instantiations</a>

<a id="3371" class="Comment">-- Liftings from T₁ to T₂.</a>

<a id="3399" class="Keyword">record</a> <a id="Lift"></a><a id="3406" href="Data.Fin.Substitution.html#3406" class="Record">Lift</a> <a id="3411" class="Symbol">{</a><a id="3412" href="Data.Fin.Substitution.html#3412" class="Bound">ℓ₁</a> <a id="3415" href="Data.Fin.Substitution.html#3415" class="Bound">ℓ₂</a> <a id="3418" class="Symbol">:</a> <a id="3420" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="3425" class="Symbol">}</a> <a id="3427" class="Symbol">(</a><a id="3428" href="Data.Fin.Substitution.html#3428" class="Bound">T₁</a> <a id="3431" class="Symbol">:</a> <a id="3433" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="3438" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3440" href="Data.Fin.Substitution.html#3412" class="Bound">ℓ₁</a><a id="3442" class="Symbol">)</a> <a id="3444" class="Symbol">(</a><a id="3445" href="Data.Fin.Substitution.html#3445" class="Bound">T₂</a> <a id="3448" class="Symbol">:</a> <a id="3450" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="3455" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3457" href="Data.Fin.Substitution.html#3415" class="Bound">ℓ₂</a><a id="3459" class="Symbol">)</a> <a id="3461" class="Symbol">:</a>
    <a id="3467" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3471" class="Symbol">(</a><a id="3472" href="Data.Fin.Substitution.html#3412" class="Bound">ℓ₁</a> <a id="3475" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="3477" href="Data.Fin.Substitution.html#3415" class="Bound">ℓ₂</a><a id="3479" class="Symbol">)</a> <a id="3481" class="Keyword">where</a>
  <a id="3489" class="Keyword">field</a>
    <a id="Lift.simple"></a><a id="3499" href="Data.Fin.Substitution.html#3499" class="Field">simple</a> <a id="3506" class="Symbol">:</a> <a id="3508" href="Data.Fin.Substitution.html#1340" class="Record">Simple</a> <a id="3515" href="Data.Fin.Substitution.html#3428" class="Bound">T₁</a>
    <a id="Lift.lift"></a><a id="3522" href="Data.Fin.Substitution.html#3522" class="Field">lift</a>   <a id="3529" class="Symbol">:</a> <a id="3531" class="Symbol">∀</a> <a id="3533" class="Symbol">{</a><a id="3534" href="Data.Fin.Substitution.html#3534" class="Bound">n</a><a id="3535" class="Symbol">}</a> <a id="3537" class="Symbol">→</a> <a id="3539" href="Data.Fin.Substitution.html#3428" class="Bound">T₁</a> <a id="3542" href="Data.Fin.Substitution.html#3534" class="Bound">n</a> <a id="3544" class="Symbol">→</a> <a id="3546" href="Data.Fin.Substitution.html#3445" class="Bound">T₂</a> <a id="3549" href="Data.Fin.Substitution.html#3534" class="Bound">n</a>

  <a id="3554" class="Keyword">open</a> <a id="3559" href="Data.Fin.Substitution.html#1340" class="Module">Simple</a> <a id="3566" href="Data.Fin.Substitution.html#3499" class="Field">simple</a> <a id="3573" class="Keyword">public</a>

<a id="3581" class="Comment">-- Variable substitutions (renamings).</a>

<a id="3621" class="Keyword">module</a> <a id="VarSubst"></a><a id="3628" href="Data.Fin.Substitution.html#3628" class="Module">VarSubst</a> <a id="3637" class="Keyword">where</a>

  <a id="VarSubst.subst"></a><a id="3646" href="Data.Fin.Substitution.html#3646" class="Function">subst</a> <a id="3652" class="Symbol">:</a> <a id="3654" href="Data.Fin.Substitution.html#2842" class="Record">Subst</a> <a id="3660" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a>
  <a id="3666" href="Data.Fin.Substitution.html#3646" class="Function">subst</a> <a id="3672" class="Symbol">=</a> <a id="3674" class="Keyword">record</a>
    <a id="3685" class="Symbol">{</a> <a id="3687" href="Data.Fin.Substitution.html#2901" class="Field">simple</a>      <a id="3699" class="Symbol">=</a> <a id="3701" class="Keyword">record</a> <a id="3708" class="Symbol">{</a> <a id="3710" href="Data.Fin.Substitution.html#1438" class="Field">var</a> <a id="3714" class="Symbol">=</a> <a id="3716" href="Function.Base.html#624" class="Function">Fun.id</a><a id="3722" class="Symbol">;</a> <a id="3724" href="Data.Fin.Substitution.html#1502" class="Field">weaken</a> <a id="3731" class="Symbol">=</a> <a id="3733" href="Data.Fin.Base.html#1188" class="InductiveConstructor">suc</a> <a id="3737" class="Symbol">}</a>
    <a id="3743" class="Symbol">;</a> <a id="3745" href="Data.Fin.Substitution.html#2933" class="Field">application</a> <a id="3757" class="Symbol">=</a> <a id="3759" class="Keyword">record</a> <a id="3766" class="Symbol">{</a> <a id="3768" href="Data.Fin.Substitution.html#2453" class="Field Operator">_/_</a> <a id="3772" class="Symbol">=</a> <a id="3774" href="Function.Base.html#1563" class="Function">flip</a> <a id="3779" href="Data.Vec.Base.html#1614" class="Function">lookup</a> <a id="3786" class="Symbol">}</a>
    <a id="3792" class="Symbol">}</a>

  <a id="3797" class="Keyword">open</a> <a id="3802" href="Data.Fin.Substitution.html#2842" class="Module">Subst</a> <a id="3808" href="Data.Fin.Substitution.html#3646" class="Function">subst</a> <a id="3814" class="Keyword">public</a>

<a id="3822" class="Comment">-- &quot;Term&quot; substitutions.</a>

<a id="3848" class="Keyword">record</a> <a id="TermSubst"></a><a id="3855" href="Data.Fin.Substitution.html#3855" class="Record">TermSubst</a> <a id="3865" class="Symbol">(</a><a id="3866" href="Data.Fin.Substitution.html#3866" class="Bound">T</a> <a id="3868" class="Symbol">:</a> <a id="3870" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="3875" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3877" href="Agda.Primitive.html#915" class="Primitive">L.zero</a><a id="3883" class="Symbol">)</a> <a id="3885" class="Symbol">:</a> <a id="3887" href="Agda.Primitive.html#388" class="Primitive">Set₁</a> <a id="3892" class="Keyword">where</a>
  <a id="3900" class="Keyword">field</a>
    <a id="TermSubst.var"></a><a id="3910" href="Data.Fin.Substitution.html#3910" class="Field">var</a> <a id="3914" class="Symbol">:</a> <a id="3916" class="Symbol">∀</a> <a id="3918" class="Symbol">{</a><a id="3919" href="Data.Fin.Substitution.html#3919" class="Bound">n</a><a id="3920" class="Symbol">}</a> <a id="3922" class="Symbol">→</a> <a id="3924" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="3928" href="Data.Fin.Substitution.html#3919" class="Bound">n</a> <a id="3930" class="Symbol">→</a> <a id="3932" href="Data.Fin.Substitution.html#3866" class="Bound">T</a> <a id="3934" href="Data.Fin.Substitution.html#3919" class="Bound">n</a>
    <a id="TermSubst.app"></a><a id="3940" href="Data.Fin.Substitution.html#3940" class="Field">app</a> <a id="3944" class="Symbol">:</a> <a id="3946" class="Symbol">∀</a> <a id="3948" class="Symbol">{</a><a id="3949" href="Data.Fin.Substitution.html#3949" class="Bound">T′</a> <a id="3952" class="Symbol">:</a> <a id="3954" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="3959" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3961" href="Agda.Primitive.html#915" class="Primitive">L.zero</a><a id="3967" class="Symbol">}</a> <a id="3969" class="Symbol">→</a> <a id="3971" href="Data.Fin.Substitution.html#3406" class="Record">Lift</a> <a id="3976" href="Data.Fin.Substitution.html#3949" class="Bound">T′</a> <a id="3979" href="Data.Fin.Substitution.html#3866" class="Bound">T</a> <a id="3981" class="Symbol">→</a> <a id="3983" class="Symbol">∀</a> <a id="3985" class="Symbol">{</a><a id="3986" href="Data.Fin.Substitution.html#3986" class="Bound">m</a> <a id="3988" href="Data.Fin.Substitution.html#3988" class="Bound">n</a><a id="3989" class="Symbol">}</a> <a id="3991" class="Symbol">→</a> <a id="3993" href="Data.Fin.Substitution.html#3866" class="Bound">T</a> <a id="3995" href="Data.Fin.Substitution.html#3986" class="Bound">m</a> <a id="3997" class="Symbol">→</a> <a id="3999" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="4003" href="Data.Fin.Substitution.html#3949" class="Bound">T′</a> <a id="4006" href="Data.Fin.Substitution.html#3986" class="Bound">m</a> <a id="4008" href="Data.Fin.Substitution.html#3988" class="Bound">n</a> <a id="4010" class="Symbol">→</a> <a id="4012" href="Data.Fin.Substitution.html#3866" class="Bound">T</a> <a id="4014" href="Data.Fin.Substitution.html#3988" class="Bound">n</a>

  <a id="4019" class="Keyword">module</a> <a id="TermSubst.Lifted"></a><a id="4026" href="Data.Fin.Substitution.html#4026" class="Module">Lifted</a> <a id="4033" class="Symbol">{</a><a id="4034" href="Data.Fin.Substitution.html#4034" class="Bound">T′</a> <a id="4037" class="Symbol">:</a> <a id="4039" href="Relation.Unary.html#1110" class="Function">Pred</a> <a id="4044" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="4046" href="Agda.Primitive.html#915" class="Primitive">L.zero</a><a id="4052" class="Symbol">}</a> <a id="4054" class="Symbol">(</a><a id="4055" href="Data.Fin.Substitution.html#4055" class="Bound">lift</a> <a id="4060" class="Symbol">:</a> <a id="4062" href="Data.Fin.Substitution.html#3406" class="Record">Lift</a> <a id="4067" href="Data.Fin.Substitution.html#4034" class="Bound">T′</a> <a id="4070" href="Data.Fin.Substitution.html#3866" class="Bound">T</a><a id="4071" class="Symbol">)</a> <a id="4073" class="Keyword">where</a>
    <a id="TermSubst.Lifted.application"></a><a id="4083" href="Data.Fin.Substitution.html#4083" class="Function">application</a> <a id="4095" class="Symbol">:</a> <a id="4097" href="Data.Fin.Substitution.html#2270" class="Record">Application</a> <a id="4109" href="Data.Fin.Substitution.html#3866" class="Bound">T</a> <a id="4111" href="Data.Fin.Substitution.html#4034" class="Bound">T′</a>
    <a id="4118" href="Data.Fin.Substitution.html#4083" class="Function">application</a> <a id="4130" class="Symbol">=</a> <a id="4132" class="Keyword">record</a> <a id="4139" class="Symbol">{</a> <a id="4141" href="Data.Fin.Substitution.html#2453" class="Field Operator">_/_</a> <a id="4145" class="Symbol">=</a> <a id="4147" href="Data.Fin.Substitution.html#3940" class="Field">app</a> <a id="4151" href="Data.Fin.Substitution.html#4055" class="Bound">lift</a> <a id="4156" class="Symbol">}</a>

    <a id="4163" class="Keyword">open</a> <a id="4168" href="Data.Fin.Substitution.html#3406" class="Module">Lift</a> <a id="4173" href="Data.Fin.Substitution.html#4055" class="Bound">lift</a> <a id="4178" class="Keyword">public</a>
    <a id="4189" class="Keyword">open</a> <a id="4194" href="Data.Fin.Substitution.html#2270" class="Module">Application</a> <a id="4206" href="Data.Fin.Substitution.html#4083" class="Function">application</a> <a id="4218" class="Keyword">public</a>

  <a id="TermSubst.varLift"></a><a id="4228" href="Data.Fin.Substitution.html#4228" class="Function">varLift</a> <a id="4236" class="Symbol">:</a> <a id="4238" href="Data.Fin.Substitution.html#3406" class="Record">Lift</a> <a id="4243" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="4247" href="Data.Fin.Substitution.html#3866" class="Bound">T</a>
  <a id="4251" href="Data.Fin.Substitution.html#4228" class="Function">varLift</a> <a id="4259" class="Symbol">=</a> <a id="4261" class="Keyword">record</a> <a id="4268" class="Symbol">{</a> <a id="4270" href="Data.Fin.Substitution.html#3499" class="Field">simple</a> <a id="4277" class="Symbol">=</a> <a id="4279" href="Data.Fin.Substitution.html#2901" class="Function">VarSubst.simple</a><a id="4294" class="Symbol">;</a> <a id="4296" href="Data.Fin.Substitution.html#3522" class="Field">lift</a> <a id="4301" class="Symbol">=</a> <a id="4303" href="Data.Fin.Substitution.html#3910" class="Field">var</a> <a id="4307" class="Symbol">}</a>

  <a id="4312" class="Keyword">infix</a> <a id="4318" class="Number">8</a> <a id="4320" href="Data.Fin.Substitution.html#4330" class="Function Operator">_/Var_</a>

  <a id="TermSubst._/Var_"></a><a id="4330" href="Data.Fin.Substitution.html#4330" class="Function Operator">_/Var_</a> <a id="4337" class="Symbol">:</a> <a id="4339" class="Symbol">∀</a> <a id="4341" class="Symbol">{</a><a id="4342" href="Data.Fin.Substitution.html#4342" class="Bound">m</a> <a id="4344" href="Data.Fin.Substitution.html#4344" class="Bound">n</a><a id="4345" class="Symbol">}</a> <a id="4347" class="Symbol">→</a> <a id="4349" href="Data.Fin.Substitution.html#3866" class="Bound">T</a> <a id="4351" href="Data.Fin.Substitution.html#4342" class="Bound">m</a> <a id="4353" class="Symbol">→</a> <a id="4355" href="Data.Fin.Substitution.html#1108" class="Function">Sub</a> <a id="4359" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="4363" href="Data.Fin.Substitution.html#4342" class="Bound">m</a> <a id="4365" href="Data.Fin.Substitution.html#4344" class="Bound">n</a> <a id="4367" class="Symbol">→</a> <a id="4369" href="Data.Fin.Substitution.html#3866" class="Bound">T</a> <a id="4371" href="Data.Fin.Substitution.html#4344" class="Bound">n</a>
  <a id="4375" href="Data.Fin.Substitution.html#4330" class="Function Operator">_/Var_</a> <a id="4382" class="Symbol">=</a> <a id="4384" href="Data.Fin.Substitution.html#3940" class="Field">app</a> <a id="4388" href="Data.Fin.Substitution.html#4228" class="Function">varLift</a>

  <a id="TermSubst.simple"></a><a id="4399" href="Data.Fin.Substitution.html#4399" class="Function">simple</a> <a id="4406" class="Symbol">:</a> <a id="4408" href="Data.Fin.Substitution.html#1340" class="Record">Simple</a> <a id="4415" href="Data.Fin.Substitution.html#3866" class="Bound">T</a>
  <a id="4419" href="Data.Fin.Substitution.html#4399" class="Function">simple</a> <a id="4426" class="Symbol">=</a> <a id="4428" class="Keyword">record</a>
    <a id="4439" class="Symbol">{</a> <a id="4441" href="Data.Fin.Substitution.html#1438" class="Field">var</a>    <a id="4448" class="Symbol">=</a> <a id="4450" href="Data.Fin.Substitution.html#3910" class="Field">var</a>
    <a id="4458" class="Symbol">;</a> <a id="4460" href="Data.Fin.Substitution.html#1502" class="Field">weaken</a> <a id="4467" class="Symbol">=</a> <a id="4469" class="Symbol">λ</a> <a id="4471" href="Data.Fin.Substitution.html#4471" class="Bound">t</a> <a id="4473" class="Symbol">→</a> <a id="4475" href="Data.Fin.Substitution.html#4471" class="Bound">t</a> <a id="4477" href="Data.Fin.Substitution.html#4330" class="Function Operator">/Var</a> <a id="4482" href="Data.Fin.Substitution.html#2069" class="Function">VarSubst.wk</a>
    <a id="4498" class="Symbol">}</a>

  <a id="TermSubst.termLift"></a><a id="4503" href="Data.Fin.Substitution.html#4503" class="Function">termLift</a> <a id="4512" class="Symbol">:</a> <a id="4514" href="Data.Fin.Substitution.html#3406" class="Record">Lift</a> <a id="4519" href="Data.Fin.Substitution.html#3866" class="Bound">T</a> <a id="4521" href="Data.Fin.Substitution.html#3866" class="Bound">T</a>
  <a id="4525" href="Data.Fin.Substitution.html#4503" class="Function">termLift</a> <a id="4534" class="Symbol">=</a> <a id="4536" class="Keyword">record</a> <a id="4543" class="Symbol">{</a> <a id="4545" href="Data.Fin.Substitution.html#3499" class="Field">simple</a> <a id="4552" class="Symbol">=</a> <a id="4554" href="Data.Fin.Substitution.html#4399" class="Function">simple</a><a id="4560" class="Symbol">;</a> <a id="4562" href="Data.Fin.Substitution.html#3522" class="Field">lift</a> <a id="4567" class="Symbol">=</a> <a id="4569" href="Function.Base.html#624" class="Function">Fun.id</a> <a id="4576" class="Symbol">}</a>

  <a id="TermSubst.subst"></a><a id="4581" href="Data.Fin.Substitution.html#4581" class="Function">subst</a> <a id="4587" class="Symbol">:</a> <a id="4589" href="Data.Fin.Substitution.html#2842" class="Record">Subst</a> <a id="4595" href="Data.Fin.Substitution.html#3866" class="Bound">T</a>
  <a id="4599" href="Data.Fin.Substitution.html#4581" class="Function">subst</a> <a id="4605" class="Symbol">=</a> <a id="4607" class="Keyword">record</a>
    <a id="4618" class="Symbol">{</a> <a id="4620" href="Data.Fin.Substitution.html#2901" class="Field">simple</a>      <a id="4632" class="Symbol">=</a> <a id="4634" href="Data.Fin.Substitution.html#4399" class="Function">simple</a>
    <a id="4645" class="Symbol">;</a> <a id="4647" href="Data.Fin.Substitution.html#2933" class="Field">application</a> <a id="4659" class="Symbol">=</a> <a id="4661" href="Data.Fin.Substitution.html#4083" class="Function">Lifted.application</a> <a id="4680" href="Data.Fin.Substitution.html#4503" class="Function">termLift</a>
    <a id="4693" class="Symbol">}</a>

  <a id="4698" class="Keyword">open</a> <a id="4703" href="Data.Fin.Substitution.html#2842" class="Module">Subst</a> <a id="4709" href="Data.Fin.Substitution.html#4581" class="Function">subst</a> <a id="4715" class="Keyword">public</a> <a id="4722" class="Keyword">hiding</a> <a id="4729" class="Symbol">(</a><a id="4730" href="Data.Fin.Substitution.html#1438" class="Function">var</a><a id="4733" class="Symbol">;</a> <a id="4735" href="Data.Fin.Substitution.html#2901" class="Field">simple</a><a id="4741" class="Symbol">)</a>
</pre></body></html>