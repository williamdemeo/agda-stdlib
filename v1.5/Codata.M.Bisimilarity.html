<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.M.Bisimilarity</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Bisimilarity for M-types</a>
<a id="134" class="Comment">------------------------------------------------------------------------</a>

<a id="208" class="Symbol">{-#</a> <a id="212" class="Keyword">OPTIONS</a> <a id="220" class="Pragma">--without-K</a> <a id="232" class="Pragma">--safe</a> <a id="239" class="Pragma">--sized-types</a> <a id="253" class="Symbol">#-}</a>

<a id="258" class="Keyword">module</a> <a id="265" href="Codata.M.Bisimilarity.html" class="Module">Codata.M.Bisimilarity</a> <a id="287" class="Keyword">where</a>

<a id="294" class="Keyword">open</a> <a id="299" class="Keyword">import</a> <a id="306" href="Level.html" class="Module">Level</a>
<a id="312" class="Keyword">open</a> <a id="317" class="Keyword">import</a> <a id="324" href="Size.html" class="Module">Size</a>
<a id="329" class="Keyword">open</a> <a id="334" class="Keyword">import</a> <a id="341" href="Codata.Thunk.html" class="Module">Codata.Thunk</a>
<a id="354" class="Keyword">open</a> <a id="359" class="Keyword">import</a> <a id="366" href="Codata.M.html" class="Module">Codata.M</a>
<a id="375" class="Keyword">open</a> <a id="380" class="Keyword">import</a> <a id="387" href="Data.Container.Core.html" class="Module">Data.Container.Core</a>
<a id="407" class="Keyword">open</a> <a id="412" class="Keyword">import</a> <a id="419" href="Data.Container.Relation.Binary.Pointwise.html" class="Module">Data.Container.Relation.Binary.Pointwise</a> <a id="460" class="Keyword">using</a> <a id="466" class="Symbol">(</a><a id="467" href="Data.Container.Relation.Binary.Pointwise.html#714" class="Record">Pointwise</a><a id="476" class="Symbol">;</a> <a id="478" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">_,_</a><a id="481" class="Symbol">)</a>
<a id="483" class="Keyword">open</a> <a id="488" class="Keyword">import</a> <a id="495" href="Data.Product.html" class="Module">Data.Product</a> <a id="508" class="Keyword">using</a> <a id="514" class="Symbol">(</a><a id="515" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a><a id="518" class="Symbol">)</a>
<a id="520" class="Keyword">open</a> <a id="525" class="Keyword">import</a> <a id="532" href="Function.Base.html" class="Module">Function.Base</a>
<a id="546" class="Keyword">open</a> <a id="551" class="Keyword">import</a> <a id="558" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="574" class="Keyword">import</a> <a id="581" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="619" class="Symbol">as</a> <a id="622" class="Module">P</a>

<a id="625" class="Keyword">data</a> <a id="Bisim"></a><a id="630" href="Codata.M.Bisimilarity.html#630" class="Datatype">Bisim</a> <a id="636" class="Symbol">{</a><a id="637" href="Codata.M.Bisimilarity.html#637" class="Bound">s</a> <a id="639" href="Codata.M.Bisimilarity.html#639" class="Bound">p</a><a id="640" class="Symbol">}</a> <a id="642" class="Symbol">(</a><a id="643" href="Codata.M.Bisimilarity.html#643" class="Bound">C</a> <a id="645" class="Symbol">:</a> <a id="647" href="Data.Container.Core.html#558" class="Record">Container</a> <a id="657" href="Codata.M.Bisimilarity.html#637" class="Bound">s</a> <a id="659" href="Codata.M.Bisimilarity.html#639" class="Bound">p</a><a id="660" class="Symbol">)</a> <a id="662" class="Symbol">(</a><a id="663" href="Codata.M.Bisimilarity.html#663" class="Bound">i</a> <a id="665" class="Symbol">:</a> <a id="667" href="Agda.Builtin.Size.html#206" class="Postulate">Size</a><a id="671" class="Symbol">)</a> <a id="673" class="Symbol">:</a> <a id="675" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="679" class="Symbol">(</a><a id="680" href="Codata.M.html#461" class="Datatype">M</a> <a id="682" href="Codata.M.Bisimilarity.html#643" class="Bound">C</a> <a id="684" href="Agda.Builtin.Size.html#302" class="Postulate">∞</a><a id="685" class="Symbol">)</a> <a id="687" class="Symbol">(</a><a id="688" href="Codata.M.Bisimilarity.html#637" class="Bound">s</a> <a id="690" href="Agda.Primitive.html#636" class="Primitive Operator">⊔</a> <a id="692" href="Codata.M.Bisimilarity.html#639" class="Bound">p</a><a id="693" class="Symbol">)</a> <a id="695" class="Keyword">where</a>
  <a id="Bisim.inf"></a><a id="703" href="Codata.M.Bisimilarity.html#703" class="InductiveConstructor">inf</a> <a id="707" class="Symbol">:</a> <a id="709" class="Symbol">∀</a> <a id="711" class="Symbol">{</a><a id="712" href="Codata.M.Bisimilarity.html#712" class="Bound">t</a> <a id="714" href="Codata.M.Bisimilarity.html#714" class="Bound">u</a><a id="715" class="Symbol">}</a> <a id="717" class="Symbol">→</a> <a id="719" href="Data.Container.Relation.Binary.Pointwise.html#714" class="Record">Pointwise</a> <a id="729" href="Codata.M.Bisimilarity.html#643" class="Bound">C</a> <a id="731" class="Symbol">(</a><a id="732" href="Codata.Thunk.html#749" class="Function">Thunk^R</a> <a id="740" class="Symbol">(</a><a id="741" href="Codata.M.Bisimilarity.html#630" class="Datatype">Bisim</a> <a id="747" href="Codata.M.Bisimilarity.html#643" class="Bound">C</a><a id="748" class="Symbol">)</a> <a id="750" href="Codata.M.Bisimilarity.html#663" class="Bound">i</a><a id="751" class="Symbol">)</a> <a id="753" href="Codata.M.Bisimilarity.html#712" class="Bound">t</a> <a id="755" href="Codata.M.Bisimilarity.html#714" class="Bound">u</a> <a id="757" class="Symbol">→</a> <a id="759" href="Codata.M.Bisimilarity.html#630" class="Datatype">Bisim</a> <a id="765" href="Codata.M.Bisimilarity.html#643" class="Bound">C</a> <a id="767" href="Codata.M.Bisimilarity.html#663" class="Bound">i</a> <a id="769" class="Symbol">(</a><a id="770" href="Codata.M.html#522" class="InductiveConstructor">inf</a> <a id="774" href="Codata.M.Bisimilarity.html#712" class="Bound">t</a><a id="775" class="Symbol">)</a> <a id="777" class="Symbol">(</a><a id="778" href="Codata.M.html#522" class="InductiveConstructor">inf</a> <a id="782" href="Codata.M.Bisimilarity.html#714" class="Bound">u</a><a id="783" class="Symbol">)</a>

<a id="786" class="Keyword">module</a> <a id="793" href="Codata.M.Bisimilarity.html#793" class="Module">_</a> <a id="795" class="Symbol">{</a><a id="796" href="Codata.M.Bisimilarity.html#796" class="Bound">s</a> <a id="798" href="Codata.M.Bisimilarity.html#798" class="Bound">p</a><a id="799" class="Symbol">}</a> <a id="801" class="Symbol">{</a><a id="802" href="Codata.M.Bisimilarity.html#802" class="Bound">C</a> <a id="804" class="Symbol">:</a> <a id="806" href="Data.Container.Core.html#558" class="Record">Container</a> <a id="816" href="Codata.M.Bisimilarity.html#796" class="Bound">s</a> <a id="818" href="Codata.M.Bisimilarity.html#798" class="Bound">p</a><a id="819" class="Symbol">}</a> <a id="821" class="Keyword">where</a>

  <a id="830" class="Comment">-- unfortunately the proofs are a lot nicer if we do not use the combinators</a>
  <a id="909" class="Comment">-- C.refl, C.sym and C.trans</a>

  <a id="941" href="Codata.M.Bisimilarity.html#941" class="Function">refl</a> <a id="946" class="Symbol">:</a> <a id="948" class="Symbol">∀</a> <a id="950" class="Symbol">{</a><a id="951" href="Codata.M.Bisimilarity.html#951" class="Bound">i</a><a id="952" class="Symbol">}</a> <a id="954" class="Symbol">→</a> <a id="956" href="Relation.Binary.Definitions.html#1339" class="Function">Reflexive</a> <a id="966" class="Symbol">(</a><a id="967" href="Codata.M.Bisimilarity.html#630" class="Datatype">Bisim</a> <a id="973" href="Codata.M.Bisimilarity.html#802" class="Bound">C</a> <a id="975" href="Codata.M.Bisimilarity.html#951" class="Bound">i</a><a id="976" class="Symbol">)</a>
  <a id="980" href="Codata.M.Bisimilarity.html#941" class="Function">refl</a> <a id="985" class="Symbol">{</a><a id="986" class="Argument">x</a> <a id="988" class="Symbol">=</a> <a id="990" href="Codata.M.html#522" class="InductiveConstructor">inf</a> <a id="994" href="Codata.M.Bisimilarity.html#994" class="Bound">t</a><a id="995" class="Symbol">}</a> <a id="997" class="Symbol">=</a> <a id="999" href="Codata.M.Bisimilarity.html#703" class="InductiveConstructor">inf</a> <a id="1003" class="Symbol">(</a><a id="1004" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1011" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1013" class="Symbol">λ</a> <a id="1015" class="Keyword">where</a> <a id="1021" href="Codata.M.Bisimilarity.html#1021" class="Bound">p</a> <a id="1023" class="Symbol">.</a><a id="1024" href="Codata.Thunk.html#544" class="Field">force</a> <a id="1030" class="Symbol">→</a> <a id="1032" href="Codata.M.Bisimilarity.html#941" class="Function">refl</a><a id="1036" class="Symbol">)</a>

  <a id="1041" href="Codata.M.Bisimilarity.html#1041" class="Function">sym</a> <a id="1045" class="Symbol">:</a> <a id="1047" class="Symbol">∀</a> <a id="1049" class="Symbol">{</a><a id="1050" href="Codata.M.Bisimilarity.html#1050" class="Bound">i</a><a id="1051" class="Symbol">}</a> <a id="1053" class="Symbol">→</a> <a id="1055" href="Relation.Binary.Definitions.html#1498" class="Function">Symmetric</a> <a id="1065" class="Symbol">(</a><a id="1066" href="Codata.M.Bisimilarity.html#630" class="Datatype">Bisim</a> <a id="1072" href="Codata.M.Bisimilarity.html#802" class="Bound">C</a> <a id="1074" href="Codata.M.Bisimilarity.html#1050" class="Bound">i</a><a id="1075" class="Symbol">)</a>
  <a id="1079" href="Codata.M.Bisimilarity.html#1041" class="Function">sym</a>  <a id="1084" class="Symbol">(</a><a id="1085" href="Codata.M.Bisimilarity.html#703" class="InductiveConstructor">inf</a> <a id="1089" class="Symbol">(</a><a id="1090" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1097" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1099" href="Codata.M.Bisimilarity.html#1099" class="Bound">f</a><a id="1100" class="Symbol">))</a> <a id="1103" class="Symbol">=</a> <a id="1105" href="Codata.M.Bisimilarity.html#703" class="InductiveConstructor">inf</a> <a id="1109" class="Symbol">(</a><a id="1110" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1117" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1119" class="Symbol">λ</a> <a id="1121" class="Keyword">where</a> <a id="1127" href="Codata.M.Bisimilarity.html#1127" class="Bound">p</a> <a id="1129" class="Symbol">.</a><a id="1130" href="Codata.Thunk.html#544" class="Field">force</a> <a id="1136" class="Symbol">→</a> <a id="1138" href="Codata.M.Bisimilarity.html#1041" class="Function">sym</a> <a id="1142" class="Symbol">(</a><a id="1143" href="Codata.M.Bisimilarity.html#1099" class="Bound">f</a> <a id="1145" href="Codata.M.Bisimilarity.html#1127" class="Bound">p</a> <a id="1147" class="Symbol">.</a><a id="1148" href="Codata.Thunk.html#544" class="Field">force</a><a id="1153" class="Symbol">))</a>

  <a id="1159" href="Codata.M.Bisimilarity.html#1159" class="Function">trans</a> <a id="1165" class="Symbol">:</a> <a id="1167" class="Symbol">∀</a> <a id="1169" class="Symbol">{</a><a id="1170" href="Codata.M.Bisimilarity.html#1170" class="Bound">i</a><a id="1171" class="Symbol">}</a> <a id="1173" class="Symbol">→</a> <a id="1175" href="Relation.Binary.Definitions.html#1866" class="Function">Transitive</a> <a id="1186" class="Symbol">(</a><a id="1187" href="Codata.M.Bisimilarity.html#630" class="Datatype">Bisim</a> <a id="1193" href="Codata.M.Bisimilarity.html#802" class="Bound">C</a> <a id="1195" href="Codata.M.Bisimilarity.html#1170" class="Bound">i</a><a id="1196" class="Symbol">)</a>
  <a id="1200" href="Codata.M.Bisimilarity.html#1159" class="Function">trans</a> <a id="1206" class="Symbol">(</a><a id="1207" href="Codata.M.Bisimilarity.html#703" class="InductiveConstructor">inf</a> <a id="1211" class="Symbol">(</a><a id="1212" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1219" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1221" href="Codata.M.Bisimilarity.html#1221" class="Bound">f</a><a id="1222" class="Symbol">))</a> <a id="1225" class="Symbol">(</a><a id="1226" href="Codata.M.Bisimilarity.html#703" class="InductiveConstructor">inf</a> <a id="1230" class="Symbol">(</a><a id="1231" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1238" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1240" href="Codata.M.Bisimilarity.html#1240" class="Bound">g</a><a id="1241" class="Symbol">))</a> <a id="1244" class="Symbol">=</a>
    <a id="1250" href="Codata.M.Bisimilarity.html#703" class="InductiveConstructor">inf</a> <a id="1254" class="Symbol">(</a><a id="1255" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">P.refl</a> <a id="1262" href="Data.Container.Relation.Binary.Pointwise.html#861" class="InductiveConstructor Operator">,</a> <a id="1264" class="Symbol">λ</a> <a id="1266" class="Keyword">where</a> <a id="1272" href="Codata.M.Bisimilarity.html#1272" class="Bound">p</a> <a id="1274" class="Symbol">.</a><a id="1275" href="Codata.Thunk.html#544" class="Field">force</a> <a id="1281" class="Symbol">→</a> <a id="1283" href="Codata.M.Bisimilarity.html#1159" class="Function">trans</a> <a id="1289" class="Symbol">(</a><a id="1290" href="Codata.M.Bisimilarity.html#1221" class="Bound">f</a> <a id="1292" href="Codata.M.Bisimilarity.html#1272" class="Bound">p</a> <a id="1294" class="Symbol">.</a><a id="1295" href="Codata.Thunk.html#544" class="Field">force</a><a id="1300" class="Symbol">)</a> <a id="1302" class="Symbol">(</a><a id="1303" href="Codata.M.Bisimilarity.html#1240" class="Bound">g</a> <a id="1305" href="Codata.M.Bisimilarity.html#1272" class="Bound">p</a> <a id="1307" class="Symbol">.</a><a id="1308" href="Codata.Thunk.html#544" class="Field">force</a><a id="1313" class="Symbol">))</a>

  <a id="1319" href="Codata.M.Bisimilarity.html#1319" class="Function">isEquivalence</a> <a id="1333" class="Symbol">:</a> <a id="1335" class="Symbol">∀</a> <a id="1337" class="Symbol">{</a><a id="1338" href="Codata.M.Bisimilarity.html#1338" class="Bound">i</a><a id="1339" class="Symbol">}</a> <a id="1341" class="Symbol">→</a> <a id="1343" href="Relation.Binary.Structures.html#1522" class="Record">IsEquivalence</a> <a id="1357" class="Symbol">(</a><a id="1358" href="Codata.M.Bisimilarity.html#630" class="Datatype">Bisim</a> <a id="1364" href="Codata.M.Bisimilarity.html#802" class="Bound">C</a> <a id="1366" href="Codata.M.Bisimilarity.html#1338" class="Bound">i</a><a id="1367" class="Symbol">)</a>
  <a id="1371" href="Codata.M.Bisimilarity.html#1319" class="Function">isEquivalence</a> <a id="1385" class="Symbol">=</a> <a id="1387" class="Keyword">record</a>
    <a id="1398" class="Symbol">{</a> <a id="1400" href="Relation.Binary.Structures.html#1568" class="Field">refl</a>  <a id="1406" class="Symbol">=</a> <a id="1408" href="Codata.M.Bisimilarity.html#941" class="Function">refl</a>
    <a id="1417" class="Symbol">;</a> <a id="1419" href="Relation.Binary.Structures.html#1594" class="Field">sym</a>   <a id="1425" class="Symbol">=</a> <a id="1427" href="Codata.M.Bisimilarity.html#1041" class="Function">sym</a>
    <a id="1435" class="Symbol">;</a> <a id="1437" href="Relation.Binary.Structures.html#1620" class="Field">trans</a> <a id="1443" class="Symbol">=</a> <a id="1445" href="Codata.M.Bisimilarity.html#1159" class="Function">trans</a>
    <a id="1455" class="Symbol">}</a>

  <a id="1460" href="Codata.M.Bisimilarity.html#1460" class="Function">setoid</a> <a id="1467" class="Symbol">:</a> <a id="1469" class="Symbol">{</a><a id="1470" href="Codata.M.Bisimilarity.html#1470" class="Bound">i</a> <a id="1472" class="Symbol">:</a> <a id="1474" href="Agda.Builtin.Size.html#206" class="Postulate">Size</a><a id="1478" class="Symbol">}</a> <a id="1480" class="Symbol">→</a> <a id="1482" href="Relation.Binary.Bundles.html#1009" class="Record">Setoid</a> <a id="1489" class="Symbol">(</a><a id="1490" href="Codata.M.Bisimilarity.html#796" class="Bound">s</a> <a id="1492" href="Agda.Primitive.html#636" class="Primitive Operator">⊔</a> <a id="1494" href="Codata.M.Bisimilarity.html#798" class="Bound">p</a><a id="1495" class="Symbol">)</a> <a id="1497" class="Symbol">(</a><a id="1498" href="Codata.M.Bisimilarity.html#796" class="Bound">s</a> <a id="1500" href="Agda.Primitive.html#636" class="Primitive Operator">⊔</a> <a id="1502" href="Codata.M.Bisimilarity.html#798" class="Bound">p</a><a id="1503" class="Symbol">)</a>
  <a id="1507" href="Codata.M.Bisimilarity.html#1460" class="Function">setoid</a> <a id="1514" class="Symbol">{</a><a id="1515" href="Codata.M.Bisimilarity.html#1515" class="Bound">i</a><a id="1516" class="Symbol">}</a> <a id="1518" class="Symbol">=</a> <a id="1520" class="Keyword">record</a>
    <a id="1531" class="Symbol">{</a> <a id="1533" href="Relation.Binary.Bundles.html#1132" class="Field">isEquivalence</a> <a id="1547" class="Symbol">=</a> <a id="1549" href="Codata.M.Bisimilarity.html#1319" class="Function">isEquivalence</a> <a id="1563" class="Symbol">{</a><a id="1564" href="Codata.M.Bisimilarity.html#1515" class="Bound">i</a><a id="1565" class="Symbol">}</a>
    <a id="1571" class="Symbol">}</a>
</pre></body></html>