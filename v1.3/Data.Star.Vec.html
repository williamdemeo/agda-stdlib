<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Star.Vec</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Vectors defined in terms of the reflexive-transitive closure, Star</a>
<a id="176" class="Comment">------------------------------------------------------------------------</a>

<a id="250" class="Symbol">{-#</a> <a id="254" class="Keyword">OPTIONS</a> <a id="262" class="Pragma">--with-K</a> <a id="271" class="Pragma">--safe</a> <a id="278" class="Symbol">#-}</a>

<a id="283" class="Keyword">module</a> <a id="290" href="Data.Star.Vec.html" class="Module">Data.Star.Vec</a> <a id="304" class="Keyword">where</a>

<a id="311" class="Keyword">open</a> <a id="316" class="Keyword">import</a> <a id="323" href="Data.Star.Nat.html" class="Module">Data.Star.Nat</a>
<a id="337" class="Keyword">open</a> <a id="342" class="Keyword">import</a> <a id="349" href="Data.Star.Fin.html" class="Module">Data.Star.Fin</a> <a id="363" class="Keyword">using</a> <a id="369" class="Symbol">(</a><a id="370" href="Data.Star.Fin.html#466" class="Function">Fin</a><a id="373" class="Symbol">)</a>
<a id="375" class="Keyword">open</a> <a id="380" class="Keyword">import</a> <a id="387" href="Data.Star.Decoration.html" class="Module">Data.Star.Decoration</a>
<a id="408" class="Keyword">open</a> <a id="413" class="Keyword">import</a> <a id="420" href="Data.Star.Pointer.html" class="Module">Data.Star.Pointer</a> <a id="438" class="Symbol">as</a> <a id="441" class="Module">Pointer</a> <a id="449" class="Keyword">hiding</a> <a id="456" class="Symbol">(</a><a id="457" href="Data.Star.Pointer.html#2195" class="Function">lookup</a><a id="463" class="Symbol">)</a>
<a id="465" class="Keyword">open</a> <a id="470" class="Keyword">import</a> <a id="477" href="Data.Star.List.html" class="Module">Data.Star.List</a> <a id="492" class="Keyword">using</a> <a id="498" class="Symbol">(</a><a id="499" href="Data.Star.List.html#560" class="Function">List</a><a id="503" class="Symbol">)</a>
<a id="505" class="Keyword">open</a> <a id="510" class="Keyword">import</a> <a id="517" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="533" class="Keyword">open</a> <a id="538" class="Keyword">import</a> <a id="545" href="Relation.Binary.Consequences.html" class="Module">Relation.Binary.Consequences</a>
<a id="574" class="Keyword">open</a> <a id="579" class="Keyword">import</a> <a id="586" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html" class="Module">Relation.Binary.Construct.Closure.ReflexiveTransitive</a>
<a id="640" class="Keyword">open</a> <a id="645" class="Keyword">import</a> <a id="652" href="Function.html" class="Module">Function</a>
<a id="661" class="Keyword">open</a> <a id="666" class="Keyword">import</a> <a id="673" href="Data.Unit.html" class="Module">Data.Unit</a>

<a id="684" class="Comment">-- The vector type. Vectors are natural numbers decorated with extra</a>
<a id="753" class="Comment">-- information (i.e. elements).</a>

<a id="Vec"></a><a id="786" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="790" class="Symbol">:</a> <a id="792" class="PrimitiveType">Set</a> <a id="796" class="Symbol">→</a> <a id="798" href="Data.Star.Nat.html#535" class="Function">ℕ</a> <a id="800" class="Symbol">→</a> <a id="802" class="PrimitiveType">Set</a>
<a id="806" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="810" href="Data.Star.Vec.html#810" class="Bound">A</a> <a id="812" class="Symbol">=</a> <a id="814" href="Data.Star.Decoration.html#1528" class="Function">All</a> <a id="818" class="Symbol">(λ</a> <a id="821" href="Data.Star.Vec.html#821" class="Bound">_</a> <a id="823" class="Symbol">→</a> <a id="825" href="Data.Star.Vec.html#810" class="Bound">A</a><a id="826" class="Symbol">)</a>

<a id="829" class="Comment">-- Nil and cons.</a>

<a id="[]"></a><a id="847" href="Data.Star.Vec.html#847" class="Function">[]</a> <a id="850" class="Symbol">:</a> <a id="852" class="Symbol">∀</a> <a id="854" class="Symbol">{</a><a id="855" href="Data.Star.Vec.html#855" class="Bound">A</a><a id="856" class="Symbol">}</a> <a id="858" class="Symbol">→</a> <a id="860" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="864" href="Data.Star.Vec.html#855" class="Bound">A</a> <a id="866" href="Data.Star.Nat.html#590" class="Function">zero</a>
<a id="871" href="Data.Star.Vec.html#847" class="Function">[]</a> <a id="874" class="Symbol">=</a> <a id="876" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#546" class="InductiveConstructor">ε</a>

<a id="879" class="Keyword">infixr</a> <a id="886" class="Number">5</a> <a id="888" href="Data.Star.Vec.html#893" class="Function Operator">_∷_</a>

<a id="_∷_"></a><a id="893" href="Data.Star.Vec.html#893" class="Function Operator">_∷_</a> <a id="897" class="Symbol">:</a> <a id="899" class="Symbol">∀</a> <a id="901" class="Symbol">{</a><a id="902" href="Data.Star.Vec.html#902" class="Bound">A</a> <a id="904" href="Data.Star.Vec.html#904" class="Bound">n</a><a id="905" class="Symbol">}</a> <a id="907" class="Symbol">→</a> <a id="909" href="Data.Star.Vec.html#902" class="Bound">A</a> <a id="911" class="Symbol">→</a> <a id="913" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="917" href="Data.Star.Vec.html#902" class="Bound">A</a> <a id="919" href="Data.Star.Vec.html#904" class="Bound">n</a> <a id="921" class="Symbol">→</a> <a id="923" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="927" href="Data.Star.Vec.html#902" class="Bound">A</a> <a id="929" class="Symbol">(</a><a id="930" href="Data.Star.Nat.html#609" class="Function">suc</a> <a id="934" href="Data.Star.Vec.html#904" class="Bound">n</a><a id="935" class="Symbol">)</a>
<a id="937" href="Data.Star.Vec.html#937" class="Bound">x</a> <a id="939" href="Data.Star.Vec.html#893" class="Function Operator">∷</a> <a id="941" href="Data.Star.Vec.html#941" class="Bound">xs</a> <a id="944" class="Symbol">=</a> <a id="946" href="Data.Star.Decoration.html#1016" class="InductiveConstructor">↦</a> <a id="948" href="Data.Star.Vec.html#937" class="Bound">x</a> <a id="950" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#573" class="InductiveConstructor Operator">◅</a> <a id="952" href="Data.Star.Vec.html#941" class="Bound">xs</a>

<a id="956" class="Comment">-- Projections.</a>

<a id="head"></a><a id="973" href="Data.Star.Vec.html#973" class="Function">head</a> <a id="978" class="Symbol">:</a> <a id="980" class="Symbol">∀</a> <a id="982" class="Symbol">{</a><a id="983" href="Data.Star.Vec.html#983" class="Bound">A</a> <a id="985" href="Data.Star.Vec.html#985" class="Bound">n</a><a id="986" class="Symbol">}</a> <a id="988" class="Symbol">→</a> <a id="990" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="994" href="Data.Star.Vec.html#983" class="Bound">A</a> <a id="996" class="Symbol">(</a><a id="997" href="Data.Star.Nat.html#996" class="Function">1#</a> <a id="1000" href="Data.Star.Nat.html#813" class="Function Operator">+</a> <a id="1002" href="Data.Star.Vec.html#985" class="Bound">n</a><a id="1003" class="Symbol">)</a> <a id="1005" class="Symbol">→</a> <a id="1007" href="Data.Star.Vec.html#983" class="Bound">A</a>
<a id="1009" href="Data.Star.Vec.html#973" class="Function">head</a> <a id="1014" class="Symbol">(</a><a id="1015" href="Data.Star.Decoration.html#1016" class="InductiveConstructor">↦</a> <a id="1017" href="Data.Star.Vec.html#1017" class="Bound">x</a> <a id="1019" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#573" class="InductiveConstructor Operator">◅</a> <a id="1021" class="Symbol">_)</a> <a id="1024" class="Symbol">=</a> <a id="1026" href="Data.Star.Vec.html#1017" class="Bound">x</a>

<a id="tail"></a><a id="1029" href="Data.Star.Vec.html#1029" class="Function">tail</a> <a id="1034" class="Symbol">:</a> <a id="1036" class="Symbol">∀</a> <a id="1038" class="Symbol">{</a><a id="1039" href="Data.Star.Vec.html#1039" class="Bound">A</a> <a id="1041" href="Data.Star.Vec.html#1041" class="Bound">n</a><a id="1042" class="Symbol">}</a> <a id="1044" class="Symbol">→</a> <a id="1046" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="1050" href="Data.Star.Vec.html#1039" class="Bound">A</a> <a id="1052" class="Symbol">(</a><a id="1053" href="Data.Star.Nat.html#996" class="Function">1#</a> <a id="1056" href="Data.Star.Nat.html#813" class="Function Operator">+</a> <a id="1058" href="Data.Star.Vec.html#1041" class="Bound">n</a><a id="1059" class="Symbol">)</a> <a id="1061" class="Symbol">→</a> <a id="1063" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="1067" href="Data.Star.Vec.html#1039" class="Bound">A</a> <a id="1069" href="Data.Star.Vec.html#1041" class="Bound">n</a>
<a id="1071" href="Data.Star.Vec.html#1029" class="Function">tail</a> <a id="1076" class="Symbol">(</a><a id="1077" href="Data.Star.Decoration.html#1016" class="InductiveConstructor">↦</a> <a id="1079" class="Symbol">_</a> <a id="1081" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#573" class="InductiveConstructor Operator">◅</a> <a id="1083" href="Data.Star.Vec.html#1083" class="Bound">xs</a><a id="1085" class="Symbol">)</a> <a id="1087" class="Symbol">=</a> <a id="1089" href="Data.Star.Vec.html#1083" class="Bound">xs</a>

<a id="1093" class="Comment">-- Append.</a>

<a id="1105" class="Keyword">infixr</a> <a id="1112" class="Number">5</a> <a id="1114" href="Data.Star.Vec.html#1120" class="Function Operator">_++_</a>

<a id="_++_"></a><a id="1120" href="Data.Star.Vec.html#1120" class="Function Operator">_++_</a> <a id="1125" class="Symbol">:</a> <a id="1127" class="Symbol">∀</a> <a id="1129" class="Symbol">{</a><a id="1130" href="Data.Star.Vec.html#1130" class="Bound">A</a> <a id="1132" href="Data.Star.Vec.html#1132" class="Bound">m</a> <a id="1134" href="Data.Star.Vec.html#1134" class="Bound">n</a><a id="1135" class="Symbol">}</a> <a id="1137" class="Symbol">→</a> <a id="1139" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="1143" href="Data.Star.Vec.html#1130" class="Bound">A</a> <a id="1145" href="Data.Star.Vec.html#1132" class="Bound">m</a> <a id="1147" class="Symbol">→</a> <a id="1149" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="1153" href="Data.Star.Vec.html#1130" class="Bound">A</a> <a id="1155" href="Data.Star.Vec.html#1134" class="Bound">n</a> <a id="1157" class="Symbol">→</a> <a id="1159" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="1163" href="Data.Star.Vec.html#1130" class="Bound">A</a> <a id="1165" class="Symbol">(</a><a id="1166" href="Data.Star.Vec.html#1132" class="Bound">m</a> <a id="1168" href="Data.Star.Nat.html#813" class="Function Operator">+</a> <a id="1170" href="Data.Star.Vec.html#1134" class="Bound">n</a><a id="1171" class="Symbol">)</a>
<a id="1173" href="Data.Star.Vec.html#1120" class="Function Operator">_++_</a> <a id="1178" class="Symbol">=</a> <a id="1180" href="Data.Star.Decoration.html#2945" class="Function Operator">_◅◅◅_</a>

<a id="1187" class="Comment">-- Safe lookup.</a>

<a id="lookup"></a><a id="1204" href="Data.Star.Vec.html#1204" class="Function">lookup</a> <a id="1211" class="Symbol">:</a> <a id="1213" class="Symbol">∀</a> <a id="1215" class="Symbol">{</a><a id="1216" href="Data.Star.Vec.html#1216" class="Bound">A</a> <a id="1218" href="Data.Star.Vec.html#1218" class="Bound">n</a><a id="1219" class="Symbol">}</a> <a id="1221" class="Symbol">→</a> <a id="1223" href="Data.Star.Fin.html#466" class="Function">Fin</a> <a id="1227" href="Data.Star.Vec.html#1218" class="Bound">n</a> <a id="1229" class="Symbol">→</a> <a id="1231" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="1235" href="Data.Star.Vec.html#1216" class="Bound">A</a> <a id="1237" href="Data.Star.Vec.html#1218" class="Bound">n</a> <a id="1239" class="Symbol">→</a> <a id="1241" href="Data.Star.Vec.html#1216" class="Bound">A</a>
<a id="1243" href="Data.Star.Vec.html#1204" class="Function">lookup</a> <a id="1250" href="Data.Star.Vec.html#1250" class="Bound">i</a> <a id="1252" href="Data.Star.Vec.html#1252" class="Bound">xs</a> <a id="1255" class="Keyword">with</a> <a id="1260" href="Data.Star.Pointer.html#2195" class="Function">Pointer.lookup</a> <a id="1275" href="Data.Star.Vec.html#1250" class="Bound">i</a> <a id="1277" href="Data.Star.Vec.html#1252" class="Bound">xs</a>
<a id="1280" class="Symbol">...</a> <a id="1284" class="Symbol">|</a> <a id="1286" href="Data.Star.Pointer.html#1922" class="InductiveConstructor">result</a> <a id="1293" class="Symbol">_</a> <a id="1295" href="Data.Star.Vec.html#1295" class="Bound">x</a> <a id="1297" class="Symbol">=</a> <a id="1299" href="Data.Star.Vec.html#1295" class="Bound">x</a>

<a id="1302" class="Comment">------------------------------------------------------------------------</a>
<a id="1375" class="Comment">-- Conversions</a>

<a id="fromList"></a><a id="1391" href="Data.Star.Vec.html#1391" class="Function">fromList</a> <a id="1400" class="Symbol">:</a> <a id="1402" class="Symbol">∀</a> <a id="1404" class="Symbol">{</a><a id="1405" href="Data.Star.Vec.html#1405" class="Bound">A</a><a id="1406" class="Symbol">}</a> <a id="1408" class="Symbol">→</a> <a id="1410" class="Symbol">(</a><a id="1411" href="Data.Star.Vec.html#1411" class="Bound">xs</a> <a id="1414" class="Symbol">:</a> <a id="1416" href="Data.Star.List.html#560" class="Function">List</a> <a id="1421" href="Data.Star.Vec.html#1405" class="Bound">A</a><a id="1422" class="Symbol">)</a> <a id="1424" class="Symbol">→</a> <a id="1426" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="1430" href="Data.Star.Vec.html#1405" class="Bound">A</a> <a id="1432" class="Symbol">(</a><a id="1433" href="Data.Star.Nat.html#665" class="Function">length</a> <a id="1440" href="Data.Star.Vec.html#1411" class="Bound">xs</a><a id="1442" class="Symbol">)</a>
<a id="1444" href="Data.Star.Vec.html#1391" class="Function">fromList</a> <a id="1453" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#546" class="InductiveConstructor">ε</a>        <a id="1462" class="Symbol">=</a> <a id="1464" href="Data.Star.Vec.html#847" class="Function">[]</a>
<a id="1467" href="Data.Star.Vec.html#1391" class="Function">fromList</a> <a id="1476" class="Symbol">(</a><a id="1477" href="Data.Star.Vec.html#1477" class="Bound">x</a> <a id="1479" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#573" class="InductiveConstructor Operator">◅</a> <a id="1481" href="Data.Star.Vec.html#1481" class="Bound">xs</a><a id="1483" class="Symbol">)</a> <a id="1485" class="Symbol">=</a> <a id="1487" href="Data.Star.Vec.html#1477" class="Bound">x</a> <a id="1489" href="Data.Star.Vec.html#893" class="Function Operator">∷</a> <a id="1491" href="Data.Star.Vec.html#1391" class="Function">fromList</a> <a id="1500" href="Data.Star.Vec.html#1481" class="Bound">xs</a>

<a id="toList"></a><a id="1504" href="Data.Star.Vec.html#1504" class="Function">toList</a> <a id="1511" class="Symbol">:</a> <a id="1513" class="Symbol">∀</a> <a id="1515" class="Symbol">{</a><a id="1516" href="Data.Star.Vec.html#1516" class="Bound">A</a> <a id="1518" href="Data.Star.Vec.html#1518" class="Bound">n</a><a id="1519" class="Symbol">}</a> <a id="1521" class="Symbol">→</a> <a id="1523" href="Data.Star.Vec.html#786" class="Function">Vec</a> <a id="1527" href="Data.Star.Vec.html#1516" class="Bound">A</a> <a id="1529" href="Data.Star.Vec.html#1518" class="Bound">n</a> <a id="1531" class="Symbol">→</a> <a id="1533" href="Data.Star.List.html#560" class="Function">List</a> <a id="1538" href="Data.Star.Vec.html#1516" class="Bound">A</a>
<a id="1540" href="Data.Star.Vec.html#1504" class="Function">toList</a> <a id="1547" class="Symbol">=</a> <a id="1549" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1525" class="Function">gmap</a> <a id="1554" class="Symbol">(</a><a id="1555" href="Function.Base.html#636" class="Function">const</a> <a id="1561" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1563" class="Symbol">)</a> <a id="1565" href="Data.Star.Decoration.html#1303" class="Function">decoration</a>
</pre></body></html>