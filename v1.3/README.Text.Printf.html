<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>README.Text.Printf</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Examples of format strings and printf</a>
<a id="147" class="Comment">------------------------------------------------------------------------</a>

<a id="221" class="Symbol">{-#</a> <a id="225" class="Keyword">OPTIONS</a> <a id="233" class="Pragma">--safe</a> <a id="240" class="Pragma">--without-K</a> <a id="252" class="Symbol">#-}</a>

<a id="257" class="Keyword">module</a> <a id="264" href="README.Text.Printf.html" class="Module">README.Text.Printf</a> <a id="283" class="Keyword">where</a>

<a id="290" class="Keyword">open</a> <a id="295" class="Keyword">import</a> <a id="302" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Data.Char.Base.html" class="Module">Data.Char.Base</a>
<a id="343" class="Keyword">open</a> <a id="348" class="Keyword">import</a> <a id="355" href="Data.List.Base.html" class="Module">Data.List.Base</a>
<a id="370" class="Keyword">open</a> <a id="375" class="Keyword">import</a> <a id="382" href="Data.String.Base.html" class="Module">Data.String.Base</a>
<a id="399" class="Keyword">open</a> <a id="404" class="Keyword">import</a> <a id="411" href="Data.Sum.Base.html" class="Module">Data.Sum.Base</a>

<a id="426" class="Keyword">open</a> <a id="431" class="Keyword">import</a> <a id="438" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>

<a id="477" class="Comment">------------------------------------------------------------------------</a>
<a id="550" class="Comment">-- Format strings</a>

<a id="569" class="Keyword">open</a> <a id="574" class="Keyword">import</a> <a id="581" href="Text.Format.html" class="Module">Text.Format</a>

<a id="594" class="Comment">-- We can specify a format by writing a string which will get interpreted</a>
<a id="668" class="Comment">-- by a lexer into a list of formatting directives.</a>

<a id="721" class="Comment">-- The specification types are always started with a &#39;%&#39; character:</a>

<a id="790" class="Comment">-- Integers (%d or %i)</a>
<a id="813" class="Comment">-- Naturals (%u)</a>
<a id="830" class="Comment">-- Floats   (%f)</a>
<a id="847" class="Comment">-- Chars    (%c)</a>
<a id="864" class="Comment">-- Strings  (%s)</a>

<a id="882" class="Comment">-- Anything which is not a type specification is a raw string to be spliced</a>
<a id="958" class="Comment">-- in the output of printf.</a>

<a id="987" class="Comment">-- For instance the following format alternates types and raw strings</a>

<a id="1058" href="README.Text.Printf.html#1058" class="Function">_</a> <a id="1060" class="Symbol">:</a> <a id="1062" href="Text.Format.html#1936" class="Function">lexer</a> <a id="1068" class="String">&quot;%s: %u + %u ≡ %u&quot;</a>
  <a id="1089" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1091" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="1096" class="Symbol">(</a><a id="1097" href="Text.Format.html#899" class="InductiveConstructor">`String</a> <a id="1105" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1107" href="Text.Format.html#917" class="InductiveConstructor">Raw</a> <a id="1111" class="String">&quot;: &quot;</a> <a id="1116" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1118" href="Text.Format.html#880" class="InductiveConstructor">`ℕ</a> <a id="1121" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1123" href="Text.Format.html#917" class="InductiveConstructor">Raw</a> <a id="1127" class="String">&quot; + &quot;</a> <a id="1133" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1135" href="Text.Format.html#880" class="InductiveConstructor">`ℕ</a> <a id="1138" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1140" href="Text.Format.html#917" class="InductiveConstructor">Raw</a> <a id="1144" class="String">&quot; ≡ &quot;</a> <a id="1150" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1152" href="Text.Format.html#880" class="InductiveConstructor">`ℕ</a> <a id="1155" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1157" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1159" class="Symbol">)</a>
<a id="1161" class="Symbol">_</a> <a id="1163" class="Symbol">=</a> <a id="1165" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="1171" class="Comment">-- Lexing can fail. There are two possible errors:</a>

<a id="1223" class="Comment">-- If we start a specification type with a &#39;%&#39; but the string ends then</a>
<a id="1295" class="Comment">-- we get an UnexpectedEndOfString error</a>

<a id="1337" href="README.Text.Printf.html#1337" class="Function">_</a> <a id="1339" class="Symbol">:</a> <a id="1341" href="Text.Format.html#1936" class="Function">lexer</a> <a id="1347" class="String">&quot;%s: %u + %u ≡ %&quot;</a>
  <a id="1367" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1369" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="1374" class="Symbol">(</a><a id="1375" href="Text.Format.html#1686" class="InductiveConstructor">UnexpectedEndOfString</a> <a id="1397" class="String">&quot;%s: %u + %u ≡ %&quot;</a><a id="1414" class="Symbol">)</a>
<a id="1416" class="Symbol">_</a> <a id="1418" class="Symbol">=</a> <a id="1420" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="1426" class="Comment">-- If we start a specification type with a &#39;%&#39; and the following character</a>
<a id="1501" class="Comment">-- does not correspond to an existing type, we get an InvalidType error</a>
<a id="1573" class="Comment">-- together with a focus highlighting the position of the problematic type.</a>

<a id="1650" href="README.Text.Printf.html#1650" class="Function">_</a> <a id="1652" class="Symbol">:</a> <a id="1654" href="Text.Format.html#1936" class="Function">lexer</a> <a id="1660" class="String">&quot;%s: %u + %a ≡ %u&quot;</a>
  <a id="1681" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1683" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="1688" class="Symbol">(</a><a id="1689" href="Text.Format.html#1785" class="InductiveConstructor">InvalidType</a> <a id="1701" class="String">&quot;%s: %u + %&quot;</a> <a id="1714" class="String">&#39;a&#39;</a> <a id="1718" class="String">&quot; ≡ %u&quot;</a><a id="1725" class="Symbol">)</a>
<a id="1727" class="Symbol">_</a> <a id="1729" class="Symbol">=</a> <a id="1731" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="1737" class="Comment">------------------------------------------------------------------------</a>
<a id="1810" class="Comment">-- Printf</a>

<a id="1821" class="Keyword">open</a> <a id="1826" class="Keyword">import</a> <a id="1833" href="Text.Printf.html" class="Module">Text.Printf</a>

<a id="1846" class="Comment">-- printf is a function which takes a format string as an argument and</a>
<a id="1917" class="Comment">-- returns a function expecting a value for each type specification present</a>
<a id="1993" class="Comment">-- in the format and returns a string splicing in these values into the</a>
<a id="2065" class="Comment">-- format string.</a>

<a id="2084" class="Comment">-- For instance `printf &quot;%s: %u + %u ≡ %u&quot;` is a</a>
<a id="2133" class="Comment">-- `String → ℕ → ℕ → ℕ → String` function.</a>

<a id="2177" href="README.Text.Printf.html#2177" class="Function">_</a> <a id="2179" class="Symbol">:</a> <a id="2181" href="Agda.Builtin.String.html#274" class="Postulate">String</a> <a id="2188" class="Symbol">→</a> <a id="2190" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="2192" class="Symbol">→</a> <a id="2194" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="2196" class="Symbol">→</a> <a id="2198" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="2200" class="Symbol">→</a> <a id="2202" href="Agda.Builtin.String.html#274" class="Postulate">String</a>
<a id="2209" class="Symbol">_</a> <a id="2211" class="Symbol">=</a> <a id="2213" href="Text.Printf.html#1650" class="Function">printf</a> <a id="2220" class="String">&quot;%s: %u + %u ≡ %u&quot;</a>

<a id="2240" href="README.Text.Printf.html#2240" class="Function">_</a> <a id="2242" class="Symbol">:</a> <a id="2244" href="Text.Printf.html#1650" class="Function">printf</a> <a id="2251" class="String">&quot;%s: %u + %u ≡ %u&quot;</a> <a id="2270" class="String">&quot;example&quot;</a> <a id="2280" class="Number">3</a> <a id="2282" class="Number">2</a> <a id="2284" class="Number">5</a>
  <a id="2288" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2290" class="String">&quot;example: 3 + 2 ≡ 5&quot;</a>
<a id="2311" class="Symbol">_</a> <a id="2313" class="Symbol">=</a> <a id="2315" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="2321" class="Comment">-- If the format string str is invalid then `printf str` will have type</a>
<a id="2393" class="Comment">-- `Error e` where `e` is the lexing error.</a>

<a id="2438" href="README.Text.Printf.html#2438" class="Function">_</a> <a id="2440" class="Symbol">:</a> <a id="2442" href="Text.Printf.html#1284" class="Record">Text.Printf.Error</a> <a id="2460" class="Symbol">(</a><a id="2461" href="Text.Format.html#1686" class="InductiveConstructor">UnexpectedEndOfString</a> <a id="2483" class="String">&quot;%s: %u + %u ≡ %&quot;</a><a id="2500" class="Symbol">)</a>
<a id="2502" class="Symbol">_</a> <a id="2504" class="Symbol">=</a> <a id="2506" href="Text.Printf.html#1650" class="Function">printf</a> <a id="2513" class="String">&quot;%s: %u + %u ≡ %&quot;</a>

<a id="2532" href="README.Text.Printf.html#2532" class="Function">_</a> <a id="2534" class="Symbol">:</a> <a id="2536" href="Text.Printf.html#1284" class="Record">Text.Printf.Error</a> <a id="2554" class="Symbol">(</a><a id="2555" href="Text.Format.html#1785" class="InductiveConstructor">InvalidType</a> <a id="2567" class="String">&quot;%s: %u + %&quot;</a> <a id="2580" class="String">&#39;a&#39;</a> <a id="2584" class="String">&quot; ≡ %u&quot;</a><a id="2591" class="Symbol">)</a>
<a id="2593" class="Symbol">_</a> <a id="2595" class="Symbol">=</a> <a id="2597" href="Text.Printf.html#1650" class="Function">printf</a> <a id="2604" class="String">&quot;%s: %u + %a ≡ %u&quot;</a>

<a id="2624" class="Comment">-- Trying to pass arguments to such an ̀Error` type will lead to a</a>
<a id="2691" class="Comment">-- unification error which hopefully makes the problem clear e.g.</a>
<a id="2757" class="Comment">-- `printf &quot;%s: %u + %a ≡ %u&quot; &quot;example&quot; 3 2 5` fails with the error:</a>

<a id="2827" class="Comment">-- Text.Printf.Error (InvalidType &quot;%s: %u + %&quot; &#39;a&#39; &quot; ≡ %u&quot;) should be</a>
<a id="2897" class="Comment">-- a function type, but it isn&#39;t</a>
<a id="2930" class="Comment">-- when checking that &quot;example&quot; 3 2 5 are valid arguments to a</a>
<a id="2993" class="Comment">-- function of type Text.Printf.Printf (lexer &quot;%s: %u + %a ≡ %u&quot;)</a>
</pre></body></html>