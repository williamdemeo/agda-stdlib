<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.M</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- M-types (the dual of W-types)</a>
<a id="139" class="Comment">------------------------------------------------------------------------</a>

<a id="213" class="Symbol">{-#</a> <a id="217" class="Keyword">OPTIONS</a> <a id="225" class="Pragma">--without-K</a> <a id="237" class="Pragma">--sized-types</a> <a id="251" class="Symbol">#-}</a>

<a id="256" class="Keyword">module</a> <a id="263" href="Codata.M.html" class="Module">Codata.M</a> <a id="272" class="Keyword">where</a>

<a id="279" class="Keyword">open</a> <a id="284" class="Keyword">import</a> <a id="291" href="Size.html" class="Module">Size</a>
<a id="296" class="Keyword">open</a> <a id="301" class="Keyword">import</a> <a id="308" href="Level.html" class="Module">Level</a>
<a id="314" class="Keyword">open</a> <a id="319" class="Keyword">import</a> <a id="326" href="Codata.Thunk.html" class="Module">Codata.Thunk</a> <a id="339" class="Keyword">using</a> <a id="345" class="Symbol">(</a><a id="346" href="Codata.Thunk.html#467" class="Record">Thunk</a><a id="351" class="Symbol">;</a> <a id="353" href="Codata.Thunk.html#541" class="Field">force</a><a id="358" class="Symbol">)</a>
<a id="360" class="Keyword">open</a> <a id="365" class="Keyword">import</a> <a id="372" href="Data.Product.html" class="Module">Data.Product</a> <a id="385" class="Keyword">hiding</a> <a id="392" class="Symbol">(</a><a id="393" href="Data.Product.html#2486" class="Function">map</a><a id="396" class="Symbol">)</a>
<a id="398" class="Keyword">open</a> <a id="403" class="Keyword">import</a> <a id="410" href="Data.Container.Core.html" class="Module">Data.Container.Core</a> <a id="430" class="Symbol">as</a> <a id="433" class="Module">C</a> <a id="435" class="Keyword">hiding</a> <a id="442" class="Symbol">(</a><a id="443" href="Data.Container.Core.html#880" class="Function">map</a><a id="446" class="Symbol">)</a>

<a id="449" class="Keyword">data</a> <a id="M"></a><a id="454" href="Codata.M.html#454" class="Datatype">M</a> <a id="456" class="Symbol">{</a><a id="457" href="Codata.M.html#457" class="Bound">s</a> <a id="459" href="Codata.M.html#459" class="Bound">p</a><a id="460" class="Symbol">}</a> <a id="462" class="Symbol">(</a><a id="463" href="Codata.M.html#463" class="Bound">C</a> <a id="465" class="Symbol">:</a> <a id="467" href="Data.Container.Core.html#558" class="Record">Container</a> <a id="477" href="Codata.M.html#457" class="Bound">s</a> <a id="479" href="Codata.M.html#459" class="Bound">p</a><a id="480" class="Symbol">)</a> <a id="482" class="Symbol">(</a><a id="483" href="Codata.M.html#483" class="Bound">i</a> <a id="485" class="Symbol">:</a> <a id="487" href="Agda.Builtin.Size.html#202" class="Postulate">Size</a><a id="491" class="Symbol">)</a> <a id="493" class="Symbol">:</a> <a id="495" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="499" class="Symbol">(</a><a id="500" href="Codata.M.html#457" class="Bound">s</a> <a id="502" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="504" href="Codata.M.html#459" class="Bound">p</a><a id="505" class="Symbol">)</a> <a id="507" class="Keyword">where</a>
  <a id="M.inf"></a><a id="515" href="Codata.M.html#515" class="InductiveConstructor">inf</a> <a id="519" class="Symbol">:</a> <a id="521" href="Data.Container.Core.html#755" class="Function Operator">⟦</a> <a id="523" href="Codata.M.html#463" class="Bound">C</a> <a id="525" href="Data.Container.Core.html#755" class="Function Operator">⟧</a> <a id="527" class="Symbol">(</a><a id="528" href="Codata.Thunk.html#467" class="Record">Thunk</a> <a id="534" class="Symbol">(</a><a id="535" href="Codata.M.html#454" class="Datatype">M</a> <a id="537" href="Codata.M.html#463" class="Bound">C</a><a id="538" class="Symbol">)</a> <a id="540" href="Codata.M.html#483" class="Bound">i</a><a id="541" class="Symbol">)</a> <a id="543" class="Symbol">→</a> <a id="545" href="Codata.M.html#454" class="Datatype">M</a> <a id="547" href="Codata.M.html#463" class="Bound">C</a> <a id="549" href="Codata.M.html#483" class="Bound">i</a>

<a id="552" class="Keyword">module</a> <a id="559" href="Codata.M.html#559" class="Module">_</a> <a id="561" class="Symbol">{</a><a id="562" href="Codata.M.html#562" class="Bound">s</a> <a id="564" href="Codata.M.html#564" class="Bound">p</a><a id="565" class="Symbol">}</a> <a id="567" class="Symbol">{</a><a id="568" href="Codata.M.html#568" class="Bound">C</a> <a id="570" class="Symbol">:</a> <a id="572" href="Data.Container.Core.html#558" class="Record">Container</a> <a id="582" href="Codata.M.html#562" class="Bound">s</a> <a id="584" href="Codata.M.html#564" class="Bound">p</a><a id="585" class="Symbol">}</a> <a id="587" class="Keyword">where</a>

  <a id="596" href="Codata.M.html#596" class="Function">head</a> <a id="601" class="Symbol">:</a> <a id="603" class="Symbol">∀</a> <a id="605" class="Symbol">{</a><a id="606" href="Codata.M.html#606" class="Bound">i</a><a id="607" class="Symbol">}</a> <a id="609" class="Symbol">→</a> <a id="611" href="Codata.M.html#454" class="Datatype">M</a> <a id="613" href="Codata.M.html#568" class="Bound">C</a> <a id="615" href="Codata.M.html#606" class="Bound">i</a> <a id="617" class="Symbol">→</a> <a id="619" href="Data.Container.Core.html#638" class="Field">Shape</a> <a id="625" href="Codata.M.html#568" class="Bound">C</a>
  <a id="629" href="Codata.M.html#596" class="Function">head</a> <a id="634" class="Symbol">(</a><a id="635" href="Codata.M.html#515" class="InductiveConstructor">inf</a> <a id="639" class="Symbol">(</a><a id="640" href="Codata.M.html#640" class="Bound">x</a> <a id="642" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="644" href="Codata.M.html#644" class="Bound">f</a><a id="645" class="Symbol">))</a> <a id="648" class="Symbol">=</a> <a id="650" href="Codata.M.html#640" class="Bound">x</a>

  <a id="655" href="Codata.M.html#655" class="Function">tail</a> <a id="660" class="Symbol">:</a> <a id="662" class="Symbol">(</a><a id="663" href="Codata.M.html#663" class="Bound">x</a> <a id="665" class="Symbol">:</a> <a id="667" href="Codata.M.html#454" class="Datatype">M</a> <a id="669" href="Codata.M.html#568" class="Bound">C</a> <a id="671" href="Agda.Builtin.Size.html#304" class="Postulate">∞</a><a id="672" class="Symbol">)</a> <a id="674" class="Symbol">→</a> <a id="676" href="Data.Container.Core.html#659" class="Field">Position</a> <a id="685" href="Codata.M.html#568" class="Bound">C</a> <a id="687" class="Symbol">(</a><a id="688" href="Codata.M.html#596" class="Function">head</a> <a id="693" href="Codata.M.html#663" class="Bound">x</a><a id="694" class="Symbol">)</a> <a id="696" class="Symbol">→</a> <a id="698" href="Codata.M.html#454" class="Datatype">M</a> <a id="700" href="Codata.M.html#568" class="Bound">C</a> <a id="702" href="Agda.Builtin.Size.html#304" class="Postulate">∞</a>
  <a id="706" href="Codata.M.html#655" class="Function">tail</a> <a id="711" class="Symbol">(</a><a id="712" href="Codata.M.html#515" class="InductiveConstructor">inf</a> <a id="716" class="Symbol">(</a><a id="717" href="Codata.M.html#717" class="Bound">x</a> <a id="719" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="721" href="Codata.M.html#721" class="Bound">f</a><a id="722" class="Symbol">))</a> <a id="725" class="Symbol">=</a> <a id="727" class="Symbol">λ</a> <a id="729" href="Codata.M.html#729" class="Bound">p</a> <a id="731" class="Symbol">→</a> <a id="733" href="Codata.M.html#721" class="Bound">f</a> <a id="735" href="Codata.M.html#729" class="Bound">p</a> <a id="737" class="Symbol">.</a><a id="738" href="Codata.Thunk.html#541" class="Field">force</a>

<a id="745" class="Comment">-- map</a>

<a id="753" class="Keyword">module</a> <a id="760" href="Codata.M.html#760" class="Module">_</a> <a id="762" class="Symbol">{</a><a id="763" href="Codata.M.html#763" class="Bound">s₁</a> <a id="766" href="Codata.M.html#766" class="Bound">s₂</a> <a id="769" href="Codata.M.html#769" class="Bound">p₁</a> <a id="772" href="Codata.M.html#772" class="Bound">p₂</a><a id="774" class="Symbol">}</a> <a id="776" class="Symbol">{</a><a id="777" href="Codata.M.html#777" class="Bound">C₁</a> <a id="780" class="Symbol">:</a> <a id="782" href="Data.Container.Core.html#558" class="Record">Container</a> <a id="792" href="Codata.M.html#763" class="Bound">s₁</a> <a id="795" href="Codata.M.html#769" class="Bound">p₁</a><a id="797" class="Symbol">}</a> <a id="799" class="Symbol">{</a><a id="800" href="Codata.M.html#800" class="Bound">C₂</a> <a id="803" class="Symbol">:</a> <a id="805" href="Data.Container.Core.html#558" class="Record">Container</a> <a id="815" href="Codata.M.html#766" class="Bound">s₂</a> <a id="818" href="Codata.M.html#772" class="Bound">p₂</a><a id="820" class="Symbol">}</a>
         <a id="831" class="Symbol">(</a><a id="832" href="Codata.M.html#832" class="Bound">m</a> <a id="834" class="Symbol">:</a> <a id="836" href="Codata.M.html#777" class="Bound">C₁</a> <a id="839" href="Data.Container.Core.html#1054" class="Record Operator">⇒</a> <a id="841" href="Codata.M.html#800" class="Bound">C₂</a><a id="843" class="Symbol">)</a> <a id="845" class="Keyword">where</a>

  <a id="854" href="Codata.M.html#854" class="Function">map</a> <a id="858" class="Symbol">:</a> <a id="860" class="Symbol">∀</a> <a id="862" class="Symbol">{</a><a id="863" href="Codata.M.html#863" class="Bound">i</a><a id="864" class="Symbol">}</a> <a id="866" class="Symbol">→</a> <a id="868" href="Codata.M.html#454" class="Datatype">M</a> <a id="870" href="Codata.M.html#777" class="Bound">C₁</a> <a id="873" href="Codata.M.html#863" class="Bound">i</a> <a id="875" class="Symbol">→</a> <a id="877" href="Codata.M.html#454" class="Datatype">M</a> <a id="879" href="Codata.M.html#800" class="Bound">C₂</a> <a id="882" href="Codata.M.html#863" class="Bound">i</a>
  <a id="886" href="Codata.M.html#854" class="Function">map</a> <a id="890" class="Symbol">(</a><a id="891" href="Codata.M.html#515" class="InductiveConstructor">inf</a> <a id="895" href="Codata.M.html#895" class="Bound">t</a><a id="896" class="Symbol">)</a> <a id="898" class="Symbol">=</a> <a id="900" href="Codata.M.html#515" class="InductiveConstructor">inf</a> <a id="904" class="Symbol">(</a><a id="905" href="Data.Container.Core.html#1286" class="Function Operator">⟪</a> <a id="907" href="Codata.M.html#832" class="Bound">m</a> <a id="909" href="Data.Container.Core.html#1286" class="Function Operator">⟫</a> <a id="911" class="Symbol">(</a><a id="912" href="Data.Container.Core.html#880" class="Function">C.map</a> <a id="918" class="Symbol">(λ</a> <a id="921" href="Codata.M.html#921" class="Bound">t</a> <a id="923" class="Symbol">→</a> <a id="925" class="Symbol">λ</a> <a id="927" class="Keyword">where</a> <a id="933" class="Symbol">.</a><a id="934" href="Codata.Thunk.html#541" class="Field">force</a> <a id="940" class="Symbol">→</a> <a id="942" href="Codata.M.html#854" class="Function">map</a> <a id="946" class="Symbol">(</a><a id="947" href="Codata.M.html#921" class="Bound">t</a> <a id="949" class="Symbol">.</a><a id="950" href="Codata.Thunk.html#541" class="Field">force</a><a id="955" class="Symbol">))</a> <a id="958" href="Codata.M.html#895" class="Bound">t</a><a id="959" class="Symbol">))</a>

<a id="963" class="Comment">-- unfold</a>

<a id="974" class="Keyword">module</a> <a id="981" href="Codata.M.html#981" class="Module">_</a> <a id="983" class="Symbol">{</a><a id="984" href="Codata.M.html#984" class="Bound">s</a> <a id="986" href="Codata.M.html#986" class="Bound">p</a> <a id="988" href="Codata.M.html#988" class="Bound">ℓ</a><a id="989" class="Symbol">}</a> <a id="991" class="Symbol">{</a><a id="992" href="Codata.M.html#992" class="Bound">C</a> <a id="994" class="Symbol">:</a> <a id="996" href="Data.Container.Core.html#558" class="Record">Container</a> <a id="1006" href="Codata.M.html#984" class="Bound">s</a> <a id="1008" href="Codata.M.html#986" class="Bound">p</a><a id="1009" class="Symbol">}</a> <a id="1011" class="Symbol">(</a><a id="1012" class="Keyword">open</a> <a id="1017" href="Data.Container.Core.html#558" class="Module">Container</a> <a id="1027" href="Codata.M.html#992" class="Bound">C</a><a id="1028" class="Symbol">)</a>
         <a id="1039" class="Symbol">{</a><a id="1040" href="Codata.M.html#1040" class="Bound">S</a> <a id="1042" class="Symbol">:</a> <a id="1044" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1048" href="Codata.M.html#988" class="Bound">ℓ</a><a id="1049" class="Symbol">}</a> <a id="1051" class="Symbol">(</a><a id="1052" href="Codata.M.html#1052" class="Bound">alg</a> <a id="1056" class="Symbol">:</a> <a id="1058" href="Codata.M.html#1040" class="Bound">S</a> <a id="1060" class="Symbol">→</a> <a id="1062" href="Data.Container.Core.html#755" class="Function Operator">⟦</a> <a id="1064" href="Codata.M.html#992" class="Bound">C</a> <a id="1066" href="Data.Container.Core.html#755" class="Function Operator">⟧</a> <a id="1068" href="Codata.M.html#1040" class="Bound">S</a><a id="1069" class="Symbol">)</a> <a id="1071" class="Keyword">where</a>

  <a id="1080" href="Codata.M.html#1080" class="Function">unfold</a> <a id="1087" class="Symbol">:</a> <a id="1089" href="Codata.M.html#1040" class="Bound">S</a> <a id="1091" class="Symbol">→</a> <a id="1093" class="Symbol">∀</a> <a id="1095" class="Symbol">{</a><a id="1096" href="Codata.M.html#1096" class="Bound">i</a><a id="1097" class="Symbol">}</a> <a id="1099" class="Symbol">→</a> <a id="1101" href="Codata.M.html#454" class="Datatype">M</a> <a id="1103" href="Codata.M.html#992" class="Bound">C</a> <a id="1105" href="Codata.M.html#1096" class="Bound">i</a>
  <a id="1109" href="Codata.M.html#1080" class="Function">unfold</a> <a id="1116" href="Codata.M.html#1116" class="Bound">seed</a> <a id="1121" class="Symbol">=</a> <a id="1123" class="Keyword">let</a> <a id="1127" class="Symbol">(</a><a id="1128" href="Codata.M.html#1128" class="Bound">x</a> <a id="1130" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1132" href="Codata.M.html#1132" class="Bound">next</a><a id="1136" class="Symbol">)</a> <a id="1138" class="Symbol">=</a> <a id="1140" href="Codata.M.html#1052" class="Bound">alg</a> <a id="1144" href="Codata.M.html#1116" class="Bound">seed</a> <a id="1149" class="Keyword">in</a>
                <a id="1168" href="Codata.M.html#515" class="InductiveConstructor">inf</a> <a id="1172" class="Symbol">(</a><a id="1173" href="Codata.M.html#1128" class="Bound">x</a> <a id="1175" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1177" class="Symbol">λ</a> <a id="1179" href="Codata.M.html#1179" class="Bound">p</a> <a id="1181" class="Symbol">→</a> <a id="1183" class="Symbol">λ</a> <a id="1185" class="Keyword">where</a> <a id="1191" class="Symbol">.</a><a id="1192" href="Codata.Thunk.html#541" class="Field">force</a> <a id="1198" class="Symbol">→</a> <a id="1200" href="Codata.M.html#1080" class="Function">unfold</a> <a id="1207" class="Symbol">(</a><a id="1208" href="Codata.M.html#1132" class="Bound">next</a> <a id="1213" href="Codata.M.html#1179" class="Bound">p</a><a id="1214" class="Symbol">))</a>
</pre></body></html>