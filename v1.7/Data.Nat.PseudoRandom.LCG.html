<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Nat.PseudoRandom.LCG</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Linear congruential pseudo random generators for natural numbers</a>
<a id="174" class="Comment">-- /!\ NB: LCGs must not be used for cryptographic applications</a>
<a id="238" class="Comment">------------------------------------------------------------------------</a>

<a id="312" class="Symbol">{-#</a> <a id="316" class="Keyword">OPTIONS</a> <a id="324" class="Pragma">--without-K</a> <a id="336" class="Pragma">--safe</a> <a id="343" class="Symbol">#-}</a>

<a id="348" class="Keyword">module</a> <a id="355" href="Data.Nat.PseudoRandom.LCG.html" class="Module">Data.Nat.PseudoRandom.LCG</a> <a id="381" class="Keyword">where</a>

<a id="388" class="Keyword">open</a> <a id="393" class="Keyword">import</a> <a id="400" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="409" class="Keyword">using</a> <a id="415" class="Symbol">(</a><a id="416" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="417" class="Symbol">;</a> <a id="419" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="423" class="Symbol">;</a> <a id="425" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="428" class="Symbol">;</a> <a id="430" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="433" class="Symbol">;</a> <a id="435" href="Agda.Builtin.Nat.html#528" class="Primitive Operator">_*_</a><a id="438" class="Symbol">;</a> <a id="440" href="Data.Nat.Base.html#3471" class="Function Operator">_^_</a><a id="443" class="Symbol">;</a> <a id="445" href="Data.Nat.Properties.html#2529" class="Function Operator">_≟_</a><a id="448" class="Symbol">)</a>
<a id="450" class="Keyword">open</a> <a id="455" class="Keyword">import</a> <a id="462" href="Data.Nat.DivMod.html" class="Module">Data.Nat.DivMod</a> <a id="478" class="Keyword">using</a> <a id="484" class="Symbol">(</a><a id="485" href="Data.Nat.DivMod.html#1564" class="Function Operator">_%_</a><a id="488" class="Symbol">)</a>
<a id="490" class="Keyword">open</a> <a id="495" class="Keyword">import</a> <a id="502" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="517" class="Keyword">using</a> <a id="523" class="Symbol">(</a><a id="524" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="528" class="Symbol">;</a> <a id="530" href="Data.List.Base.html#10383" class="InductiveConstructor">[]</a><a id="532" class="Symbol">;</a> <a id="534" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="537" class="Symbol">)</a>
<a id="539" class="Keyword">open</a> <a id="544" class="Keyword">import</a> <a id="551" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="578" class="Keyword">using</a> <a id="584" class="Symbol">(</a><a id="585" href="Relation.Nullary.Decidable.Core.html#1406" class="Function">False</a><a id="590" class="Symbol">)</a>

<a id="593" class="Comment">------------------------------------------------------------------------</a>
<a id="666" class="Comment">-- Type and generator</a>

<a id="689" class="Keyword">record</a> <a id="Generator"></a><a id="696" href="Data.Nat.PseudoRandom.LCG.html#696" class="Record">Generator</a> <a id="706" class="Symbol">:</a> <a id="708" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="712" class="Keyword">where</a>
  <a id="720" class="Keyword">field</a> <a id="Generator.multiplier"></a><a id="726" href="Data.Nat.PseudoRandom.LCG.html#726" class="Field">multiplier</a>  <a id="738" class="Symbol">:</a> <a id="740" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
        <a id="Generator.increment"></a><a id="750" href="Data.Nat.PseudoRandom.LCG.html#750" class="Field">increment</a>   <a id="762" class="Symbol">:</a> <a id="764" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
        <a id="Generator.modulus"></a><a id="774" href="Data.Nat.PseudoRandom.LCG.html#774" class="Field">modulus</a>     <a id="786" class="Symbol">:</a> <a id="788" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
        <a id="798" class="Symbol">{</a><a id="Generator.modulus≢0"></a><a id="799" href="Data.Nat.PseudoRandom.LCG.html#799" class="Field">modulus≢0</a><a id="808" class="Symbol">}</a> <a id="810" class="Symbol">:</a> <a id="812" href="Relation.Nullary.Decidable.Core.html#1406" class="Function">False</a> <a id="818" class="Symbol">(</a><a id="819" href="Data.Nat.PseudoRandom.LCG.html#774" class="Field">modulus</a> <a id="827" href="Data.Nat.Properties.html#2529" class="Function Operator">≟</a> <a id="829" class="Number">0</a><a id="830" class="Symbol">)</a>

<a id="step"></a><a id="833" href="Data.Nat.PseudoRandom.LCG.html#833" class="Function">step</a> <a id="838" class="Symbol">:</a> <a id="840" href="Data.Nat.PseudoRandom.LCG.html#696" class="Record">Generator</a> <a id="850" class="Symbol">→</a> <a id="852" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="854" class="Symbol">→</a> <a id="856" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="858" href="Data.Nat.PseudoRandom.LCG.html#833" class="Function">step</a> <a id="863" href="Data.Nat.PseudoRandom.LCG.html#863" class="Bound">gen</a> <a id="867" href="Data.Nat.PseudoRandom.LCG.html#867" class="Bound">x</a> <a id="869" class="Symbol">=</a>
  <a id="873" class="Keyword">let</a> <a id="877" class="Keyword">open</a> <a id="882" href="Data.Nat.PseudoRandom.LCG.html#696" class="Module">Generator</a> <a id="892" href="Data.Nat.PseudoRandom.LCG.html#863" class="Bound">gen</a> <a id="896" class="Keyword">in</a>
  <a id="901" class="Symbol">((</a><a id="903" href="Data.Nat.PseudoRandom.LCG.html#726" class="Function">multiplier</a> <a id="914" href="Agda.Builtin.Nat.html#528" class="Primitive Operator">*</a> <a id="916" href="Data.Nat.PseudoRandom.LCG.html#867" class="Bound">x</a> <a id="918" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="920" href="Data.Nat.PseudoRandom.LCG.html#750" class="Function">increment</a><a id="929" class="Symbol">)</a> <a id="931" href="Data.Nat.DivMod.html#1564" class="Function Operator">%</a> <a id="933" href="Data.Nat.PseudoRandom.LCG.html#774" class="Function">modulus</a><a id="940" class="Symbol">)</a> <a id="942" class="Symbol">{</a><a id="943" href="Data.Nat.PseudoRandom.LCG.html#799" class="Function">modulus≢0</a><a id="952" class="Symbol">}</a>

<a id="list"></a><a id="955" href="Data.Nat.PseudoRandom.LCG.html#955" class="Function">list</a> <a id="960" class="Symbol">:</a> <a id="962" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="964" class="Symbol">→</a> <a id="966" href="Data.Nat.PseudoRandom.LCG.html#696" class="Record">Generator</a> <a id="976" class="Symbol">→</a> <a id="978" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="980" class="Symbol">→</a> <a id="982" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="987" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="989" href="Data.Nat.PseudoRandom.LCG.html#955" class="Function">list</a> <a id="994" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>    <a id="1002" href="Data.Nat.PseudoRandom.LCG.html#1002" class="Bound">gen</a> <a id="1006" href="Data.Nat.PseudoRandom.LCG.html#1006" class="Bound">x</a> <a id="1008" class="Symbol">=</a> <a id="1010" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="1013" href="Data.Nat.PseudoRandom.LCG.html#955" class="Function">list</a> <a id="1018" class="Symbol">(</a><a id="1019" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1023" href="Data.Nat.PseudoRandom.LCG.html#1023" class="Bound">k</a><a id="1024" class="Symbol">)</a> <a id="1026" href="Data.Nat.PseudoRandom.LCG.html#1026" class="Bound">gen</a> <a id="1030" href="Data.Nat.PseudoRandom.LCG.html#1030" class="Bound">x</a> <a id="1032" class="Symbol">=</a> <a id="1034" href="Data.Nat.PseudoRandom.LCG.html#1030" class="Bound">x</a> <a id="1036" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1038" href="Data.Nat.PseudoRandom.LCG.html#955" class="Function">list</a> <a id="1043" href="Data.Nat.PseudoRandom.LCG.html#1023" class="Bound">k</a> <a id="1045" href="Data.Nat.PseudoRandom.LCG.html#1026" class="Bound">gen</a> <a id="1049" class="Symbol">(</a><a id="1050" href="Data.Nat.PseudoRandom.LCG.html#833" class="Function">step</a> <a id="1055" href="Data.Nat.PseudoRandom.LCG.html#1026" class="Bound">gen</a> <a id="1059" href="Data.Nat.PseudoRandom.LCG.html#1030" class="Bound">x</a><a id="1060" class="Symbol">)</a>

<a id="1063" class="Comment">------------------------------------------------------------------------</a>
<a id="1136" class="Comment">-- Examples of parameters</a>
<a id="1162" class="Comment">-- Taken from https://en.wikipedia.org/wiki/Linear_congruential_generator</a>

<a id="1237" class="Comment">-- /!\ As explained in that wikipedia entry, none of these are claimed to</a>
<a id="1311" class="Comment">-- be good parameters.</a>

<a id="1335" class="Comment">-- Note also that if you need your output to have good properties you may</a>
<a id="1409" class="Comment">-- need to postprocess the stream of values to only use some of the bits of</a>
<a id="1485" class="Comment">-- the output!</a>

<a id="glibc"></a><a id="1501" href="Data.Nat.PseudoRandom.LCG.html#1501" class="Function">glibc</a> <a id="1507" class="Symbol">:</a> <a id="1509" href="Data.Nat.PseudoRandom.LCG.html#696" class="Record">Generator</a>
<a id="1519" href="Data.Nat.PseudoRandom.LCG.html#1501" class="Function">glibc</a> <a id="1525" class="Symbol">=</a> <a id="1527" class="Keyword">record</a>
  <a id="1536" class="Symbol">{</a> <a id="1538" href="Data.Nat.PseudoRandom.LCG.html#726" class="Field">multiplier</a> <a id="1549" class="Symbol">=</a> <a id="1551" class="Number">1103515245</a>
  <a id="1564" class="Symbol">;</a> <a id="1566" href="Data.Nat.PseudoRandom.LCG.html#750" class="Field">increment</a>  <a id="1577" class="Symbol">=</a> <a id="1579" class="Number">12345</a>
  <a id="1587" class="Symbol">;</a> <a id="1589" href="Data.Nat.PseudoRandom.LCG.html#774" class="Field">modulus</a>    <a id="1600" class="Symbol">=</a> <a id="1602" class="Number">2</a> <a id="1604" href="Data.Nat.Base.html#3471" class="Function Operator">^</a> <a id="1606" class="Number">31</a>
  <a id="1611" class="Symbol">}</a>

<a id="random0"></a><a id="1614" href="Data.Nat.PseudoRandom.LCG.html#1614" class="Function">random0</a> <a id="1622" class="Symbol">:</a> <a id="1624" href="Data.Nat.PseudoRandom.LCG.html#696" class="Record">Generator</a>
<a id="1634" href="Data.Nat.PseudoRandom.LCG.html#1614" class="Function">random0</a> <a id="1642" class="Symbol">=</a> <a id="1644" class="Keyword">record</a>
  <a id="1653" class="Symbol">{</a> <a id="1655" href="Data.Nat.PseudoRandom.LCG.html#726" class="Field">multiplier</a> <a id="1666" class="Symbol">=</a> <a id="1668" class="Number">8121</a>
  <a id="1675" class="Symbol">;</a> <a id="1677" href="Data.Nat.PseudoRandom.LCG.html#750" class="Field">increment</a>  <a id="1688" class="Symbol">=</a> <a id="1690" class="Number">28411</a>
  <a id="1698" class="Symbol">;</a> <a id="1700" href="Data.Nat.PseudoRandom.LCG.html#774" class="Field">modulus</a>    <a id="1711" class="Symbol">=</a> <a id="1713" class="Number">134456</a>
  <a id="1722" class="Symbol">}</a>
</pre></body></html>